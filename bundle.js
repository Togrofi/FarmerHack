(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
// ---Project Dropdown Menu--- //
var DropdownCollector = document.getElementsByClassName("Projcet-DropDownButton")
for (let i = 0; i < DropdownCollector.length; i++){
    DropdownCollector[i].addEventListener("click", function() {
        this.classList.toggle("Project-ActiveDropDownButton")
        var panel = this.nextElementSibling;
        var image = this.childNodes[5].childNodes[3].childNodes[1]
        if (panel.style.maxHeight) {
            panel.style.maxHeight = null;
            image.src = "images/pictures/dropdown/DdpDownOrange.png"
        } else {
            panel.style.maxHeight = panel.scrollHeight + "px";
            image.src = "images/pictures/dropdown/DdpUpLight.png"
        }
    })
}

// ---Sticky NavBar--- //
// Get the navbar
var NavBar = document.getElementById("NavBar-Section");

// there should only be 1 main section
var MainSection = document.getElementsByClassName("Main-Section")[0];



// Get the offset position of the navbar
var PosStickyStart = NavBar.offsetTop;

// Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
function myFunction() {
    if (window.pageYOffset >= PosStickyStart) {
    NavBar.classList.add("NavBar-StickyNavBar");
    MainSection.style.marginTop = "var(--NavBarHeight)";
    } else {
    NavBar.classList.remove("NavBar-StickyNavBar");
    MainSection.style.marginTop = "0cm";
    }
}
  
// When the user scrolls the page, execute myFunction
window.onscroll = function() {myFunction()};



// // Get the navbar
// var NavBar = document.getElementsByClassName("NavBar-Section");

// // Get the offset position of the navbar
// var PosStickyStart = NavBar.offsetTop;

// Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
function myFunction() {
  if (window.pageYOffset >= PosStickyStart) {
    NavBar.classList.add("NavBar-StickyNavBar");
    MainSection.style.marginTop = "var(--NavBarHeight)";
  } else {
    NavBar.classList.remove("NavBar-StickyNavBar");
    MainSection.style.marginTop = "0cm";
  }
}
// When the user scrolls the page, execute myFunction
window.onscroll = function() {myFunction()};

// ------------------------------------

/* // Slides
var slideIndex = 1; 
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("SlideShow-FadingTitles")

  if (n > slides.length)  {slideIndex=1}
  else if (n < 1) {slideIndex=slides.length}

  for (let i=0; i < slides.length; i++)
  {
    if (i == slideIndex-1){
      slides[i].style.display = "block"
    }
    else {
      slides[i].style.display = "none"
    }
  }
}

setInterval(function(){showSlides(slideIndex+=1)},5000);

*/
// Rublics Cube

var tempinput = [[[0,5,0],[0,5,0],[0,5,0]],[[0,3,0],[0,3,0],[0,3,0]],[[0,2,0],[0,2,0],[0,2,0]],[[0,1,0],[0,1,0],[0,1,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,4,0],[0,4,0],[0,4,0]]]
var outflag = false
var GICollector = document.getElementsByClassName("Grid-Item");
var solverbutton = document.getElementById("Solver-Button-Wrapper");

/*solverbutton.onclick = function () {
  const solver = require('rubiks-cube-solver');
  console.log(tempinput);
  let cubeState = tempinput.join('').split(",").join("");
  cubeState = cubeState.replace(/0/g,'l').replace(/1/g,'d').replace(/2/g,'u').replace(/3/g,'r').replace(/4/g,'b').replace(/5/g,'f');
  console.log(cubeState);
  cubeState = [
    'flulfbddr', // front
    'rudrruddl', // right
    'dbbburrfb', // up
    'llffdrubf', // down
    'rludlubrf', // left
    'lubfbfudl' // back
  ].join('');
  let solveMoves = solver(cubeState).replace(/prime/g, '-');
  for (let i = 0; i < solveMoves.length; i++) {
    if (solveMoves[i] == '2') {
      solveMoves = solveMoves.substring(0, i) + " " + solveMoves[i-1] + solveMoves.substring(i+1);
    }
  }
  let solveMovesArray = solveMoves.split(' ')

  console.log(solveMoves);
  console.log(solveMovesArray);
  
}*/


solverbutton.style.display = "none";

for (let i = 0; i < GICollector.length; i++){ 
  GICollector[i].addEventListener("click", function() {
    
      let out = change(i)
      changeinput(out[0],out[1],out[2],1)
      currcol = tempinput[out[0]][out[1]][out[2]]

      //r, o, b, g, w, y
      if (currcol==6){
        this.style.backgroundColor = "grey"
      } else if (currcol==0) {
        this.style.backgroundColor = "red"
      } else if (currcol==1) {
        this.style.backgroundColor = "blue"
      } else if (currcol==2) {
        this.style.backgroundColor = "green"
      } else if (currcol==3) {
        this.style.backgroundColor = "orange"
      } else if (currcol==4) {
        this.style.backgroundColor = "yellow"
      } else if (currcol==5) {
        this.style.backgroundColor = "var(--LightOffWhite)"
      }

      checkinput()
      if (outflag == true){
        solverbutton.style.display = "block"
      } else {
        solverbutton.style.display = "none"
      }

      //solverbutton.onclick = solve_cube();
       
      // else if(tempinput[out[0]][out[1]][out[2]]==6)
      // {

      // }
      
      // this.style.backgroundColor
      // this.classList.toggle("Project-ActiveDropDownButton")
      // var panel = this.nextElementSibling;
      // var image = this.childNodes[5].childNodes[3].childNodes[1]
      // if (panel.style.maxHeight) {
      //     panel.style.maxHeight = null;
      //     image.src = "images/pictures/dropdown/DdpDownOrange.png"
      // } else {
      //     panel.style.maxHeight = panel.scrollHeight + "px";
      //     image.src = "images/pictures/dropdown/DdpUpLight.png"
      // }
  })
}

function change(n){
  face = Math.floor(n/9)
  blocknum = n%9
  x = Math.floor(blocknum/3)
  y = blocknum%3
  return [face, x, y]
} 

function changeinput(face, x, y, colchange){
  if (!(x==1 && y==1)){
    let color = tempinput[face][x][y]
    if (color == 6){
      tempinput[face][x][y] = 0
    } else {
      tempinput[face][x][y] = (tempinput[face][x][y]+colchange)%6
    } 
  }
}

function checkinput()
{
  for (let j = 0; j < GICollector.length; j++) {
    out = change(j)
    val = 0
    if (tempinput[out[0]][out[1]][out[2]]==6) {
      val +=1
    }
    if (val != 0){
      outflag = false
    } else {
      outflag = true
    }
  }
}

// NEWWWWWWWWWWWWWWWWWWWWWW Modal
// get modal
var modal = document.getElementById("Modal");

//var btn = document.getElementById("Solver-Button-Wrapper");

var span = document.getElementsByClassName("close")[0];
var solveMovesArray = [];
solverbutton.onclick = function() {

  const solver = require('rubiks-cube-solver');
  console.log(tempinput);
  let cubeState = tempinput.join('').split(",").join("");
  cubeState = cubeState.replace(/0/g,'l').replace(/1/g,'d').replace(/2/g,'u').replace(/3/g,'r').replace(/4/g,'b').replace(/5/g,'f');
  console.log(cubeState);
  /*cubeState = [
    'flulfbddr', // front
    'rudrruddl', // right
    'dbbburrfb', // up
    'llffdrubf', // down
    'rludlubrf', // left
    'lubfbfudl' // back
  ].join('');*/
  cubeState = "ffdffdffdrrrrrrrrruufuufuufddbddbddblllllllllubbubbubb";
  
  let solveMoves = solver(cubeState).replace(/prime/g, '-');
  for (let i = 0; i < solveMoves.length; i++) {
    if (solveMoves[i] == '2') {
      solveMoves = solveMoves.substring(0, i) + " " + solveMoves[i-1] + solveMoves.substring(i+1);
    }
  }
  solveMovesArray = solveMoves.split(' ')

  console.log(solveMoves);
  console.log(solveMovesArray);
  ShowStep(currstep)

  modal.style.display = "block";

  
}

span.onclick = function() {
  modal.style.display = "none";
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }


}


//var solution = ["R","U","B","D"]

// display
var currstep = 1
var len = solveMovesArray.length



function StepUp(n){
  ShowStep(currstep+=n)
}

//ffdffdffdrrrrrrrrruufuufuufddbddbddblllllllllubbubbubb

function plusSlides(n) {
  ShowStep(slideIndex += n);
}

function ShowStep(i) {
  var MGCollector = document.getElementsByClassName("Modal-Grid-Items");
  var MLeft = document.getElementById("mleft");
  var MRight = document.getElementById("mright");
  var MDisplay = document.getElementById("action");
  var MBgc = document.getElementById("mbgc");
  var text = document.getElementById("text");

  // Format i
  if (i>=len){currstep=len; i=len;MRight.style.opacity=0}
  else if (i<=1){currstep=1; i=1;MLeft.style.opacity=0}
  else {MRight.style.opacity=1; MLeft.style.opacity=1}
  var MCode = solveMovesArray[i-1]


  // steps
  text.textContent = currstep + "/" + len;
  MDisplay.textContent = MCode;
  for (j=0;j<MGCollector.length;j++){
    MGCollector[j].textContent ="";
  }

  if(i==1) {
    MBgc.style.backgroundColor="var(--LightOffWhite)";
    MGCollector[12].textContent = "W";
  }
  else {
    MBgc.style.backgroundColor="lightgray";
  }

  // cursed bit
  if (MCode === "R") {
    MGCollector[4].textContent = "0";
    MGCollector[8].textContent = "↑";
    MGCollector[13].textContent = "↑";
    MGCollector[18].textContent = "↑";
  } else if (MCode === "R-") {
    MGCollector[4].textContent = "0";
    MGCollector[8].textContent = "↓";
    MGCollector[13].textContent = "↓";
    MGCollector[18].textContent = "↓";
  } else if (MCode === "M") {
    MGCollector[4].textContent = "0";
    MGCollector[7].textContent = "↑";
    MGCollector[12].textContent = "↑";
    MGCollector[17].textContent = "↑";
  } else if (MCode === "M-") {
    MGCollector[4].textContent = "0";
    MGCollector[7].textContent = "↓";
    MGCollector[12].textContent = "↓";
    MGCollector[17].textContent = "↓";
  } else if (MCode === "L") {
    MGCollector[4].textContent = "0";
    MGCollector[6].textContent = "↓";
    MGCollector[11].textContent = "↓";
    MGCollector[16].textContent = "↓";
  } else if (MCode === "L-") {
    MGCollector[4].textContent = "0";
    MGCollector[6].textContent = "↑";
    MGCollector[11].textContent = "↑";
    MGCollector[16].textContent = "↑";
  }
  if (MCode === "F")
  {
    MGCollector[4].textContent = "0";
    MGCollector[7].textContent = "→";
    MGCollector[11].textContent = "↑";
    MGCollector[13].textContent = "↓";
    MGCollector[17].textContent = "←";
  }
  if (MCode === "F-")
  {
    MGCollector[4].textContent = "0";
    MGCollector[17].textContent = "→";
    MGCollector[13].textContent = "↑";
    MGCollector[11].textContent = "↓";
    MGCollector[7].textContent = "←";
  }

  if (MCode === "U")
  {
    MGCollector[4].textContent = "0";
    MGCollector[6].textContent = "←";
    MGCollector[7].textContent = "←";
    MGCollector[8].textContent = "←";
  }
  if (MCode === "U-")
  {
    MGCollector[4].textContent = "0";
    MGCollector[6].textContent = "→";
    MGCollector[7].textContent = "→";
    MGCollector[8].textContent = "→";
  }
  if (MCode === "D")
  {
    MGCollector[4].textContent = "0";
    MGCollector[16].textContent = "→";
    MGCollector[17].textContent = "→";
    MGCollector[18].textContent = "→";
  }

  if (MCode === "D-") {
    MGCollector[4].textContent = "0";
    MGCollector[16].textContent = "←";
    MGCollector[17].textContent = "←";
    MGCollector[18].textContent = "←";
  }

  if (MCode === "E")
  {
    MGCollector[4].textContent = "0";
    MGCollector[11].textContent = "→";
    MGCollector[12].textContent = "→";
    MGCollector[13].textContent = "→";
  }

  if (MCode === "E-") {
    MGCollector[4].textContent = "0";
    MGCollector[11].textContent = "←";
    MGCollector[12].textContent = "←";
    MGCollector[13].textContent = "←";
  }

  if (MCode === "B")
  {
    MGCollector[4].textContent = "2";
    MGCollector[1].textContent = "←";
    MGCollector[2].textContent = "←";
    MGCollector[3].textContent = "←";
    MGCollector[5].textContent = "↓";
    MGCollector[9].textContent = "↑";
    MGCollector[10].textContent = "↓";
    MGCollector[14].textContent = "↑";
    MGCollector[15].textContent = "↓";
    MGCollector[19].textContent = "↑";
  }

  if (MCode === "B-")
  {
    MGCollector[4].textContent = "2";
    MGCollector[1].textContent = "→";
    MGCollector[2].textContent = "→";
    MGCollector[3].textContent = "→";
    MGCollector[9].textContent = "↓";
    MGCollector[5].textContent = "↑";
    MGCollector[14].textContent = "↓";
    MGCollector[10].textContent = "↑";
    MGCollector[19].textContent = "↓";
    MGCollector[15].textContent = "↑";
  }
  if (MCode === "S")
  {
    MGCollector[4].textContent = "1";
    MGCollector[1].textContent = "→";
    MGCollector[2].textContent = "→";
    MGCollector[3].textContent = "→";
    MGCollector[9].textContent = "↓";
    MGCollector[5].textContent = "↑";
    MGCollector[14].textContent = "↓";
    MGCollector[10].textContent = "↑";
    MGCollector[19].textContent = "↓";
    MGCollector[15].textContent = "↑";
  }
  if (MCode === "S-")
  {
    MGCollector[4].textContent = "1";
    MGCollector[1].textContent = "←";
    MGCollector[2].textContent = "←";
    MGCollector[3].textContent = "←";
    MGCollector[5].textContent = "↓";
    MGCollector[9].textContent = "↑";
    MGCollector[10].textContent = "↓";
    MGCollector[14].textContent = "↑";
    MGCollector[15].textContent = "↓";
    MGCollector[19].textContent = "↑";
  }

}




},{"rubiks-cube-solver":2}],2:[function(require,module,exports){
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.rubiksCubeSolver=r():e.rubiksCubeSolver=r()}(this,function(){return function(e){function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=34)}([function(e,r,t){"use strict";function o(e){var r={};return Object.keys(e).forEach(function(t){r[t.toLowerCase()]=e[t].toLowerCase()}),r}function n(e,r){var t=Object.keys(e);if(t.length<=1&&["front","back"].includes(t[0]))throw new Error('Orientation object "'+e+'" is ambiguous. Please specify one of these faces: "up", "right", "down", "left"');var o=e;return e={},t.forEach(function(r){["front","back"].includes(r)||(e[r]=o[r])}),e.front=r.toLowerCase(),e}function i(e){if(Object.keys(e)<=1)throw new Error('Orientation object "'+e+'" is ambiguous. Please specify 2 faces.');var r=Object.keys(e),t=r.map(function(r){return new l.Face(e[r])}),o=r.map(function(e){return new l.Face(e)}),n=f.Vector.getRotationFromNormals(t[0].normal(),t[0].orientTo(o[0]).normal());t[1].rotate(n.axis,n.angle);var i=f.Vector.getRotationFromNormals(t[1].normal(),t[1].orientTo(o[1]).normal());if(Math.abs(i.angle)===Math.PI){var a=new l.Face(r[0]).vector.getAxis();i.axis=a}return[n,i]}function a(e,r){var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,c=!0,s=!1,l=void 0;try{for(var f,v=r[Symbol.iterator]();!(c=(f=v.next()).done);c=!0){var m=f.value;u.rotate(m.axis,m.angle)}}catch(e){s=!0,l=e}finally{try{!c&&v.return&&v.return()}finally{if(s)throw l}}}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}function u(e){var r=[],t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;u=u.includes("prime")?u[0]:u[0]+"prime",r.push(u)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}return"string"==typeof moves?r.join(" "):r}Object.defineProperty(r,"__esModule",{value:!0}),r.orientMoves=r.getRotationFromTo=r.getFaceFromDirection=r.getDirectionFromFaces=r.normalizeNotations=r.transformNotations=r.getFaceMatchingMiddle=r.getMiddleMatchingFace=r.getMoveOfFace=r.getFaceOfMove=void 0;var c=t(7),s=function(e){return e&&e.__esModule?e:{default:e}}(c),l=t(10),f=t(4),v={f:"s",r:"mprime",u:"eprime",d:"e",l:"m",b:"sprime"},m=r.getFaceOfMove=function(e){if("string"!=typeof e)throw new TypeError("move must be a string");var r=e[0].toLowerCase();return"f"===r?"front":"r"===r?"right":"u"===r?"up":"d"===r?"down":"l"===r?"left":"b"===r?"back":void 0},h=r.getMoveOfFace=function(e){if("string"!=typeof e)throw new TypeError("face must be a string");if(e=e.toLowerCase(),!["front","right","up","down","left","back"].includes(e))throw new Error(e+" is not valid face");return e[0]},p=r.getMiddleMatchingFace=function(e){return e=e.toLowerCase()[0],v[e]},g=r.getFaceMatchingMiddle=function(e){e=e.toLowerCase();var r=!0,t=!1,o=void 0;try{for(var n,i=Object.keys(v)[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var a=n.value;if(e===v[a])return a}}catch(e){t=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(t)throw o}}},d=r.transformNotations=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=y(e);return r.upperCase&&(t=t.map(function(e){return e[0].toUpperCase()+e.slice(1)})),r.orientation&&(t=w(t,r.orientation)),r.reverse&&(t=u(t)),"string"==typeof e?t.join(" "):t},y=r.normalizeNotations=function(e){return"string"==typeof e&&(e=e.split(" ")),e=e.filter(function(e){return""!==e}),e.map(function(e){var r=e.toLowerCase().includes("prime"),t=e.includes("2");return e=e[0],t?e=e[0]+"2":r&&(e+="prime"),e})},P=r.getDirectionFromFaces=function(e,r,t){t=o(t),t=n(t,e);var u=new l.Face(e),c=new l.Face(r);a([u,c],i(t));var v=new f.Vector((0,s.default)([],u.normal(),c.normal())).getAxis(),m=f.Vector.getAngle(u.normal(),c.normal());return"x"===v&&m>0?"down":"x"===v&&m<0?"up":"y"===v&&m>0?"right":"y"===v&&m<0?"left":0===m?"front":m===Math.PI?"back":void 0},b=r.getFaceFromDirection=function(e,r,t){t=o(t),t=n(t,e);var u=new l.Face(e),c=i(t);a([u],c);var s=new l.Face(r),v=f.Vector.getRotationFromNormals(u.normal(),s.normal()),m=v.axis,h=v.angle;return u.rotate(m,h),a([u],c.map(function(e){return f.Vector.reverseRotation(e)}).reverse()),u.toString()},F=r.getRotationFromTo=function(e,r,t){var o=new l.Face(e),n=new l.Face(r),i=new l.Face(t),a=o.vector.getAxis(),u=[n.vector.getAxis(),i.vector.getAxis()],c=u[0],s=u[1];if([c.toLowerCase(),s.toLowerCase()].includes(a.toLowerCase()))throw new Error("moving "+o+" from "+n+" to "+i+" is not possible.");var v=h(e).toUpperCase(),m=f.Vector.getAngle(n.normal(),i.normal());return o.vector.getMagnitude()<0&&(m*=-1),0===m?"":Math.abs(m)===Math.PI?v+" "+v:m<0?""+v:m>0?v+"Prime":void 0},w=r.orientMoves=function(e,r){r=o(r);var t=i(r);return t.reverse().map(function(e){return f.Vector.reverseRotation(e)}),e.map(function(e){var r=e.toLowerCase().includes("prime"),o=e.includes("2"),n=e[0]===e[0].toLowerCase(),i=["m","e","s"].includes(e[0].toLowerCase());o&&(e=e.replace("2",""));var u=void 0;if(i){var c=m(g(e));u=new l.Face(c)}else{var s=m(e[0]);u=new l.Face(s)}a([u],t);var f=void 0;return f=i?p(u.toString()):u.toString()[0],n||(f=f.toUpperCase()),o&&(f+="2"),r&&!i&&(f+="prime"),f})};r.default={getFaceOfMove:m,getMoveOfFace:h,getMiddleMatchingFace:p,getFaceMatchingMiddle:g,transformNotations:d,normalizeNotations:y,getDirectionFromFaces:P,getRotationFromTo:F,getFaceFromDirection:b,orientMoves:w}},function(e,r,t){"use strict";function o(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.RubiksCube=void 0;var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),a=t(9),u=t(3),c=t(0),s="fffffffffrrrrrrrrruuuuuuuuudddddddddlllllllllbbbbbbbbb",l=function(){function e(r){if(n(this,e),54!==r.length)throw new Error("Wrong number of colors provided");this._notationToRotation={f:{axis:"z",mag:-1},r:{axis:"x",mag:-1},u:{axis:"y",mag:-1},d:{axis:"y",mag:1},l:{axis:"x",mag:1},b:{axis:"z",mag:1},m:{axis:"x",mag:1},e:{axis:"y",mag:1},s:{axis:"z",mag:-1}},this._build(r)}return i(e,null,[{key:"Solved",value:function(){return new e(s)}},{key:"FromMoves",value:function(r){var t=e.Solved();return t.move(r),t}},{key:"Scrambled",value:function(){var r=e.Solved(),t=e.getRandomMoves(25);return r.move(t),r}},{key:"reverseMoves",value:function(r){return e.transformMoves(r,{reverse:!0})}},{key:"transformMoves",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.transformNotations)(e,r)}},{key:"getRandomMoves",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25,r=[],t=["F","Fprime","R","Rprime","U","Uprime","D","Dprime","L","Lprime","B","Bprime"];r.length<e;){for(var o=0;o<e-r.length;o++){var n=~~(Math.random()*t.length);r.push(t[n])}r=(0,u.algorithmShortener)(r).split(" ")}return r.join(" ")}}]),i(e,[{key:"getFace",value:function(e){if("string"!=typeof e)throw new Error('"face" must be a string (received: '+e+")");e=e.toLowerCase()[0];var r=void 0,t=void 0,o=void 0,n=void 0,i=void 0;if("f"===e)r="Y",t="X",o=-1,n=1,i=this._cubies.filter(function(e){return 1===e.getZ()});else if("r"===e)r="Y",t="Z",o=-1,n=-1,i=this._cubies.filter(function(e){return 1===e.getX()});else if("u"===e)r="Z",t="X",o=1,n=1,i=this._cubies.filter(function(e){return 1===e.getY()});else if("d"===e)r="Z",t="X",o=-1,n=1,i=this._cubies.filter(function(e){return-1===e.getY()});else if("l"===e)r="Y",t="Z",o=-1,n=1,i=this._cubies.filter(function(e){return-1===e.getX()});else if("b"===e)r="Y",t="X",o=-1,n=-1,i=this._cubies.filter(function(e){return-1===e.getZ()});else if(["m","e","s"].includes(e))return this._getMiddleCubiesForMove(e);return i.sort(function(e,i){var a=e["get"+r]()*o,u=e["get"+t]()*n,c=i["get"+r]()*o,s=i["get"+t]()*n;return a<c?-1:a>c?1:u<s?-1:1})}},{key:"getCubie",value:function(e){return this._cubies.find(function(r){if(e.length!=r.faces().length)return!1;var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;if(!r.faces().includes(u))return!1}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}return!0})}},{key:"corners",value:function(){return this._cubies.filter(function(e){return e.isCorner()})}},{key:"edges",value:function(){return this._cubies.filter(function(e){return e.isEdge()})}},{key:"middles",value:function(){return this._cubies.filter(function(e){return e.isMiddle()})}},{key:"move",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e=e.split(" ")),e=(0,c.transformNotations)(e,r);var t=!0,n=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var s=a.value,l=s[0];if(l){var f=s.toLowerCase().includes("prime"),v=l===l.toLowerCase(),m=s.includes("2"),h=this._getRotationForFace(l),p=h.axis,g=h.mag,d=this.getFace(l);if(f&&(g*=-1),m&&(g*=2),v){var y=(0,c.getMiddleMatchingFace)(l),P=this._getMiddleCubiesForMove(y);d=[].concat(o(d),o(P))}var b=!0,F=!1,w=void 0;try{for(var R,C=d[Symbol.iterator]();!(b=(R=C.next()).done);b=!0){R.value.rotate(p,g)}}catch(e){F=!0,w=e}finally{try{!b&&C.return&&C.return()}finally{if(F)throw w}}}}}catch(e){n=!0,i=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw i}}}},{key:"isSolved",value:function(){return this.toString()===s}},{key:"toString",value:function(){var e="",r=["front","right","up","down","left","back"],t=!0,o=!1,n=void 0;try{for(var i,a=r[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,c=this.getFace(u),s=!0,l=!1,f=void 0;try{for(var v,m=c[Symbol.iterator]();!(s=(v=m.next()).done);s=!0){e+=v.value.getColorOfFace(u)}}catch(e){l=!0,f=e}finally{try{!s&&m.return&&m.return()}finally{if(l)throw f}}}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}return e}},{key:"clone",value:function(){return new e(this.toString())}},{key:"_build",value:function(e){this._cubies=[],this._populateCube();var r=this._parseColors(e),t=!0,o=!1,n=void 0;try{for(var i,a=Object.keys(r)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,c=r[u];this._colorFace(u,c)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}},{key:"_populateCube",value:function(){for(var e=-1;e<=1;e++)for(var r=-1;r<=1;r++)for(var t=-1;t<=1;t++)if(0!==e||0!==r||0!==t){var o=new a.Cubie({position:[e,r,t]});this._cubies.push(o)}}},{key:"_parseColors",value:function(e){for(var r={front:[],right:[],up:[],down:[],left:[],back:[]},t=void 0,o=0;o<e.length;o++){var n=e[o];t=o<9?"front":o<18?"right":o<27?"up":o<36?"down":o<45?"left":"back",r[t].push(n)}return r}},{key:"_colorFace",value:function(e,r){for(var t=this.getFace(e),o=0;o<r.length;o++)t[o].colorFace(e,r[o])}},{key:"_getRotationForFace",value:function(e){if("string"!=typeof e)throw new Error('"face" must be a string (received: '+e+")");return e=e.toLowerCase(),{axis:this._notationToRotation[e].axis,mag:this._notationToRotation[e].mag*Math.PI/2}}},{key:"_getMiddleCubiesForMove",value:function(e){e=e[0].toLowerCase();var r=void 0;return"m"===e?r=["left","right"]:"e"===e?r=["up","down"]:"s"===e&&(r=["front","back"]),this._cubies.filter(function(e){return!e.hasFace(r[0])&&!e.hasFace(r[1])})}}]),e}();r.RubiksCube=l},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.BaseSolver=void 0;var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),i=t(1),a=t(0),u=function(){function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.cube="string"==typeof r?new i.RubiksCube(r):r,this.options=t,this.partition={},this.partitions=[],this.totalMoves=[],this._afterEachCallbacks=[]}return n(e,[{key:"move",value:function(e,r){"string"==typeof e&&(e=e.split(" ")),this.cube.move(e,r),e=(0,a.transformNotations)(e,r);var t=!0,o=!1,n=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var c=i.value;this.totalMoves.push(c)}}catch(e){o=!0,n=e}finally{try{!t&&u.return&&u.return()}finally{if(o)throw n}}}},{key:"afterEach",value:function(e){this._afterEachCallbacks.push(e)}},{key:"_triggerAfterEach",value:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];this._afterEachCallbacks.forEach(function(e){return e.apply(void 0,r)})}},{key:"_solve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.partition={},this.partition.cubies=e;var r=e.corner,t=e.edge;return this.partition.caseNumber=this._getCaseNumber({corner:r,edge:t}),this._solveCase(this.partition.caseNumber,{corner:r,edge:t}),this.partition.moves=this.totalMoves,this.totalMoves=[],this._overrideAfterEach||this._triggerAfterEach(this.partition,this.phase),this.partition}},{key:"_solveCase",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.corner,o=r.edge;this["_solveCase"+e]({corner:t,edge:o})}}]),e}();r.BaseSolver=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.algorithmShortener=void 0;var o=t(19),n=function(e){return e&&e.__esModule?e:{default:e}}(o),i={F:"B",R:"L",U:"D"},a=function(e){"string"==typeof e&&(e=e.split(" "));var r={compare:function(e,r){return e[0]===r[0]},combine:function(e,r){var t=e.includes("2")?2:e.includes("prime")?-1:1,o=r.includes("2")?2:r.includes("prime")?-1:1,n=t+o;if(4===n&&(n=0),-2===n&&(n=2),3===n&&(n=-1),0===n)return"";var i=2===n?"2":-1===n?"prime":"";return""+e[0]+i},cancel:function(e){return""===e},ignore:function(e,r){return i[e[0]]===r[0]||i[r[0]]===e[0]}};return(0,n.default)(e,r).join(" ")};r.algorithmShortener=a},function(e,r,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Vector=void 0;var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),a=t(22),u=o(a),c=t(7),s=o(c),l=t(26),f=o(l),v=t(27),m=o(v),h=t(28),p=o(h),g={x:f.default,y:m.default,z:p.default},d=function(){function e(r){n(this,e),this.set(r)}return i(e,null,[{key:"FromString",value:function(r){return new e(r.split(" ").map(function(e){return parseInt(e)}))}},{key:"areEqual",value:function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},{key:"getAngle",value:function(r,t){var o=(0,u.default)(r,t),n=(0,s.default)([],r,t),i=new e(n).getMagnitude();return i?o*i:o}},{key:"getRotationFromNormals",value:function(r,t){var o=new e((0,s.default)([],r,t)).getAxis(),n=e.getAngle(r,t);if(!o){var i=["x","y","z"];i.splice(i.indexOf(new e(r).getAxis()),1),o=i[0]}return{axis:o,angle:n}}},{key:"reverseRotation",value:function(e){return e.angle*=-1,e}}]),i(e,[{key:"toArray",value:function(){return this.vector}},{key:"set",value:function(e){void 0!==e&&(this.vector=e.map(function(e){return Math.round(e)}))}},{key:"setX",value:function(e){this.vector[0]=e}},{key:"setY",value:function(e){this.vector[1]=e}},{key:"setZ",value:function(e){this.vector[2]=e}},{key:"getX",value:function(){return this.toArray()[0]}},{key:"getY",value:function(){return this.toArray()[1]}},{key:"getZ",value:function(){return this.toArray()[2]}},{key:"isAxis",value:function(){var e=0,r=!0,t=!1,o=void 0;try{for(var n,i=this.vector[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){0===n.value&&(e+=1)}}catch(e){t=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(t)throw o}}return 2===e}},{key:"getAxis",value:function(){if(this.isAxis())return 0!==this.vector[0]?"x":0!==this.vector[1]?"y":0!==this.vector[2]?"z":void 0}},{key:"getMagnitude",value:function(){if(this.isAxis())return this["get"+this.getAxis().toUpperCase()]()}},{key:"rotate",value:function(e,r){return e=e.toLowerCase(),this.set(g[e]([],this.vector,[0,0,0],r)),this}}]),e}();r.Vector=d},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.F2LCaseBaseSolver=void 0;var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),u=t(12),c=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),a(r,[{key:"solve",value:function(e){var r=e.corner,t=e.edge;return this._solve({corner:r,edge:t})}}]),r}(u.F2LBaseSolver);r.F2LCaseBaseSolver=c},function(e,r,t){"use strict";e.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g}},function(e,r,t){"use strict";function o(e,r,t){var o=r[0],n=r[1],i=r[2],a=t[0],u=t[1],c=t[2];return e[0]=n*c-i*u,e[1]=i*a-o*c,e[2]=o*u-n*a,e}e.exports=o},function(e,r,t){"use strict";function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===o||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(r){try{return f.call(null,e,0)}catch(r){return f.call(this,e,0)}}}function a(e){if(v===clearTimeout)return clearTimeout(e);if((v===n||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(e);try{return v(e)}catch(r){try{return v.call(null,e)}catch(r){return v.call(this,e)}}}function u(){g&&h&&(g=!1,h.length?p=h.concat(p):d=-1,p.length&&c())}function c(){if(!g){var e=i(u);g=!0;for(var r=p.length;r;){for(h=p,p=[];++d<r;)h&&h[d].run();d=-1,r=p.length}h=null,g=!1,a(e)}}function s(e,r){this.fun=e,this.array=r}function l(){}var f,v,m=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:o}catch(e){f=o}try{v="function"==typeof clearTimeout?clearTimeout:n}catch(e){v=n}}();var h,p=[],g=!1,d=-1;m.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];p.push(new s(e,r)),1!==p.length||g||i(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=l,m.addListener=l,m.once=l,m.off=l,m.removeListener=l,m.removeAllListeners=l,m.emit=l,m.prependListener=l,m.prependOnceListener=l,m.listeners=function(e){return[]},m.binding=function(e){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(e){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Cubie=void 0;var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),i=t(4),a=t(10),u=function(){function e(r){var t=this,n=r.position,i=r.colorMap,a=void 0===i?{}:i;o(this,e),this.position(n),this.colorMap={},Object.keys(a).forEach(function(e){var r=a[e];t.colorFace(e,r)})}return n(e,null,[{key:"FromFaces",value:function(r){var t=new i.Vector([0,0,0]),o={},n=!0,u=!1,c=void 0;try{for(var s,l=r[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var f=s.value;if(f){var v=new a.Face(f);t["set"+v.vector.getAxis().toUpperCase()](v.vector.getMagnitude()),o[f.toLowerCase()]=v.toString()[0].toLowerCase()}}}catch(e){u=!0,c=e}finally{try{!n&&l.return&&l.return()}finally{if(u)throw c}}return new e({position:t.toArray(),colorMap:o})}}]),n(e,[{key:"clone",value:function(){return new e({position:this.position(),colorMap:this.colorMap})}},{key:"position",value:function(e){if(void 0===e)return this.vector?this.vector.toArray():this.vector;this.vector=new i.Vector(e)}},{key:"getX",value:function(){return this.vector.getX()}},{key:"getY",value:function(){return this.vector.getY()}},{key:"getZ",value:function(){return this.vector.getZ()}},{key:"isCorner",value:function(){return 3===Object.keys(this.colorMap).length}},{key:"isEdge",value:function(){return 2===Object.keys(this.colorMap).length}},{key:"isMiddle",value:function(){return 1===Object.keys(this.colorMap).length}},{key:"colors",value:function(){var e=this;return Object.keys(this.colorMap).map(function(r){return e.colorMap[r]})}},{key:"hasColor",value:function(e){e=e.toLowerCase();var r=!0,t=!1,o=void 0;try{for(var n,i=Object.keys(this.colorMap)[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var a=n.value;if(this.colorMap[a]===e)return!0}}catch(e){t=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(t)throw o}}return!1}},{key:"hasFace",value:function(e){return e=e.toLowerCase(),Object.keys(this.colorMap).includes(e)}},{key:"colorFace",value:function(e,r){return e=e.toLowerCase(),r=r.toLowerCase(),this.colorMap[e]=r,this}},{key:"getColorOfFace",value:function(e){return e=e.toLowerCase(),this.colorMap[e]}},{key:"getFaceOfColor",value:function(e){var r=this;return e=e.toLowerCase(),Object.keys(this.colorMap).find(function(t){return r.colorMap[t]===e})}},{key:"faces",value:function(){return Object.keys(this.colorMap)}},{key:"rotate",value:function(e,r){var t=this;this.vector.rotate(e,r);var o={},n=!0,i=!1,u=void 0;try{for(var c,s=Object.keys(this.colorMap)[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var l=c.value,f=this.colorMap[l],v=new a.Face(l),m=v.rotate(e,r).normal().join(" "),h=a.Face.FromNormal(m).toString().toLowerCase();o[h]=f}}catch(e){i=!0,u=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw u}}this.colorMap={},Object.keys(o).forEach(function(e){return t.colorFace(e,o[e])})}}]),e}();r.Cubie=u},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Face=void 0;var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),i=t(4),a={front:"0 0 1",right:"1 0 0",up:"0 1 0",down:"0 -1 0",left:"-1 0 0",back:"0 0 -1"},u=function(){function e(r){if(o(this,e),"string"!=typeof r)throw new Error('"face" must be a string (received: '+r+")");r=r.toLowerCase(),this.vector=i.Vector.FromString(a[r])}return n(e,null,[{key:"FromNormal",value:function(r){return"string"==typeof r&&(r=i.Vector.FromString(r).toArray()),new e(e.getFace(r))}},{key:"getNormal",value:function(e){return i.Vector.FromString(a[e]).toArray()}},{key:"getFace",value:function(e){"string"==typeof e&&(e=i.Vector.FromString(e).toArray());var r=!0,t=!1,o=void 0;try{for(var n,u=Object.keys(a)[Symbol.iterator]();!(r=(n=u.next()).done);r=!0){var c=n.value;if(e.join(" ")===a[c])return c}}catch(e){t=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(t)throw o}}}}]),n(e,[{key:"normal",value:function(){return this.vector.toArray()}},{key:"toString",value:function(){return e.getFace(this.normal())}},{key:"orientTo",value:function(r){"string"==typeof r&&(r=new e(r));var t=i.Vector.getRotationFromNormals(this.normal(),r.normal()),o=t.axis,n=t.angle;return this.vector.rotate(o,n),this}},{key:"rotate",value:function(e,r){return this.vector.rotate(e,r),this}}]),e}();u.FRONT=new u("FRONT"),u.RIGHT=new u("RIGHT"),u.UP=new u("UP"),u.DOWN=new u("DOWN"),u.LEFT=new u("LEFT"),u.BACK=new u("BACK"),r.Face=u},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.CrossSolver=void 0;var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),u=t(2),c=t(1),s=t(0),l=function(e){return c.RubiksCube.reverseMoves(e)},f=function(e){function r(){var e;o(this,r);for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];var u=n(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i)));return u.phase="cross",u}return i(r,e),a(r,[{key:"solve",value:function(){var e=this._getCrossEdges(),r=!0,t=!1,o=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var a=n.value,u=this._solve({edge:a});this.partitions.push(u)}}catch(e){t=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(t)throw o}}return this.partitions}},{key:"isSolved",value:function(){var e=this._getCrossEdges(),r=!0,t=!1,o=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var a=n.value;if(!this.isEdgeSolved(a))return!1}}catch(e){t=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(t)throw o}}return!0}},{key:"isEdgeSolved",value:function(e){var r=e.colors().find(function(e){return"u"!==e}),t=e.faces().find(function(e){return"up"!==e}),o=t[0]===r;return"u"===e.getColorOfFace("up")&&o}},{key:"_getCrossEdges",value:function(){return this.cube.edges().filter(function(e){return e.hasColor("u")})}},{key:"_getCaseNumber",value:function(e){var r=e.edge;if("u"===r.getColorOfFace("up"))return 1;if("u"===r.getColorOfFace("down"))return 2;if(r.faces().includes("up"))return 3;if(r.faces().includes("down"))return 4;var t=r.getFaceOfColor("u"),o=r.getFaceOfColor(r.colors().find(function(e){return"u"!==e})),n=(0,s.getDirectionFromFaces)(t,o,{up:"up"});return"right"===n?5:"left"===n?6:void 0}},{key:"_solveCase1",value:function(e){var r=e.edge;if(!this.isEdgeSolved(r)){var t=r.faces().find(function(e){return"up"!==e});this.move(t+" "+t,{upperCase:!0}),this._solveCase2({edge:r})}}},{key:"_solveCase2",value:function(e){var r=e.edge,t=this._case1And2Helper({edge:r},2);this.move(t,{upperCase:!0})}},{key:"_solveCase3",value:function(e){var r=e.edge,t=this._case3And4Helper({edge:r},3);this.move(t,{upperCase:!0}),this._solveCase5({edge:r})}},{key:"_solveCase4",value:function(e){var r=e.edge,t=(0,s.getRotationFromTo)("down",r.getFaceOfColor("u"),(0,s.getFaceOfMove)(r.getColorOfFace("down")));this.move(t,{upperCase:!0});var o=l(r.getFaceOfColor("u"));this.move(o,{upperCase:!0}),this._solveCase5({edge:r})}},{key:"_solveCase5",value:function(e){var r=e.edge,t=this._case5And6Helper({edge:r},5);this.move(t,{upperCase:!0})}},{key:"_solveCase6",value:function(e){var r=e.edge,t=this._case5And6Helper({edge:r},6);this.move(t,{upperCase:!0})}},{key:"_case1And2Helper",value:function(e,r){var t=e.edge,o=1===r?"up":"down",n=t.faces().find(function(e){return e!==o}),i=(0,s.getFaceOfMove)(t.getColorOfFace(n)),a=(0,s.getRotationFromTo)(o,n,i);if(2===r){var u=(0,s.getMoveOfFace)(i);a+=" "+u+" "+u}return a}},{key:"_case3And4Helper",value:function(e,r){var t=e.edge,o=t.faces().find(function(e){return!["up","down"].includes(e)});return 4===r&&(o=l(o)),o}},{key:"_case5And6Helper",value:function(e,r){var t=e.edge,o=t.colors().find(function(e){return"u"!==e}),n=t.getFaceOfColor(o),i=(0,s.getFaceOfMove)(o),a=(0,s.getRotationFromTo)("up",n,i),u=(0,s.getMoveOfFace)(n);return 6===r&&(u=l(u)),l(a)+" "+u+" "+a}},{key:"_getPartitionBefore",value:function(e){return{edge:e.edge.clone()}}},{key:"_getPartitionAfter",value:function(e){return{edge:e.edge}}}]),r}(u.BaseSolver);r.CrossSolver=f},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.F2LBaseSolver=void 0;var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),u=t(2),c=t(1),s=t(0),l=function(e){return c.RubiksCube.reverseMoves(e)},f=function(e){function r(){var e;o(this,r);for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];var u=n(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i)));return u.phase="f2l",u}return i(r,e),a(r,[{key:"colorsMatch",value:function(e){var r=e.corner,t=e.edge,o=t.colors();return!(!r.colors().includes(o[0])||!r.colors().includes(o[1]))}},{key:"isPairSolved",value:function(e){var r=e.corner,t=e.edge;if(!this.isPairMatched({corner:r,edge:t}))return!1;if("up"!==r.getFaceOfColor("u"))return!1;var o=!0,n=!1,i=void 0;try{for(var a,u=t.colors()[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var c=a.value;if(t.getFaceOfColor(c)!==(0,s.getFaceOfMove)(c))return!1}}catch(e){n=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw i}}return!0}},{key:"isPairMatched",value:function(e){var r=e.corner,t=e.edge;if(!this.colorsMatch({corner:r,edge:t}))return!1;var o=!0,n=!1,i=void 0;try{for(var a,u=t.colors()[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var c=a.value;if(r.getFaceOfColor(c)!==t.getFaceOfColor(c))return!1}}catch(e){n=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw i}}return!0}},{key:"isPairSeparated",value:function(e){var r=e.corner,t=e.edge;if(!this.colorsMatch({corner:r,edge:t}))return!1;if(["up","down"].includes(r.getFaceOfColor("u")))return!1;if(!t.faces().includes("down"))return!1;var o=r.colors().find(function(e){return"u"!==e&&"down"!==r.getFaceOfColor(e)});return"down"===t.getFaceOfColor(o)&&"back"===(0,s.getDirectionFromFaces)(r.getFaceOfColor(o),t.getFaceOfColor(r.getColorOfFace("down")),{up:"up"})}},{key:"solveMatchedPair",value:function(e){var r=e.corner,t=e.edge;if(!this.isPairMatched({corner:r,edge:t}))throw new Error("Pair is not matched");var o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n="left"===(0,s.getDirectionFromFaces)(t.getFaceOfColor(o),r.getFaceOfColor("u"),{up:"down"}),i=(0,s.getFaceOfMove)(o),a=r.getFaceOfColor(o),u=(0,s.getFaceFromDirection)(i,n?"left":"right",{up:"down"}),c=(0,s.getRotationFromTo)("down",a,u),f=n?i:l(i),v=n?"DPrime":"D",m=[c,f,v,l(f)].join(" ");return this.move(m,{upperCase:!0}),m}},{key:"solveSeparatedPair",value:function(e){var r=e.corner,t=e.edge;if(!this.isPairSeparated({corner:r,edge:t}))throw new Error("Pair is not separated");var o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n="LEFT"===(0,s.getDirectionFromFaces)(r.getFaceOfColor("u"),t.getFaceOfColor(o),{up:"down"}).toUpperCase(),i=r.getFaceOfColor("u"),a=(0,s.getFaceOfMove)(o),u=(0,s.getRotationFromTo)("down",i,a),c=(0,s.getMoveOfFace)(a);c=n?l(c):c;var f=n?"DPrime":"D",v=[u,c,f,l(c)].join(" ");return this.move(v,{upperCase:!0}),v}},{key:"_getPartitionBefore",value:function(e){var r=e.corner,t=e.edge;return{corner:r.clone(),edge:t.clone()}}},{key:"_getPartitionAfter",value:function(e){return{corner:e.corner,edge:e.edge}}}]),r}(u.BaseSolver);r.F2LBaseSolver=f},function(e,r,t){"use strict";function o(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function a(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.F2LSolver=void 0;var u=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),c=t(1),s=t(12),l=t(35),f=t(36),v=t(37),m=t(0),h=function(e){return c.RubiksCube.reverseMoves(e)},p=function(e){function r(){var e;n(this,r);for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];var u=i(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o)));return u.subCaseOptions=Object.assign(u.options,{_overrideAfterEach:!0}),u}return a(r,e),u(r,[{key:"solve",value:function(){var e=this;return this.partitions=[],this.getAllPairs().forEach(function(r){var t=r.corner,o=r.edge,n=e._solve({corner:t,edge:o});e.partitions.push(n)}),this.partitions}},{key:"isSolved",value:function(){var e=this.getAllPairs(),r=!0,t=!1,o=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var a=n.value;if(!this.isPairSolved(a))return!1}}catch(e){t=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(t)throw o}}return!0}},{key:"getAllPairs",value:function(){var e=this.cube.corners().filter(function(e){return e.hasColor("u")}),r=this.cube.edges().filter(function(e){return!e.hasColor("u")&&!e.hasColor("d")}),t=[],o=!0,n=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(o=(a=u.next()).done);o=!0)!function(){var r=a.value,o=e.find(function(e){var t=r.colors();return e.hasColor(t[0])&&e.hasColor(t[1])});t.push({edge:r,corner:o})}()}catch(e){n=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw i}}return t}},{key:"_getCaseNumber",value:function(e){var r=e.corner,t=e.edge;if(r.faces().includes("down")){if(t.faces().includes("down"))return 1;if(!t.faces().includes("down")&&!t.faces().includes("up"))return 2}if(r.faces().includes("up")){if(t.faces().includes("down"))return 3;if(!t.faces().includes("down")&&!t.faces().includes("up"))return 4}throw new Error("Could not find a top level F2L case")}},{key:"_solveCase1",value:function(e){var r=e.corner,t=e.edge,o=new l.Case1Solver(this.cube,this.subCaseOptions),n=o.solve({corner:r,edge:t});this.totalMoves=n.moves,this.partition.caseNumber=[this.partition.caseNumber,n.caseNumber]}},{key:"_solveCase2",value:function(e){var r=e.corner,t=e.edge,o=new f.Case2Solver(this.cube,this.subCaseOptions),n=o.solve({corner:r,edge:t});this.totalMoves=n.moves,this.partition.caseNumber=[this.partition.caseNumber,n.caseNumber]}},{key:"_solveCase3",value:function(e){var r=e.corner,t=e.edge,o=new v.Case3Solver(this.cube,this.subCaseOptions),n=o.solve({corner:r,edge:t});this.totalMoves=n.moves,this.partition.caseNumber=[this.partition.caseNumber,n.caseNumber]}},{key:"_solveCase4",value:function(e){var r=e.corner,t=e.edge;if(!this.isPairSolved({corner:r,edge:t})){var n=void 0;n=r.faces().includes(t.faces()[0])&&r.faces().includes(t.faces()[1])?new l.Case1Solver(this.cube,this.subCaseOptions):new f.Case2Solver(this.cube,this.subCaseOptions);var i=r.faces().filter(function(e){return"up"!==e}),a=(0,m.getDirectionFromFaces)(i[0],i[1],{up:"down"}),u="right"===a?i[1]:i[0];this.move(u+" D "+h(u),{upperCase:!0});var c=n.solve({corner:r,edge:t});this.partition.caseNumber=[this.partition.caseNumber,c.caseNumber],this.totalMoves=[].concat(o(this.totalMoves),o(c.moves))}}}]),r}(s.F2LBaseSolver);r.F2LSolver=p},function(e,r,t){"use strict";function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function a(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.OLLSolver=void 0;var u=function(){function e(e,r){var t=[],o=!0,n=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),s=(t(1),t(2)),l=t(0),f="00000000",v=function(e){function r(){var e,t;n(this,r);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];var s=i(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(u)));return s.phase="oll",s.algorithms=(t={},o(t,f,""),o(t,"21000110","F R U RPrime UPrime FPrime"),o(t,"21211010","F R U RPrime UPrime FPrime F R U RPrime UPrime FPrime"),o(t,"10201020","R U2 RPrime UPrime R U RPrime UPrime R UPrime RPrime"),o(t,"01112000","F U R UPrime RPrime FPrime"),o(t,"11102120","F U R UPrime RPrime U R UPrime RPrime FPrime"),o(t,"11210000","RPrime UPrime FPrime U F R"),o(t,"11102021","FPrime LPrime UPrime L U LPrime UPrime L U F"),o(t,"10011110","R L2 BPrime L BPrime LPrime B2 L BPrime L RPrime"),o(t,"00202121","LPrime R2 B RPrime B R B2 RPrime B RPrime L"),o(t,"01111111","F U R UPrime RPrime FPrime L F U FPrime UPrime LPrime"),o(t,"21212101","F U R UPrime RPrime FPrime R B U BPrime UPrime RPrime"),o(t,"21211111","F R U RPrime UPrime FPrime B U L UPrime LPrime BPrime"),o(t,"20201010","R U2 R2 UPrime R2 UPrime R2 U2 R"),o(t,"01101110","R B RPrime L U LPrime UPrime R BPrime RPrime"),o(t,"21002120","LPrime BPrime L RPrime UPrime R U LPrime B L"),o(t,"21001100","RPrime F R U RPrime UPrime FPrime U R"),o(t,"01000100","R U RPrime UPrime MPrime U R UPrime rPrime"),o(t,"01010101","M U R U RPrime UPrime M2 U R UPrime rPrime"),o(t,"10211021","F R U RPrime UPrime R U RPrime UPrime FPrime B U L UPrime LPrime BPrime"),o(t,"11000120","R U RPrime UPrime RPrime F R FPrime"),o(t,"10000020","LPrime BPrime R B L BPrime RPrime B"),o(t,"20001000","B LPrime BPrime R B L BPrime RPrime"),o(t,"00112001","RPrime UPrime RPrime F R FPrime U R"),o(t,"21112111","R U2 RPrime RPrime F R FPrime U2 RPrime F R FPrime"),o(t,"10002101","R U2 RPrime RPrime F R FPrime R U2 RPrime"),o(t,"21110101","M U R U RPrime UPrime MPrime RPrime F R FPrime"),o(t,"11212010","F LPrime U2 L U2 L F2 LPrime F"),o(t,"01110020","R U RPrime U R UPrime RPrime UPrime RPrime F R FPrime"),o(t,"10012100","RPrime UPrime R UPrime RPrime U R U R BPrime RPrime B"),o(t,"10112021","RPrime UPrime R UPrime RPrime U FPrime U F R"),o(t,"01110121","F U R UPrime RPrime FPrime F U FPrime UPrime FPrime L F LPrime"),o(t,"01112101","F U R UPrime RPrime FPrime B U BPrime UPrime SPrime U B UPrime bPrime"),o(t,"21212000","lPrime U2 L U LPrime U l"),o(t,"01212020","r U RPrime U R U2 rPrime"),o(t,"00202020","R U RPrime U R U2 RPrime"),o(t,"10101000","RPrime UPrime R URprime RPrime U2 R"),o(t,"01001021","RPrime U R U2 RPrime UPrime FPrime U F U R"),o(t,"10200101","R UPrime RPrime U2 R U B UPrime BPrime UPrime RPrime"),o(t,"21102011","r U RPrime U R UPrime RPrime U R U2 rPrime"),o(t,"21112010","lPrime UPrime L UPrime LPrime U L UPrime LPrime U2 l"),o(t,"11100011","r U2 RPrime UPrime R UPrime rPrime"),o(t,"11012000","F R UPrime RPrime UPrime R U RPrime FPrime"),o(t,"11001011","lPrime UPrime L UPrime LPrime U2 l"),o(t,"01010000","r U RPrime UPrime M U R UPrime RPrime"),o(t,"01002110","R U RPrime UPrime BPrime RPrime F R FPrime B"),o(t,"01202120","L FPrime LPrime UPrime L F LPrime FPrime U F"),o(t,"11001110","RPrime F R U RPrime FPrime R F UPrime FPrime"),o(t,"10200000","R2 D RPrime U2 R DPrime RPrime U2 RPrime"),o(t,"20112011","RPrime U2 R2 U RPrime U R U2 BPrime RPrime B"),o(t,"10000121","R U BPrime UPrime RPrime U R B RPrime"),o(t,"11000021","RPrime UPrime F U R UPrime RPrime FPrime R"),o(t,"01100120","L FPrime LPrime UPrime L U F UPrime LPrime"),o(t,"11112020","RPrime F R2 FPrime U2 FPrime U2 F RPrime"),o(t,"20110100","BPrime RPrime B LPrime BPrime R R BPrime RPrime B2 L"),o(t,"20100101","B L BPrime R B L2 B L B2 RPrime"),o(t,"01101011","FPrime UPrime F L FPrime LPrime U L F LPrime"),o(t,"21012020","F U FPrime RPrime F R UPrime RPrime FPrime R"),t),s}return a(r,e),c(r,[{key:"isSolved",value:function(){return this.getOllString()===f}},{key:"solve",value:function(){return this._solve()}},{key:"_getCaseNumber",value:function(){return this.getOllString()}},{key:"_solveCase",value:function(e){var r=this.findPattern(e),t=this.getAlgorithm(r),o=this._getFrontFace(e,r);this.move(t,{orientation:{up:"down",front:o}})}},{key:"getOllString",value:function(){var e=this,r=[];return this._getOllCubies().forEach(function(t){var o=e._getCubieOrientation(t);r.push(o)}),r.join("")}},{key:"findPattern",value:function(e){void 0===e&&(e=this.getOllString());for(var r=0;r<4;r++){if("string"==typeof this.algorithms[e])return e;e=this._rotateOllStringLeft(e)}throw new Error('No pattern found for oll string "'+e+'"')}},{key:"getAlgorithm",value:function(e){if(void 0===e&&(e=this.getPattern(e)),void 0===this.algorithms[e])throw new Error('No algorithm found for pattern "'+e+'"');return this.algorithms[e]}},{key:"_getOllCubies",value:function(){var e=this;return[["front","down","right"],["front","down"],["front","down","left"],["left","down"],["left","down","back"],["back","down"],["back","down","right"],["right","down"]].map(function(r){return e.cube.getCubie(r)})}},{key:"_getCubieOrientation",value:function(e){if("d"===e.getColorOfFace("down"))return 0;if(e.isEdge())return 1;var r=e.faces().filter(function(e){return"down"!==e}),t=u(r,2),o=t[0],n=t[1],i=(0,l.getDirectionFromFaces)(o,n,{up:"down"}),a="right"===i?n:o;return"d"===e.getColorOfFace(a)?1:2}},{key:"_getFrontFace",value:function(e,r){for(var t=["front","left","back","right"],o=0;o<4;o++){if(e===r)return t[o];e=this._rotateOllStringLeft(e)}throw new Error('OLL string "'+e+'" does not resolve to the pattern "'+r+'"')}},{key:"_rotateOllStringLeft",value:function(e){return e.slice(2)+e.slice(0,2)}},{key:"_getPartitionBefore",value:function(){return this.getOllString()}},{key:"_getPartitionAfter",value:function(){return null}}]),r}(s.BaseSolver);r.OLLSolver=v},function(e,r,t){"use strict";function o(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.PLLSolver=void 0;var c=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),s=t(2),l=t(0),f="0 0 0 0 0 0 0 0",v=function(e){function r(){var e,t;i(this,r);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];var s=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(u)));return s.phase="pll",s.algorithms=(t={},n(t,f,""),n(t,"2 -1 1 -1 1 0 0 2","R2 F2 RPrime BPrime R F2 RPrime B RPrime"),n(t,"-1 1 -1 2 2 0 0 1","R BPrime R F2 RPrime B R F2 R2"),n(t,"1 -1 2 2 0 0 1 -1","R UPrime R U R U R UPrime RPrime UPrime R2"),n(t,"-1 1 -1 1 0 0 2 2","R2 U R U RPrime UPrime RPrime UPrime RPrime U RPrime"),n(t,"2 2 2 2 2 2 2 2","M M U M M U2 M M U M M"),n(t,"0 1 1 1 1 0 2 2","R U RPrime UPrime RPrime F R2 UPrime RPrime UPrime R U RPrime FPrime"),n(t,"1 0 2 0 1 0 0 0","R U2 RPrime UPrime R U2 LPrime U RPrime UPrime L"),n(t,"0 2 2 0 1 1 1 1","F R UPrime RPrime UPrime R U RPrime FPrime R U RPrime UPrime RPrime F R FPrime"),n(t,"1 -1 -1 2 -1 -1 1 0","RPrime U2 R U2 RPrime F R U RPrime UPrime RPrime FPrime R2"),n(t,"0 1 -1 -1 2 -1 -1 1","R UPrime RPrime UPrime R U R D RPrime UPrime R DPrime RPrime U2 RPrime"),n(t,"0 2 -1 -1 -1 -1 2 0","RPrime U RPrime UPrime BPrime D BPrime DPrime B2 RPrime BPrime R B R"),n(t,"2 -1 -1 -1 -1 2 0 0","RPrime UPrime FPrime R U RPrime UPrime RPrime F R2 UPrime RPrime UPrime R U RPrime U R"),n(t,"-1 2 2 2 -1 2 0 2","L U LPrime B2 uPrime B UPrime BPrime U BPrime u B2"),n(t,"2 -1 2 0 2 -1 2 2","RPrime UPrime R B2 u BPrime U B UPrime B uPrime B2"),n(t,"2 -1 1 1 0 1 1 -1","R2 uPrime R UPrime R U RPrime u R2 B UPrime BPrime"),n(t,"1 0 1 1 -1 2 -1 1","R2 u RPrime U RPrime UPrime R uPrime R2 FPrime U F"),n(t,"1 -1 -1 1 1 -1 -1 1","U RPrime UPrime R UPrime R U R UPrime RPrime U R U R2 UPrime RPrime"),n(t,"0 1 0 0 0 1 0 2","LPrime U2 L U LPrime U2 R UPrime L U RPrime"),n(t,"1 1 -1 -1 1 1 -1 -1","R BPrime RPrime F R B RPrime FPrime R B RPrime F R BPrime RPrime FPrime"),n(t,"2 0 2 0 2 0 2 0","R U RPrime U R U RPrime FPrime R U RPrime UPrime RPrime F R2 UPrime RPrime U2 R UPrime RPrime"),n(t,"0 2 0 2 0 2 0 2","RPrime U R UPrime RPrime FPrime UPrime F R U RPrime F RPrime FPrime R UPrime R"),t),s}return u(r,e),c(r,[{key:"solve",value:function(){return this._solve()}},{key:"_getCaseNumber",value:function(){return this.getPllString()}},{key:"_solveCase",value:function(e){var r=this.findPattern(e),t=this.getAlgorithm(r),o=this._getFrontFace(e,r);this.move(t,{orientation:{up:"down",front:o}});var n=this.cube.getCubie(["down","front"]),i=(0,l.getFaceOfMove)(n.getColorOfFace("front")),a=(0,l.getRotationFromTo)("down","front",i);this.move(a)}},{key:"isSolved",value:function(){return this.cube.isSolved()}},{key:"getPllString",value:function(){for(var e=[],r=this._getPllCubies(),t=["front","left","back","right"],o=0;o<r.length;o++){var n=r[o],i=r[o+1],a=t[~~(o/2)],u=n.getColorOfFace(a);i||(i=r[0]);var c=i.getColorOfFace(a),s=(0,l.getFaceOfMove)(u),f=(0,l.getFaceOfMove)(c),v=(0,l.getDirectionFromFaces)(s,f,{up:"down"});"front"===v&&(v=0),"right"===v&&(v=1),"left"===v&&(v=-1),"back"===v&&(v=2),e.push(v)}return e.join(" ")}},{key:"findPattern",value:function(e){var r=e;void 0===e&&(e=this.getPllString());for(var t=0;t<4;t++){if("string"==typeof this.algorithms[e])return e;e=this._rotatePllStringLeft(e)}throw new Error('No pattern found for pll string "'+r+'"')}},{key:"getAlgorithm",value:function(e){if(void 0===e&&(e=this.findPattern(e)),void 0===this.algorithms[e])throw new Error('No algorithm found for pattern "'+e+'"');return this.algorithms[e]}},{key:"_getPllCubies",value:function(){var e=this;return[["front","down","right"],["front","down"],["front","down","left"],["left","down"],["left","down","back"],["back","down"],["back","down","right"],["right","down"]].map(function(r){return e.cube.getCubie(r)})}},{key:"_getCubiePermutation",value:function(e){var r=e.faces().find(function(e){return"down"!==e}),t=(0,l.getFaceOfMove)(e.getColorOfFace(r)),o=(0,l.getRotationFromTo)("down",r,t);o=o.toLowerCase();return""===o?0:o.includes("prime")?1:o.split(" ").length>1?2:-1}},{key:"_rotatePllStringLeft",value:function(e){var r=e.split(" ").map(function(e){return parseInt(e)});return[].concat(o(r.slice(2)),o(r.slice(0,2))).join(" ")}},{key:"_getFrontFace",value:function(e,r){for(var t=["front","left","back","right"],o=0;o<4;o++){if(e===r)return t[o];e=this._rotatePllStringLeft(e)}throw new Error('OLL string "'+e+'" does not resolve to the pattern "'+r+'"')}}]),r}(s.BaseSolver);r.PLLSolver=v},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.algorithmShortener=r.PLLSolver=r.OLLSolver=r.F2LSolver=r.CrossSolver=r.RubiksCube=r.Cubie=r.Solver=void 0;var o=t(9);Object.defineProperty(r,"Cubie",{enumerable:!0,get:function(){return o.Cubie}});var n=t(1);Object.defineProperty(r,"RubiksCube",{enumerable:!0,get:function(){return n.RubiksCube}});var i=t(11);Object.defineProperty(r,"CrossSolver",{enumerable:!0,get:function(){return i.CrossSolver}});var a=t(13);Object.defineProperty(r,"F2LSolver",{enumerable:!0,get:function(){return a.F2LSolver}});var u=t(14);Object.defineProperty(r,"OLLSolver",{enumerable:!0,get:function(){return u.OLLSolver}});var c=t(15);Object.defineProperty(r,"PLLSolver",{enumerable:!0,get:function(){return c.PLLSolver}});var s=t(3);Object.defineProperty(r,"algorithmShortener",{enumerable:!0,get:function(){return s.algorithmShortener}});var l=t(33);r.Solver=l.Solver,r.default=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new l.Solver(e,r);return t.solve(),r.partitioned?t.getPartitions():(0,s.algorithmShortener)(t.getMoves())}},function(e,r,t){"use strict";(function(e){function r(){var e={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return e.colors.grey=e.colors.gray,Object.keys(e).forEach(function(r){var t=e[r];Object.keys(t).forEach(function(r){var o=t[r];e[r]=t[r]={open:"["+o[0]+"m",close:"["+o[1]+"m"}}),Object.defineProperty(e,r,{value:t,enumerable:!1})}),e}Object.defineProperty(e,"exports",{enumerable:!0,get:r})}).call(r,t(32)(e))},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e){u&&e&&e()}var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),a=void 0,u=void 0,c={cancel:function(){return!1},ignore:function(){return!1}},s=function(){function e(r,n){o(this,e),this.options=Object.assign({},c,n),this.options.DEBUG&&(a=t(20),u=n.DEBUG),this.input=r.slice(),this.output=[]}return i(e,[{key:"run",value:function(){var e=this;if(this.input.length<=1)return this.input;this.temp=[this.input.shift()];for(var r=void 0,t=void 0,o=void 0;this.temp.length>0;){n(function(){console.log(a.bold("========= START =========")),e._logInfo(),console.log()});var i=void 0,u=void 0;if(1===this.temp.length){for(i=0,u=this.input[i];i<this.input.length&&this.options.ignore(this.temp[0],u);)u=this.input[++i];i<this.input.length&&this.temp.push(u)}if(n(function(){return o=e.temp.slice()}),0===this.temp.length){n(function(){console.log(a.green("breaking")),console.log(a.bold("========= END =========")),console.log()});break}1!==this.temp.length?(this.options.compare(this.temp[0],this.temp[1])?function(){void 0!==i&&e.input.splice(i,1);var o=e.options.combine(e.temp[0],e.temp[1]);n(function(){r="Combining:",t=o}),e.temp=e.options.cancel(o)?[]:[o],e.populateTempBackward(),0===e.temp.length&&e.populateTempForward()}():(this.output.push(this.temp.shift()),void 0!==i&&(i>0?this.temp=this.input.splice(0,1):this.input.splice(i,1)),n(function(){return r="Skipping:"})),n(function(){console.log(a.green(r),o),console.log(a.green("value:"),t),console.log(),e._logInfo(),console.log(a.bold("========= END =========")),console.log(),r=null,t=null,o=null})):(this.output.push(this.temp.pop()),this.populateTempForward(),n(function(){console.log(a.green("continuing")),e._logInfo(),console.log(a.bold("========= END =========")),console.log()}))}return n(function(){console.log(a.bold.green("========= FINAL =========")),e._logInfo(),console.log(a.bold.green("========= FINAL =========")),console.log()}),this.output}},{key:"populateTempBackward",value:function(){this.output.length>0&&this.temp.unshift(this.output.pop())}},{key:"populateTempForward",value:function(){this.input.length>0&&this.temp.push(this.input.shift())}},{key:"_logInfo",value:function(){console.log(a.bold("output"),this.output),console.log(a.bold("temp"),this.temp),console.log(a.bold("input"),this.input)}}]),e}();e.exports=s},function(e,r,t){"use strict";function o(e,r){if(!e)throw new Error("Why are you even importing this.");if(!r.compare)throw new Error("options.compare callback must be present");if(!r.combine)throw new Error("options.combine callback must be present")}var n=t(18);e.exports=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(e,r),new n(e,r).run()}},function(e,r,t){"use strict";(function(r){function o(e){this.enabled=e&&void 0!==e.enabled?e.enabled:l}function n(e){var r=function e(){return i.apply(e,arguments)};return r._styles=e,r.enabled=this.enabled,r.__proto__=h,r}function i(){var e=arguments,r=e.length,t=0!==r&&String(arguments[0]);if(r>1)for(var o=1;o<r;o++)t+=" "+e[o];if(!this.enabled||!t)return t;var n=this._styles,i=n.length,a=u.dim.open;for(!v||-1===n.indexOf("gray")&&-1===n.indexOf("grey")||(u.dim.open="");i--;){var c=u[n[i]];t=c.open+t.replace(c.closeRe,c.open)+c.close}return u.dim.open=a,t}var a=t(21),u=t(17),c=t(30),s=t(29),l=t(31),f=Object.defineProperties,v="win32"===r.platform&&!/^xterm/i.test(r.env.TERM);v&&(u.blue.open="[94m");var m=function(){var e={};return Object.keys(u).forEach(function(r){u[r].closeRe=new RegExp(a(u[r].close),"g"),e[r]={get:function(){return n.call(this,this._styles.concat(r))}}}),e}(),h=f(function(){},m);f(o.prototype,function(){var e={};return Object.keys(m).forEach(function(r){e[r]={get:function(){return n.call(this,[r])}}}),e}()),e.exports=new o,e.exports.styles=u,e.exports.hasColor=s,e.exports.stripColor=c,e.exports.supportsColor=l}).call(r,t(8))},function(e,r,t){"use strict";var o=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(o,"\\$&")}},function(e,r,t){"use strict";function o(e,r){var t=n(e[0],e[1],e[2]),o=n(r[0],r[1],r[2]);i(t,t),i(o,o);var u=a(t,o);return u>1?0:Math.acos(u)}e.exports=o;var n=t(24),i=t(25),a=t(23)},function(e,r,t){"use strict";function o(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}e.exports=o},function(e,r,t){"use strict";function o(e,r,t){var o=new Float32Array(3);return o[0]=e,o[1]=r,o[2]=t,o}e.exports=o},function(e,r,t){"use strict";function o(e,r){var t=r[0],o=r[1],n=r[2],i=t*t+o*o+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i),e}e.exports=o},function(e,r,t){"use strict";function o(e,r,t,o){var n=t[1],i=t[2],a=r[1]-n,u=r[2]-i,c=Math.sin(o),s=Math.cos(o);return e[0]=r[0],e[1]=n+a*s-u*c,e[2]=i+a*c+u*s,e}e.exports=o},function(e,r,t){"use strict";function o(e,r,t,o){var n=t[0],i=t[2],a=r[0]-n,u=r[2]-i,c=Math.sin(o),s=Math.cos(o);return e[0]=n+u*c+a*s,e[1]=r[1],e[2]=i+u*s-a*c,e}e.exports=o},function(e,r,t){"use strict";function o(e,r,t,o){var n=t[0],i=t[1],a=r[0]-n,u=r[1]-i,c=Math.sin(o),s=Math.cos(o);return e[0]=n+a*s-u*c,e[1]=i+a*c+u*s,e[2]=r[2],e}e.exports=o},function(e,r,t){"use strict";var o=t(6),n=new RegExp(o().source);e.exports=n.test.bind(n)},function(e,r,t){"use strict";var o=t(6)();e.exports=function(e){return"string"==typeof e?e.replace(o,""):e}},function(e,r,t){"use strict";(function(r){var t=r.argv,o=t.indexOf("--"),n=function(e){e="--"+e;var r=t.indexOf(e);return-1!==r&&(-1===o||r<o)};e.exports=function(){return"FORCE_COLOR"in r.env||!(n("no-color")||n("no-colors")||n("color=false"))&&(!!(n("color")||n("colors")||n("color=true")||n("color=always"))||!(r.stdout&&!r.stdout.isTTY)&&("win32"===r.platform||("COLORTERM"in r.env||"dumb"!==r.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(r.env.TERM))))}()}).call(r,t(8))},function(e,r,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,r,t){"use strict";function o(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Solver=void 0;var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),a=t(1),u=t(11),c=t(13),s=t(14),l=t(15),f=t(0),v=t(3),m=function(){function e(r,t){var o=this;if(n(this,e),r instanceof a.RubiksCube)this.cube=r;else{if("string"!=typeof r)throw new Error('"cubeState" is not a valid cubeState. Please provide a list of scramble moves or a string representing a cube state');r.split(" ").length>1||r.length<=6?(this.cube=a.RubiksCube.Solved(),this.cube.move(r)):this.cube=new a.RubiksCube(r)}this.options=t,this.phases=["cross","f2l","oll","pll"],this.progress={},this.phases.forEach(function(e){return o.progress[e]=[]});var i=function(e,r){o._updateProgress(e,r)};this.currentPhase=null,this.currentSolver=null,this.crossSolver=new u.CrossSolver(this.cube,this.options),this.f2lSolver=new c.F2LSolver(this.cube,this.options),this.ollSolver=new s.OLLSolver(this.cube,this.options),this.pllSolver=new l.PLLSolver(this.cube,this.options),this.afterEach("all",i)}return i(e,[{key:"afterEach",value:function(e,r){if("function"==typeof e?(r=e,e="all"):"string"==typeof e&&(e="all"===e?this.phases.slice():[e]),"function"!=typeof r)throw new Error('"afterEach" callback is not a function.');var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;if(!this.phases.includes(u))throw new Error('Phase "'+u+'" isn\'t recognized. Please specify "cross", "f2l", "oll", "pll", or "all".')}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}var c=!0,s=!1,l=void 0;try{for(var f,v=e[Symbol.iterator]();!(c=(f=v.next()).done);c=!0){this[f.value+"Solver"].afterEach(r)}}catch(e){s=!0,l=e}finally{try{!c&&v.return&&v.return()}finally{if(s)throw l}}}},{key:"solve",value:function(){this.currentPhase="cross",this.currentSolver=this.crossSolver,this.crossSolver.solve(),this.currentPhase="f2l",this.currentSolver=this.f2lSolver,this.f2lSolver.solve(),this.currentPhase="oll",this.currentSolver=this.ollSolver,this.ollSolver.solve(),this.currentPhase="pll",this.currentSolver=this.pllSolver,this.pllSolver.solve()}},{key:"getMoves",value:function(){var e=this,r=[];return Object.keys(this.progress).forEach(function(t){e.progress[t].forEach(function(e){var t;return(t=r).push.apply(t,o(e.moves))})}),r=(0,f.normalizeNotations)(r),r.join(" ")}},{key:"getPartitions",value:function(){var e=this,r={};return Object.keys(this.progress).forEach(function(t){var o=e.progress[t];if(1===o.length)r[t]=(0,v.algorithmShortener)(o[0].moves);else{var n=[];e.progress[t].forEach(function(e){n.push((0,v.algorithmShortener)(e.moves))}),r[t]=n}}),r}},{key:"isCrossEdgeSolved",value:function(e){return this.crossSolver.isEdgeSolved(e)}},{key:"isF2LPairSolved",value:function(e){var r=e.corner,t=e.edge;return this.f2lSolver.isPairSolved({corner:r,edge:t})}},{key:"isOLLSolved",value:function(){return this.ollSolver.isSolved()}},{key:"isPLLSolved",value:function(){return this.pllSolver.isSolved()}},{key:"_updateProgress",value:function(e,r){this.progress[r].push(e)}}]),e}();r.Solver=m},function(e,r,t){"use strict";var o=t(16),n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(o),i=n.default;delete n.default,Object.assign(i,n),e.exports=i},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.Case1Solver=void 0;var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),u=t(1),c=t(5),s=t(0),l=function(e){return u.RubiksCube.reverseMoves(e)},f=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),a(r,[{key:"_getCaseNumber",value:function(e){var r=e.corner,t=e.edge;if(this.isPairMatched({corner:r,edge:t}))return 1;if(this.isPairSeparated({corner:r,edge:t}))return 2;var o=void 0;t.faces().forEach(function(e){r.faces().includes(e)&&"down"!==e&&(o=e)});var n=r.colors().find(function(e){return"u"!==e&&e!==r.getColorOfFace("down")}),i=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)});return"down"===r.getFaceOfColor("u")?o?r.getColorOfFace(o)===t.getColorOfFace(o)?3:4:5:n===i?o?6:7:o?o===r.getFaceOfColor("u")?8:9:10}},{key:"_solveCase1",value:function(e){var r=e.corner,t=e.edge;return this.solveMatchedPair({corner:r,edge:t})}},{key:"_solveCase2",value:function(e){var r=e.corner,t=e.edge;return this.solveSeparatedPair({corner:r,edge:t})}},{key:"_solveCase3",value:function(e){var r=e.corner,t=e.edge,o=t.faces().find(function(e){return"down"!==e}),n=(0,s.getFaceOfMove)(t.getColorOfFace("down")),i=(0,s.getFaceFromDirection)(n,"back",{up:"down"}),a=r.getFaceOfColor(t.getColorOfFace("down")),u="left"===(0,s.getFaceFromDirection)(o,a,{up:"down"}),c=(0,s.getRotationFromTo)("down",o,i),f=(0,s.getFaceOfMove)(t.getColorOfFace(o)),v=u?"D":"DPrime";f=u?f:l(f);var m=c+" "+f+" "+f+" D D ";m+=f+" "+v+" "+l(f)+" "+v+" "+f+" "+f,this.move(m,{upperCase:!0})}},{key:"_solveCase4",value:function(e){var r=e.corner,t=e.edge,o=t.faces().find(function(e){return"down"!==e}),n=(0,s.getFaceOfMove)(t.getColorOfFace(o)),i=r.faces().find(function(e){return!t.faces().includes(e)}),a="left"===(0,s.getFaceFromDirection)(i,o,{up:"down"}),u=(0,s.getRotationFromTo)("down",o,n),c=(0,s.getMoveOfFace)(n);c=a?l(c):c,this.move(u+" "+c+" D D "+l(c),{upperCase:!0}),this.solveSeparatedPair({corner:r,edge:t})}},{key:"_solveCase5",value:function(e){var r=e.corner,t=e.edge,o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n=t.colors().find(function(e){return"down"===t.getFaceOfColor(e)}),i="right"===(0,s.getFaceFromDirection)((0,s.getFaceOfMove)(o),(0,s.getFaceOfMove)(n),{up:"down"}),a=t.getFaceOfColor(o),u=(0,s.getFaceOfMove)(o),c=(0,s.getRotationFromTo)("down",a,u);this.move(c,{upperCase:!0});var f=r.getFaceOfColor(o),v=u,m=(0,s.getRotationFromTo)("down",f,v),h=i?l(u):u;this.move(h+" "+m+" "+l(h),{upperCase:!0}),this.solveMatchedPair({corner:r,edge:t})}},{key:"_solveCase6",value:function(e){var r=e.corner,t=e.edge,o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n=t.getFaceOfColor(o),i=(0,s.getFaceOfMove)(t.getColorOfFace("down")),a="left"===(0,s.getDirectionFromFaces)(n,r.getFaceOfColor(o),{up:"down"}),u=(0,s.getRotationFromTo)("down",n,i),c=a?i:l(i),f=a?"DPrime":"D";this.move(u+" "+c+" "+f+" "+l(c),{upperCase:!0}),this.solveSeparatedPair({corner:r,edge:t})}},{key:"_solveCase7",value:function(e){var r=e.corner,t=e.edge,o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n=r.getFaceOfColor("u"),i=(0,s.getFaceOfMove)(o),a="left"===(0,s.getDirectionFromFaces)(r.getFaceOfColor(o),r.getFaceOfColor("u"),{up:"down"}),u=(0,s.getRotationFromTo)("down",n,i);this.move(u,{upperCase:!0});var c=t.getFaceOfColor(o),f=r.getFaceOfColor(o),v=a?r.getFaceOfColor("u"):l(r.getFaceOfColor("u")),m=(0,s.getRotationFromTo)("down",c,f);this.move(v+" "+m+" "+l(v),{upperCase:!0}),this.solveMatchedPair({corner:r,edge:t})}},{key:"_solveCase8",value:function(e){var r=e.corner,t=e.edge,o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n=t.colors().find(function(e){return"down"===t.getFaceOfColor(e)}),i=r.getFaceOfColor(n),a=(0,s.getFaceOfMove)(o),u="left"===(0,s.getDirectionFromFaces)(i,r.getFaceOfColor("u"),{up:"down"}),c=(0,s.getRotationFromTo)("down",i,a),f=u?l(a):a,v=u?"D":"DPrime";this.move(c+" "+f+" "+v+" "+l(f),{upperCase:!0}),this.solveSeparatedPair({corner:r,edge:t})}},{key:"_solveCase9",value:function(e){var r=e.corner,t=e.edge,o=t.colors().find(function(e){return"down"===t.getFaceOfColor(e)}),n=r.getFaceOfColor("u"),i=(0,s.getFaceOfMove)(o),a="left"===(0,s.getDirectionFromFaces)(r.getFaceOfColor(o),n,{up:"down"}),u=(0,s.getRotationFromTo)("down",n,i),c=a?i:l(i);this.move(u+" "+c+" D D "+l(c),{upperCase:!0}),this.solveSeparatedPair({corner:r,edge:t})}},{key:"_solveCase10",value:function(e){var r=e.corner,t=e.edge,o=t.colors().find(function(e){return"down"!==t.getFaceOfColor(e)}),n=t.colors().find(function(e){return"down"===t.getFaceOfColor(e)}),i=r.getFaceOfColor("u"),a=(0,s.getFaceOfMove)(n),u="left"===(0,s.getDirectionFromFaces)(r.getFaceOfColor(n),r.getFaceOfColor("u"),{up:"down"}),c=(0,s.getRotationFromTo)("down",i,a);this.move(c,{upperCase:!0});var f=t.getFaceOfColor(o),v=(0,s.getFaceOfMove)(o),m=u?a:l(a),h=(0,s.getRotationFromTo)("down",f,v);this.move(m+" "+h+" "+l(m),{upperCase:!0}),this.solveSeparatedPair({corner:r,edge:t})}}]),r}(c.F2LCaseBaseSolver);r.Case1Solver=f},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.Case2Solver=void 0;var a=function(){function e(e,r){var t=[],o=!0,n=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),c=t(1),s=t(5),l=t(0),f=function(e){return c.RubiksCube.reverseMoves(e)},v=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),u(r,[{key:"_getCaseNumber",value:function(e){var r=e.corner,t=e.edge,o=r.faces().filter(function(e){return"down"!==e}),n=t.faces(),i=(0,l.getDirectionFromFaces)(o[0],o[1],{up:"down"}),a=(0,l.getDirectionFromFaces)(n[0],n[1],{up:"down"}),u="right"===i?o[1]:o[0],c="right"===a?n[1]:n[0];if("down"===r.getFaceOfColor("u"))return r.getColorOfFace(u)===t.getColorOfFace(c)?1:2;var s=r.colors().find(function(e){return"u"!==e&&e!==r.getColorOfFace("down")});return s===("left"===(0,l.getDirectionFromFaces)(r.getFaceOfColor(s),r.getFaceOfColor("u"),{up:"down"})?t.getColorOfFace(c):t.colors().find(function(e){return t.getFaceOfColor(e)!==c}))?3:4}},{key:"_solveCase1",value:function(e){var r=e.corner,t=e.edge,o=t.colors()[0],n=r.getFaceOfColor(o),i=t.getFaceOfColor(o),u=(0,l.getRotationFromTo)("down",n,i);this.move(u,{upperCase:!0});var c=t.faces(),s=a(c,2),v=s[0],m=s[1],h=(0,l.getDirectionFromFaces)(v,m,{up:"down"}),p="right"===h?m:v;this.move(p+" DPrime "+f(p),{upperCase:!0}),this.solveMatchedPair({corner:r,edge:t})}},{key:"_solveCase2",value:function(e){var r=e.corner,t=e.edge,o=r.getFaceOfColor(t.colors()[0]),n=t.getFaceOfColor(t.colors()[1]),i=(0,l.getRotationFromTo)("down",o,n);this.move(i,{upperCase:!0});var a=(0,l.getDirectionFromFaces)(t.faces()[0],t.faces()[1],{up:"down"}),u=t.faces()["right"===a?1:0];this.move(u+" D "+f(u)+" DPrime",{upperCase:!0}),this.move(u+" D "+f(u),{upperCase:!0}),this.solveSeparatedPair({corner:r,edge:t})}},{key:"_solveCase3",value:function(e){var r=e.corner,t=e.edge;this._case3And4Helper({corner:r,edge:t},3)}},{key:"_solveCase4",value:function(e){var r=e.corner,t=e.edge;this._case3And4Helper({corner:r,edge:t},4)}},{key:"_case3And4Helper",value:function(e,r){var t=e.corner,o=e.edge,n=t.getColorOfFace("down"),i=t.colors().find(function(e){return![n,"u"].includes(e)}),a=3===r?i:n,u="left"===(0,l.getDirectionFromFaces)(t.getFaceOfColor(i),t.getFaceOfColor("u"),{up:"down"}),c=t.getFaceOfColor("u"),s=o.getFaceOfColor(a),v=(0,l.getRotationFromTo)("down",c,s),m=u?s:f(s),h=u?"DPrime":"D";h=4===r?f(h):h,this.move(v+" "+m+" "+h+" "+f(m),{upperCase:!0}),this["solve"+(3===r?"Matched":"Separated")+"Pair"]({corner:t,edge:o})}}]),r}(s.F2LCaseBaseSolver);r.Case2Solver=v},function(e,r,t){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0}),r.Case3Solver=void 0;var a=function(){function e(e,r){var t=[],o=!0,n=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),c=t(1),s=t(5),l=t(0),f=function(e){return c.RubiksCube.reverseMoves(e)},v=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),u(r,[{key:"_getCaseNumber",value:function(e){var r=e.corner;e.edge;return"u"===r.getColorOfFace("up")?1:2}},{key:"_solveCase1",value:function(e){var r=e.corner,t=e.edge,o=r.faces().filter(function(e){return"up"!==e}),n=(0,l.getDirectionFromFaces)(o[0],o[1],{up:"down"}),i="right"===n?o:o.reverse(),u=a(i,2),c=u[0],s=u[1],v=t.faces().find(function(e){return"down"!==e}),m=t.getColorOfFace(v),h=(0,l.getFaceFromDirection)(r.getFaceOfColor(m),m===r.getColorOfFace(s)?"right":"left",{up:"down"}),p=m===r.getColorOfFace(c),g=(0,l.getRotationFromTo)("down",v,h),d=p?s:f(c),y=p?"DPrime":"D";this.move(g+" "+d+" "+y+" "+f(d),{upperCase:!0}),this.solveMatchedPair({corner:r,edge:t})}},{key:"_solveCase2",value:function(e){var r=e.corner,t=e.edge,o=r.colors().find(function(e){return"u"!==e&&"up"!==r.getFaceOfColor(e)}),n=t.faces().find(function(e){return"down"!==e}),i=t.getColorOfFace(n),a=o!==i,u=r.getFaceOfColor(a?o:"u"),c=(0,l.getRotationFromTo)("down",n,u),s="left"===(0,l.getDirectionFromFaces)(r.getFaceOfColor(o),r.getFaceOfColor("u"),{up:"down"}),v=s?"DPrime":"D",m=r.getFaceOfColor("u");m=s?f(m):m,this.move(c+" "+m+" "+v+" "+f(m),{upperCase:!0}),this["solve"+(a?"Matched":"Separated")+"Pair"]({corner:r,edge:t})}}]),r}(s.F2LCaseBaseSolver);r.Case3Solver=v}])});
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIm15c2NyaXB0cy5qcyIsIm5vZGVfbW9kdWxlcy9ydWJpa3MtY3ViZS1zb2x2ZXIvbGliL2luZGV4LmNvbW1vbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6ZEEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyAtLS1Qcm9qZWN0IERyb3Bkb3duIE1lbnUtLS0gLy9cclxudmFyIERyb3Bkb3duQ29sbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIlByb2pjZXQtRHJvcERvd25CdXR0b25cIilcclxuZm9yIChsZXQgaSA9IDA7IGkgPCBEcm9wZG93bkNvbGxlY3Rvci5sZW5ndGg7IGkrKyl7XHJcbiAgICBEcm9wZG93bkNvbGxlY3RvcltpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiUHJvamVjdC1BY3RpdmVEcm9wRG93bkJ1dHRvblwiKVxyXG4gICAgICAgIHZhciBwYW5lbCA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgIHZhciBpbWFnZSA9IHRoaXMuY2hpbGROb2Rlc1s1XS5jaGlsZE5vZGVzWzNdLmNoaWxkTm9kZXNbMV1cclxuICAgICAgICBpZiAocGFuZWwuc3R5bGUubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHBhbmVsLnN0eWxlLm1heEhlaWdodCA9IG51bGw7XHJcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IFwiaW1hZ2VzL3BpY3R1cmVzL2Ryb3Bkb3duL0RkcERvd25PcmFuZ2UucG5nXCJcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBwYW5lbC5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IFwiaW1hZ2VzL3BpY3R1cmVzL2Ryb3Bkb3duL0RkcFVwTGlnaHQucG5nXCJcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyAtLS1TdGlja3kgTmF2QmFyLS0tIC8vXHJcbi8vIEdldCB0aGUgbmF2YmFyXHJcbnZhciBOYXZCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIk5hdkJhci1TZWN0aW9uXCIpO1xyXG5cclxuLy8gdGhlcmUgc2hvdWxkIG9ubHkgYmUgMSBtYWluIHNlY3Rpb25cclxudmFyIE1haW5TZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIk1haW4tU2VjdGlvblwiKVswXTtcclxuXHJcblxyXG5cclxuLy8gR2V0IHRoZSBvZmZzZXQgcG9zaXRpb24gb2YgdGhlIG5hdmJhclxyXG52YXIgUG9zU3RpY2t5U3RhcnQgPSBOYXZCYXIub2Zmc2V0VG9wO1xyXG5cclxuLy8gQWRkIHRoZSBzdGlja3kgY2xhc3MgdG8gdGhlIG5hdmJhciB3aGVuIHlvdSByZWFjaCBpdHMgc2Nyb2xsIHBvc2l0aW9uLiBSZW1vdmUgXCJzdGlja3lcIiB3aGVuIHlvdSBsZWF2ZSB0aGUgc2Nyb2xsIHBvc2l0aW9uXHJcbmZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7XHJcbiAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID49IFBvc1N0aWNreVN0YXJ0KSB7XHJcbiAgICBOYXZCYXIuY2xhc3NMaXN0LmFkZChcIk5hdkJhci1TdGlja3lOYXZCYXJcIik7XHJcbiAgICBNYWluU2VjdGlvbi5zdHlsZS5tYXJnaW5Ub3AgPSBcInZhcigtLU5hdkJhckhlaWdodClcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICBOYXZCYXIuY2xhc3NMaXN0LnJlbW92ZShcIk5hdkJhci1TdGlja3lOYXZCYXJcIik7XHJcbiAgICBNYWluU2VjdGlvbi5zdHlsZS5tYXJnaW5Ub3AgPSBcIjBjbVwiO1xyXG4gICAgfVxyXG59XHJcbiAgXHJcbi8vIFdoZW4gdGhlIHVzZXIgc2Nyb2xscyB0aGUgcGFnZSwgZXhlY3V0ZSBteUZ1bmN0aW9uXHJcbndpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uKCkge215RnVuY3Rpb24oKX07XHJcblxyXG5cclxuXHJcbi8vIC8vIEdldCB0aGUgbmF2YmFyXHJcbi8vIHZhciBOYXZCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiTmF2QmFyLVNlY3Rpb25cIik7XHJcblxyXG4vLyAvLyBHZXQgdGhlIG9mZnNldCBwb3NpdGlvbiBvZiB0aGUgbmF2YmFyXHJcbi8vIHZhciBQb3NTdGlja3lTdGFydCA9IE5hdkJhci5vZmZzZXRUb3A7XHJcblxyXG4vLyBBZGQgdGhlIHN0aWNreSBjbGFzcyB0byB0aGUgbmF2YmFyIHdoZW4geW91IHJlYWNoIGl0cyBzY3JvbGwgcG9zaXRpb24uIFJlbW92ZSBcInN0aWNreVwiIHdoZW4geW91IGxlYXZlIHRoZSBzY3JvbGwgcG9zaXRpb25cclxuZnVuY3Rpb24gbXlGdW5jdGlvbigpIHtcclxuICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID49IFBvc1N0aWNreVN0YXJ0KSB7XHJcbiAgICBOYXZCYXIuY2xhc3NMaXN0LmFkZChcIk5hdkJhci1TdGlja3lOYXZCYXJcIik7XHJcbiAgICBNYWluU2VjdGlvbi5zdHlsZS5tYXJnaW5Ub3AgPSBcInZhcigtLU5hdkJhckhlaWdodClcIjtcclxuICB9IGVsc2Uge1xyXG4gICAgTmF2QmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJOYXZCYXItU3RpY2t5TmF2QmFyXCIpO1xyXG4gICAgTWFpblNlY3Rpb24uc3R5bGUubWFyZ2luVG9wID0gXCIwY21cIjtcclxuICB9XHJcbn1cclxuLy8gV2hlbiB0aGUgdXNlciBzY3JvbGxzIHRoZSBwYWdlLCBleGVjdXRlIG15RnVuY3Rpb25cclxud2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7bXlGdW5jdGlvbigpfTtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLyogLy8gU2xpZGVzXHJcbnZhciBzbGlkZUluZGV4ID0gMTsgXHJcbnNob3dTbGlkZXMoc2xpZGVJbmRleCk7XHJcblxyXG5mdW5jdGlvbiBwbHVzU2xpZGVzKG4pIHtcclxuICBzaG93U2xpZGVzKHNsaWRlSW5kZXggKz0gbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dTbGlkZXMobikge1xyXG4gIHZhciBpO1xyXG4gIHZhciBzbGlkZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiU2xpZGVTaG93LUZhZGluZ1RpdGxlc1wiKVxyXG5cclxuICBpZiAobiA+IHNsaWRlcy5sZW5ndGgpICB7c2xpZGVJbmRleD0xfVxyXG4gIGVsc2UgaWYgKG4gPCAxKSB7c2xpZGVJbmRleD1zbGlkZXMubGVuZ3RofVxyXG5cclxuICBmb3IgKGxldCBpPTA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgaWYgKGkgPT0gc2xpZGVJbmRleC0xKXtcclxuICAgICAgc2xpZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBzbGlkZXNbaV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5zZXRJbnRlcnZhbChmdW5jdGlvbigpe3Nob3dTbGlkZXMoc2xpZGVJbmRleCs9MSl9LDUwMDApO1xyXG5cclxuKi9cclxuLy8gUnVibGljcyBDdWJlXHJcblxyXG52YXIgdGVtcGlucHV0ID0gW1tbMCw1LDBdLFswLDUsMF0sWzAsNSwwXV0sW1swLDMsMF0sWzAsMywwXSxbMCwzLDBdXSxbWzAsMiwwXSxbMCwyLDBdLFswLDIsMF1dLFtbMCwxLDBdLFswLDEsMF0sWzAsMSwwXV0sW1swLDAsMF0sWzAsMCwwXSxbMCwwLDBdXSxbWzAsNCwwXSxbMCw0LDBdLFswLDQsMF1dXVxyXG52YXIgb3V0ZmxhZyA9IGZhbHNlXHJcbnZhciBHSUNvbGxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJHcmlkLUl0ZW1cIik7XHJcbnZhciBzb2x2ZXJidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlNvbHZlci1CdXR0b24tV3JhcHBlclwiKTtcclxuXHJcbi8qc29sdmVyYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3Qgc29sdmVyID0gcmVxdWlyZSgncnViaWtzLWN1YmUtc29sdmVyJyk7XHJcbiAgY29uc29sZS5sb2codGVtcGlucHV0KTtcclxuICBsZXQgY3ViZVN0YXRlID0gdGVtcGlucHV0LmpvaW4oJycpLnNwbGl0KFwiLFwiKS5qb2luKFwiXCIpO1xyXG4gIGN1YmVTdGF0ZSA9IGN1YmVTdGF0ZS5yZXBsYWNlKC8wL2csJ2wnKS5yZXBsYWNlKC8xL2csJ2QnKS5yZXBsYWNlKC8yL2csJ3UnKS5yZXBsYWNlKC8zL2csJ3InKS5yZXBsYWNlKC80L2csJ2InKS5yZXBsYWNlKC81L2csJ2YnKTtcclxuICBjb25zb2xlLmxvZyhjdWJlU3RhdGUpO1xyXG4gIGN1YmVTdGF0ZSA9IFtcclxuICAgICdmbHVsZmJkZHInLCAvLyBmcm9udFxyXG4gICAgJ3J1ZHJydWRkbCcsIC8vIHJpZ2h0XHJcbiAgICAnZGJiYnVycmZiJywgLy8gdXBcclxuICAgICdsbGZmZHJ1YmYnLCAvLyBkb3duXHJcbiAgICAncmx1ZGx1YnJmJywgLy8gbGVmdFxyXG4gICAgJ2x1YmZiZnVkbCcgLy8gYmFja1xyXG4gIF0uam9pbignJyk7XHJcbiAgbGV0IHNvbHZlTW92ZXMgPSBzb2x2ZXIoY3ViZVN0YXRlKS5yZXBsYWNlKC9wcmltZS9nLCAnLScpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc29sdmVNb3Zlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKHNvbHZlTW92ZXNbaV0gPT0gJzInKSB7XHJcbiAgICAgIHNvbHZlTW92ZXMgPSBzb2x2ZU1vdmVzLnN1YnN0cmluZygwLCBpKSArIFwiIFwiICsgc29sdmVNb3Zlc1tpLTFdICsgc29sdmVNb3Zlcy5zdWJzdHJpbmcoaSsxKTtcclxuICAgIH1cclxuICB9XHJcbiAgbGV0IHNvbHZlTW92ZXNBcnJheSA9IHNvbHZlTW92ZXMuc3BsaXQoJyAnKVxyXG5cclxuICBjb25zb2xlLmxvZyhzb2x2ZU1vdmVzKTtcclxuICBjb25zb2xlLmxvZyhzb2x2ZU1vdmVzQXJyYXkpO1xyXG4gIFxyXG59Ki9cclxuXHJcblxyXG5zb2x2ZXJidXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCBHSUNvbGxlY3Rvci5sZW5ndGg7IGkrKyl7IFxyXG4gIEdJQ29sbGVjdG9yW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4gICAgICBsZXQgb3V0ID0gY2hhbmdlKGkpXHJcbiAgICAgIGNoYW5nZWlucHV0KG91dFswXSxvdXRbMV0sb3V0WzJdLDEpXHJcbiAgICAgIGN1cnJjb2wgPSB0ZW1waW5wdXRbb3V0WzBdXVtvdXRbMV1dW291dFsyXV1cclxuXHJcbiAgICAgIC8vciwgbywgYiwgZywgdywgeVxyXG4gICAgICBpZiAoY3VycmNvbD09Nil7XHJcbiAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZXlcIlxyXG4gICAgICB9IGVsc2UgaWYgKGN1cnJjb2w9PTApIHtcclxuICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCJcclxuICAgICAgfSBlbHNlIGlmIChjdXJyY29sPT0xKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImJsdWVcIlxyXG4gICAgICB9IGVsc2UgaWYgKGN1cnJjb2w9PTIpIHtcclxuICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIlxyXG4gICAgICB9IGVsc2UgaWYgKGN1cnJjb2w9PTMpIHtcclxuICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwib3JhbmdlXCJcclxuICAgICAgfSBlbHNlIGlmIChjdXJyY29sPT00KSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiXHJcbiAgICAgIH0gZWxzZSBpZiAoY3VycmNvbD09NSkge1xyXG4gICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1MaWdodE9mZldoaXRlKVwiXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNoZWNraW5wdXQoKVxyXG4gICAgICBpZiAob3V0ZmxhZyA9PSB0cnVlKXtcclxuICAgICAgICBzb2x2ZXJidXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNvbHZlcmJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgICAgfVxyXG5cclxuICAgICAgLy9zb2x2ZXJidXR0b24ub25jbGljayA9IHNvbHZlX2N1YmUoKTtcclxuICAgICAgIFxyXG4gICAgICAvLyBlbHNlIGlmKHRlbXBpbnB1dFtvdXRbMF1dW291dFsxXV1bb3V0WzJdXT09NilcclxuICAgICAgLy8ge1xyXG5cclxuICAgICAgLy8gfVxyXG4gICAgICBcclxuICAgICAgLy8gdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3JcclxuICAgICAgLy8gdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiUHJvamVjdC1BY3RpdmVEcm9wRG93bkJ1dHRvblwiKVxyXG4gICAgICAvLyB2YXIgcGFuZWwgPSB0aGlzLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgLy8gdmFyIGltYWdlID0gdGhpcy5jaGlsZE5vZGVzWzVdLmNoaWxkTm9kZXNbM10uY2hpbGROb2Rlc1sxXVxyXG4gICAgICAvLyBpZiAocGFuZWwuc3R5bGUubWF4SGVpZ2h0KSB7XHJcbiAgICAgIC8vICAgICBwYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xyXG4gICAgICAvLyAgICAgaW1hZ2Uuc3JjID0gXCJpbWFnZXMvcGljdHVyZXMvZHJvcGRvd24vRGRwRG93bk9yYW5nZS5wbmdcIlxyXG4gICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAvLyAgICAgcGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gcGFuZWwuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAvLyAgICAgaW1hZ2Uuc3JjID0gXCJpbWFnZXMvcGljdHVyZXMvZHJvcGRvd24vRGRwVXBMaWdodC5wbmdcIlxyXG4gICAgICAvLyB9XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlKG4pe1xyXG4gIGZhY2UgPSBNYXRoLmZsb29yKG4vOSlcclxuICBibG9ja251bSA9IG4lOVxyXG4gIHggPSBNYXRoLmZsb29yKGJsb2NrbnVtLzMpXHJcbiAgeSA9IGJsb2NrbnVtJTNcclxuICByZXR1cm4gW2ZhY2UsIHgsIHldXHJcbn0gXHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VpbnB1dChmYWNlLCB4LCB5LCBjb2xjaGFuZ2Upe1xyXG4gIGlmICghKHg9PTEgJiYgeT09MSkpe1xyXG4gICAgbGV0IGNvbG9yID0gdGVtcGlucHV0W2ZhY2VdW3hdW3ldXHJcbiAgICBpZiAoY29sb3IgPT0gNil7XHJcbiAgICAgIHRlbXBpbnB1dFtmYWNlXVt4XVt5XSA9IDBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRlbXBpbnB1dFtmYWNlXVt4XVt5XSA9ICh0ZW1waW5wdXRbZmFjZV1beF1beV0rY29sY2hhbmdlKSU2XHJcbiAgICB9IFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tpbnB1dCgpXHJcbntcclxuICBmb3IgKGxldCBqID0gMDsgaiA8IEdJQ29sbGVjdG9yLmxlbmd0aDsgaisrKSB7XHJcbiAgICBvdXQgPSBjaGFuZ2UoailcclxuICAgIHZhbCA9IDBcclxuICAgIGlmICh0ZW1waW5wdXRbb3V0WzBdXVtvdXRbMV1dW291dFsyXV09PTYpIHtcclxuICAgICAgdmFsICs9MVxyXG4gICAgfVxyXG4gICAgaWYgKHZhbCAhPSAwKXtcclxuICAgICAgb3V0ZmxhZyA9IGZhbHNlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvdXRmbGFnID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gTkVXV1dXV1dXV1dXV1dXV1dXV1dXV1dXIE1vZGFsXHJcbi8vIGdldCBtb2RhbFxyXG52YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIk1vZGFsXCIpO1xyXG5cclxuLy92YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTb2x2ZXItQnV0dG9uLVdyYXBwZXJcIik7XHJcblxyXG52YXIgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcclxudmFyIHNvbHZlTW92ZXNBcnJheSA9IFtdO1xyXG5zb2x2ZXJidXR0b24ub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICBjb25zdCBzb2x2ZXIgPSByZXF1aXJlKCdydWJpa3MtY3ViZS1zb2x2ZXInKTtcclxuICBjb25zb2xlLmxvZyh0ZW1waW5wdXQpO1xyXG4gIGxldCBjdWJlU3RhdGUgPSB0ZW1waW5wdXQuam9pbignJykuc3BsaXQoXCIsXCIpLmpvaW4oXCJcIik7XHJcbiAgY3ViZVN0YXRlID0gY3ViZVN0YXRlLnJlcGxhY2UoLzAvZywnbCcpLnJlcGxhY2UoLzEvZywnZCcpLnJlcGxhY2UoLzIvZywndScpLnJlcGxhY2UoLzMvZywncicpLnJlcGxhY2UoLzQvZywnYicpLnJlcGxhY2UoLzUvZywnZicpO1xyXG4gIGNvbnNvbGUubG9nKGN1YmVTdGF0ZSk7XHJcbiAgLypjdWJlU3RhdGUgPSBbXHJcbiAgICAnZmx1bGZiZGRyJywgLy8gZnJvbnRcclxuICAgICdydWRycnVkZGwnLCAvLyByaWdodFxyXG4gICAgJ2RiYmJ1cnJmYicsIC8vIHVwXHJcbiAgICAnbGxmZmRydWJmJywgLy8gZG93blxyXG4gICAgJ3JsdWRsdWJyZicsIC8vIGxlZnRcclxuICAgICdsdWJmYmZ1ZGwnIC8vIGJhY2tcclxuICBdLmpvaW4oJycpOyovXHJcbiAgY3ViZVN0YXRlID0gXCJmZmRmZmRmZmRycnJycnJycnJ1dWZ1dWZ1dWZkZGJkZGJkZGJsbGxsbGxsbGx1YmJ1YmJ1YmJcIjtcclxuICBcclxuICBsZXQgc29sdmVNb3ZlcyA9IHNvbHZlcihjdWJlU3RhdGUpLnJlcGxhY2UoL3ByaW1lL2csICctJyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb2x2ZU1vdmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoc29sdmVNb3Zlc1tpXSA9PSAnMicpIHtcclxuICAgICAgc29sdmVNb3ZlcyA9IHNvbHZlTW92ZXMuc3Vic3RyaW5nKDAsIGkpICsgXCIgXCIgKyBzb2x2ZU1vdmVzW2ktMV0gKyBzb2x2ZU1vdmVzLnN1YnN0cmluZyhpKzEpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzb2x2ZU1vdmVzQXJyYXkgPSBzb2x2ZU1vdmVzLnNwbGl0KCcgJylcclxuXHJcbiAgY29uc29sZS5sb2coc29sdmVNb3Zlcyk7XHJcbiAgY29uc29sZS5sb2coc29sdmVNb3Zlc0FycmF5KTtcclxuICBTaG93U3RlcChjdXJyc3RlcClcclxuXHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgXHJcbn1cclxuXHJcbnNwYW4ub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufVxyXG5cclxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkge1xyXG4gIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8vdmFyIHNvbHV0aW9uID0gW1wiUlwiLFwiVVwiLFwiQlwiLFwiRFwiXVxyXG5cclxuLy8gZGlzcGxheVxyXG52YXIgY3VycnN0ZXAgPSAxXHJcbnZhciBsZW4gPSBzb2x2ZU1vdmVzQXJyYXkubGVuZ3RoXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIFN0ZXBVcChuKXtcclxuICBTaG93U3RlcChjdXJyc3RlcCs9bilcclxufVxyXG5cclxuLy9mZmRmZmRmZmRycnJycnJycnJ1dWZ1dWZ1dWZkZGJkZGJkZGJsbGxsbGxsbGx1YmJ1YmJ1YmJcclxuXHJcbmZ1bmN0aW9uIHBsdXNTbGlkZXMobikge1xyXG4gIFNob3dTdGVwKHNsaWRlSW5kZXggKz0gbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNob3dTdGVwKGkpIHtcclxuICB2YXIgTUdDb2xsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiTW9kYWwtR3JpZC1JdGVtc1wiKTtcclxuICB2YXIgTUxlZnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1sZWZ0XCIpO1xyXG4gIHZhciBNUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1yaWdodFwiKTtcclxuICB2YXIgTURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjdGlvblwiKTtcclxuICB2YXIgTUJnYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWJnY1wiKTtcclxuICB2YXIgdGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dFwiKTtcclxuXHJcbiAgLy8gRm9ybWF0IGlcclxuICBpZiAoaT49bGVuKXtjdXJyc3RlcD1sZW47IGk9bGVuO01SaWdodC5zdHlsZS5vcGFjaXR5PTB9XHJcbiAgZWxzZSBpZiAoaTw9MSl7Y3VycnN0ZXA9MTsgaT0xO01MZWZ0LnN0eWxlLm9wYWNpdHk9MH1cclxuICBlbHNlIHtNUmlnaHQuc3R5bGUub3BhY2l0eT0xOyBNTGVmdC5zdHlsZS5vcGFjaXR5PTF9XHJcbiAgdmFyIE1Db2RlID0gc29sdmVNb3Zlc0FycmF5W2ktMV1cclxuXHJcblxyXG4gIC8vIHN0ZXBzXHJcbiAgdGV4dC50ZXh0Q29udGVudCA9IGN1cnJzdGVwICsgXCIvXCIgKyBsZW47XHJcbiAgTURpc3BsYXkudGV4dENvbnRlbnQgPSBNQ29kZTtcclxuICBmb3IgKGo9MDtqPE1HQ29sbGVjdG9yLmxlbmd0aDtqKyspe1xyXG4gICAgTUdDb2xsZWN0b3Jbal0udGV4dENvbnRlbnQgPVwiXCI7XHJcbiAgfVxyXG5cclxuICBpZihpPT0xKSB7XHJcbiAgICBNQmdjLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInZhcigtLUxpZ2h0T2ZmV2hpdGUpXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxMl0udGV4dENvbnRlbnQgPSBcIldcIjtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBNQmdjLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImxpZ2h0Z3JheVwiO1xyXG4gIH1cclxuXHJcbiAgLy8gY3Vyc2VkIGJpdFxyXG4gIGlmIChNQ29kZSA9PT0gXCJSXCIpIHtcclxuICAgIE1HQ29sbGVjdG9yWzRdLnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICBNR0NvbGxlY3Rvcls4XS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxM10udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMThdLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICB9IGVsc2UgaWYgKE1Db2RlID09PSBcIlItXCIpIHtcclxuICAgIE1HQ29sbGVjdG9yWzRdLnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICBNR0NvbGxlY3Rvcls4XS50ZXh0Q29udGVudCA9IFwi4oaTXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxM10udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbMThdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICB9IGVsc2UgaWYgKE1Db2RlID09PSBcIk1cIikge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzddLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEyXS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxN10udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gIH0gZWxzZSBpZiAoTUNvZGUgPT09IFwiTS1cIikge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzddLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEyXS50ZXh0Q29udGVudCA9IFwi4oaTXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxN10udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gIH0gZWxzZSBpZiAoTUNvZGUgPT09IFwiTFwiKSB7XHJcbiAgICBNR0NvbGxlY3Rvcls0XS50ZXh0Q29udGVudCA9IFwiMFwiO1xyXG4gICAgTUdDb2xsZWN0b3JbNl0udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTFdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE2XS50ZXh0Q29udGVudCA9IFwi4oaTXCI7XHJcbiAgfSBlbHNlIGlmIChNQ29kZSA9PT0gXCJMLVwiKSB7XHJcbiAgICBNR0NvbGxlY3Rvcls0XS50ZXh0Q29udGVudCA9IFwiMFwiO1xyXG4gICAgTUdDb2xsZWN0b3JbNl0udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTFdLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE2XS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgfVxyXG4gIGlmIChNQ29kZSA9PT0gXCJGXCIpXHJcbiAge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzddLnRleHRDb250ZW50ID0gXCLihpJcIjtcclxuICAgIE1HQ29sbGVjdG9yWzExXS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxM10udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTddLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICB9XHJcbiAgaWYgKE1Db2RlID09PSBcIkYtXCIpXHJcbiAge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE3XS50ZXh0Q29udGVudCA9IFwi4oaSXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxM10udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTFdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzddLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICB9XHJcblxyXG4gIGlmIChNQ29kZSA9PT0gXCJVXCIpXHJcbiAge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzZdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzddLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzhdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICB9XHJcbiAgaWYgKE1Db2RlID09PSBcIlUtXCIpXHJcbiAge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzZdLnRleHRDb250ZW50ID0gXCLihpJcIjtcclxuICAgIE1HQ29sbGVjdG9yWzddLnRleHRDb250ZW50ID0gXCLihpJcIjtcclxuICAgIE1HQ29sbGVjdG9yWzhdLnRleHRDb250ZW50ID0gXCLihpJcIjtcclxuICB9XHJcbiAgaWYgKE1Db2RlID09PSBcIkRcIilcclxuICB7XHJcbiAgICBNR0NvbGxlY3Rvcls0XS50ZXh0Q29udGVudCA9IFwiMFwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTZdLnRleHRDb250ZW50ID0gXCLihpJcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE3XS50ZXh0Q29udGVudCA9IFwi4oaSXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxOF0udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gIH1cclxuXHJcbiAgaWYgKE1Db2RlID09PSBcIkQtXCIpIHtcclxuICAgIE1HQ29sbGVjdG9yWzRdLnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxNl0udGV4dENvbnRlbnQgPSBcIuKGkFwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTddLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE4XS50ZXh0Q29udGVudCA9IFwi4oaQXCI7XHJcbiAgfVxyXG5cclxuICBpZiAoTUNvZGUgPT09IFwiRVwiKVxyXG4gIHtcclxuICAgIE1HQ29sbGVjdG9yWzRdLnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxMV0udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTJdLnRleHRDb250ZW50ID0gXCLihpJcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEzXS50ZXh0Q29udGVudCA9IFwi4oaSXCI7XHJcbiAgfVxyXG5cclxuICBpZiAoTUNvZGUgPT09IFwiRS1cIikge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzExXS50ZXh0Q29udGVudCA9IFwi4oaQXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxMl0udGV4dENvbnRlbnQgPSBcIuKGkFwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTNdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICB9XHJcblxyXG4gIGlmIChNQ29kZSA9PT0gXCJCXCIpXHJcbiAge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjJcIjtcclxuICAgIE1HQ29sbGVjdG9yWzFdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzJdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzNdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzVdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzldLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEwXS50ZXh0Q29udGVudCA9IFwi4oaTXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxNF0udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTVdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE5XS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgfVxyXG5cclxuICBpZiAoTUNvZGUgPT09IFwiQi1cIilcclxuICB7XHJcbiAgICBNR0NvbGxlY3Rvcls0XS50ZXh0Q29udGVudCA9IFwiMlwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMV0udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMl0udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbM10udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbOV0udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbNV0udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTRdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEwXS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxOV0udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTVdLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICB9XHJcbiAgaWYgKE1Db2RlID09PSBcIlNcIilcclxuICB7XHJcbiAgICBNR0NvbGxlY3Rvcls0XS50ZXh0Q29udGVudCA9IFwiMVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMV0udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMl0udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbM10udGV4dENvbnRlbnQgPSBcIuKGklwiO1xyXG4gICAgTUdDb2xsZWN0b3JbOV0udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbNV0udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTRdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEwXS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxOV0udGV4dENvbnRlbnQgPSBcIuKGk1wiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTVdLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICB9XHJcbiAgaWYgKE1Db2RlID09PSBcIlMtXCIpXHJcbiAge1xyXG4gICAgTUdDb2xsZWN0b3JbNF0udGV4dENvbnRlbnQgPSBcIjFcIjtcclxuICAgIE1HQ29sbGVjdG9yWzFdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzJdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzNdLnRleHRDb250ZW50ID0gXCLihpBcIjtcclxuICAgIE1HQ29sbGVjdG9yWzVdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzldLnRleHRDb250ZW50ID0gXCLihpFcIjtcclxuICAgIE1HQ29sbGVjdG9yWzEwXS50ZXh0Q29udGVudCA9IFwi4oaTXCI7XHJcbiAgICBNR0NvbGxlY3RvclsxNF0udGV4dENvbnRlbnQgPSBcIuKGkVwiO1xyXG4gICAgTUdDb2xsZWN0b3JbMTVdLnRleHRDb250ZW50ID0gXCLihpNcIjtcclxuICAgIE1HQ29sbGVjdG9yWzE5XS50ZXh0Q29udGVudCA9IFwi4oaRXCI7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG4iLCIhZnVuY3Rpb24oZSxyKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1yKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxyKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLnJ1Ymlrc0N1YmVTb2x2ZXI9cigpOmUucnViaWtzQ3ViZVNvbHZlcj1yKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcihvKXtpZih0W29dKXJldHVybiB0W29dLmV4cG9ydHM7dmFyIG49dFtvXT17aTpvLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbb10uY2FsbChuLmV4cG9ydHMsbixuLmV4cG9ydHMsciksbi5sPSEwLG4uZXhwb3J0c312YXIgdD17fTtyZXR1cm4gci5tPWUsci5jPXQsci5pPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxyLmQ9ZnVuY3Rpb24oZSx0LG8pe3IubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6b30pfSxyLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHIuZCh0LFwiYVwiLHQpLHR9LHIubz1mdW5jdGlvbihlLHIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKX0sci5wPVwiXCIscihyLnM9MzQpfShbZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSl7dmFyIHI9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7clt0LnRvTG93ZXJDYXNlKCldPWVbdF0udG9Mb3dlckNhc2UoKX0pLHJ9ZnVuY3Rpb24gbihlLHIpe3ZhciB0PU9iamVjdC5rZXlzKGUpO2lmKHQubGVuZ3RoPD0xJiZbXCJmcm9udFwiLFwiYmFja1wiXS5pbmNsdWRlcyh0WzBdKSl0aHJvdyBuZXcgRXJyb3IoJ09yaWVudGF0aW9uIG9iamVjdCBcIicrZSsnXCIgaXMgYW1iaWd1b3VzLiBQbGVhc2Ugc3BlY2lmeSBvbmUgb2YgdGhlc2UgZmFjZXM6IFwidXBcIiwgXCJyaWdodFwiLCBcImRvd25cIiwgXCJsZWZ0XCInKTt2YXIgbz1lO3JldHVybiBlPXt9LHQuZm9yRWFjaChmdW5jdGlvbihyKXtbXCJmcm9udFwiLFwiYmFja1wiXS5pbmNsdWRlcyhyKXx8KGVbcl09b1tyXSl9KSxlLmZyb250PXIudG9Mb3dlckNhc2UoKSxlfWZ1bmN0aW9uIGkoZSl7aWYoT2JqZWN0LmtleXMoZSk8PTEpdGhyb3cgbmV3IEVycm9yKCdPcmllbnRhdGlvbiBvYmplY3QgXCInK2UrJ1wiIGlzIGFtYmlndW91cy4gUGxlYXNlIHNwZWNpZnkgMiBmYWNlcy4nKTt2YXIgcj1PYmplY3Qua2V5cyhlKSx0PXIubWFwKGZ1bmN0aW9uKHIpe3JldHVybiBuZXcgbC5GYWNlKGVbcl0pfSksbz1yLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGwuRmFjZShlKX0pLG49Zi5WZWN0b3IuZ2V0Um90YXRpb25Gcm9tTm9ybWFscyh0WzBdLm5vcm1hbCgpLHRbMF0ub3JpZW50VG8ob1swXSkubm9ybWFsKCkpO3RbMV0ucm90YXRlKG4uYXhpcyxuLmFuZ2xlKTt2YXIgaT1mLlZlY3Rvci5nZXRSb3RhdGlvbkZyb21Ob3JtYWxzKHRbMV0ubm9ybWFsKCksdFsxXS5vcmllbnRUbyhvWzFdKS5ub3JtYWwoKSk7aWYoTWF0aC5hYnMoaS5hbmdsZSk9PT1NYXRoLlBJKXt2YXIgYT1uZXcgbC5GYWNlKHJbMF0pLnZlY3Rvci5nZXRBeGlzKCk7aS5heGlzPWF9cmV0dXJuW24saV19ZnVuY3Rpb24gYShlLHIpe3ZhciB0PSEwLG89ITEsbj12b2lkIDA7dHJ5e2Zvcih2YXIgaSxhPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEodD0oaT1hLm5leHQoKSkuZG9uZSk7dD0hMCl7dmFyIHU9aS52YWx1ZSxjPSEwLHM9ITEsbD12b2lkIDA7dHJ5e2Zvcih2YXIgZix2PXJbU3ltYm9sLml0ZXJhdG9yXSgpOyEoYz0oZj12Lm5leHQoKSkuZG9uZSk7Yz0hMCl7dmFyIG09Zi52YWx1ZTt1LnJvdGF0ZShtLmF4aXMsbS5hbmdsZSl9fWNhdGNoKGUpe3M9ITAsbD1lfWZpbmFsbHl7dHJ5eyFjJiZ2LnJldHVybiYmdi5yZXR1cm4oKX1maW5hbGx5e2lmKHMpdGhyb3cgbH19fX1jYXRjaChlKXtvPSEwLG49ZX1maW5hbGx5e3RyeXshdCYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IG59fX1mdW5jdGlvbiB1KGUpe3ZhciByPVtdLHQ9ITAsbz0hMSxuPXZvaWQgMDt0cnl7Zm9yKHZhciBpLGE9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7ISh0PShpPWEubmV4dCgpKS5kb25lKTt0PSEwKXt2YXIgdT1pLnZhbHVlO3U9dS5pbmNsdWRlcyhcInByaW1lXCIpP3VbMF06dVswXStcInByaW1lXCIsci5wdXNoKHUpfX1jYXRjaChlKXtvPSEwLG49ZX1maW5hbGx5e3RyeXshdCYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IG59fXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiBtb3Zlcz9yLmpvaW4oXCIgXCIpOnJ9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5vcmllbnRNb3Zlcz1yLmdldFJvdGF0aW9uRnJvbVRvPXIuZ2V0RmFjZUZyb21EaXJlY3Rpb249ci5nZXREaXJlY3Rpb25Gcm9tRmFjZXM9ci5ub3JtYWxpemVOb3RhdGlvbnM9ci50cmFuc2Zvcm1Ob3RhdGlvbnM9ci5nZXRGYWNlTWF0Y2hpbmdNaWRkbGU9ci5nZXRNaWRkbGVNYXRjaGluZ0ZhY2U9ci5nZXRNb3ZlT2ZGYWNlPXIuZ2V0RmFjZU9mTW92ZT12b2lkIDA7dmFyIGM9dCg3KSxzPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0oYyksbD10KDEwKSxmPXQoNCksdj17ZjpcInNcIixyOlwibXByaW1lXCIsdTpcImVwcmltZVwiLGQ6XCJlXCIsbDpcIm1cIixiOlwic3ByaW1lXCJ9LG09ci5nZXRGYWNlT2ZNb3ZlPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtb3ZlIG11c3QgYmUgYSBzdHJpbmdcIik7dmFyIHI9ZVswXS50b0xvd2VyQ2FzZSgpO3JldHVyblwiZlwiPT09cj9cImZyb250XCI6XCJyXCI9PT1yP1wicmlnaHRcIjpcInVcIj09PXI/XCJ1cFwiOlwiZFwiPT09cj9cImRvd25cIjpcImxcIj09PXI/XCJsZWZ0XCI6XCJiXCI9PT1yP1wiYmFja1wiOnZvaWQgMH0saD1yLmdldE1vdmVPZkZhY2U9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcImZhY2UgbXVzdCBiZSBhIHN0cmluZ1wiKTtpZihlPWUudG9Mb3dlckNhc2UoKSwhW1wiZnJvbnRcIixcInJpZ2h0XCIsXCJ1cFwiLFwiZG93blwiLFwibGVmdFwiLFwiYmFja1wiXS5pbmNsdWRlcyhlKSl0aHJvdyBuZXcgRXJyb3IoZStcIiBpcyBub3QgdmFsaWQgZmFjZVwiKTtyZXR1cm4gZVswXX0scD1yLmdldE1pZGRsZU1hdGNoaW5nRmFjZT1mdW5jdGlvbihlKXtyZXR1cm4gZT1lLnRvTG93ZXJDYXNlKClbMF0sdltlXX0sZz1yLmdldEZhY2VNYXRjaGluZ01pZGRsZT1mdW5jdGlvbihlKXtlPWUudG9Mb3dlckNhc2UoKTt2YXIgcj0hMCx0PSExLG89dm9pZCAwO3RyeXtmb3IodmFyIG4saT1PYmplY3Qua2V5cyh2KVtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShuPWkubmV4dCgpKS5kb25lKTtyPSEwKXt2YXIgYT1uLnZhbHVlO2lmKGU9PT12W2FdKXJldHVybiBhfX1jYXRjaChlKXt0PSEwLG89ZX1maW5hbGx5e3RyeXshciYmaS5yZXR1cm4mJmkucmV0dXJuKCl9ZmluYWxseXtpZih0KXRocm93IG99fX0sZD1yLnRyYW5zZm9ybU5vdGF0aW9ucz1mdW5jdGlvbihlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sdD15KGUpO3JldHVybiByLnVwcGVyQ2FzZSYmKHQ9dC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF0udG9VcHBlckNhc2UoKStlLnNsaWNlKDEpfSkpLHIub3JpZW50YXRpb24mJih0PXcodCxyLm9yaWVudGF0aW9uKSksci5yZXZlcnNlJiYodD11KHQpKSxcInN0cmluZ1wiPT10eXBlb2YgZT90LmpvaW4oXCIgXCIpOnR9LHk9ci5ub3JtYWxpemVOb3RhdGlvbnM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWUuc3BsaXQoXCIgXCIpKSxlPWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPT1lfSksZS5tYXAoZnVuY3Rpb24oZSl7dmFyIHI9ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicHJpbWVcIiksdD1lLmluY2x1ZGVzKFwiMlwiKTtyZXR1cm4gZT1lWzBdLHQ/ZT1lWzBdK1wiMlwiOnImJihlKz1cInByaW1lXCIpLGV9KX0sUD1yLmdldERpcmVjdGlvbkZyb21GYWNlcz1mdW5jdGlvbihlLHIsdCl7dD1vKHQpLHQ9bih0LGUpO3ZhciB1PW5ldyBsLkZhY2UoZSksYz1uZXcgbC5GYWNlKHIpO2EoW3UsY10saSh0KSk7dmFyIHY9bmV3IGYuVmVjdG9yKCgwLHMuZGVmYXVsdCkoW10sdS5ub3JtYWwoKSxjLm5vcm1hbCgpKSkuZ2V0QXhpcygpLG09Zi5WZWN0b3IuZ2V0QW5nbGUodS5ub3JtYWwoKSxjLm5vcm1hbCgpKTtyZXR1cm5cInhcIj09PXYmJm0+MD9cImRvd25cIjpcInhcIj09PXYmJm08MD9cInVwXCI6XCJ5XCI9PT12JiZtPjA/XCJyaWdodFwiOlwieVwiPT09diYmbTwwP1wibGVmdFwiOjA9PT1tP1wiZnJvbnRcIjptPT09TWF0aC5QST9cImJhY2tcIjp2b2lkIDB9LGI9ci5nZXRGYWNlRnJvbURpcmVjdGlvbj1mdW5jdGlvbihlLHIsdCl7dD1vKHQpLHQ9bih0LGUpO3ZhciB1PW5ldyBsLkZhY2UoZSksYz1pKHQpO2EoW3VdLGMpO3ZhciBzPW5ldyBsLkZhY2Uociksdj1mLlZlY3Rvci5nZXRSb3RhdGlvbkZyb21Ob3JtYWxzKHUubm9ybWFsKCkscy5ub3JtYWwoKSksbT12LmF4aXMsaD12LmFuZ2xlO3JldHVybiB1LnJvdGF0ZShtLGgpLGEoW3VdLGMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBmLlZlY3Rvci5yZXZlcnNlUm90YXRpb24oZSl9KS5yZXZlcnNlKCkpLHUudG9TdHJpbmcoKX0sRj1yLmdldFJvdGF0aW9uRnJvbVRvPWZ1bmN0aW9uKGUscix0KXt2YXIgbz1uZXcgbC5GYWNlKGUpLG49bmV3IGwuRmFjZShyKSxpPW5ldyBsLkZhY2UodCksYT1vLnZlY3Rvci5nZXRBeGlzKCksdT1bbi52ZWN0b3IuZ2V0QXhpcygpLGkudmVjdG9yLmdldEF4aXMoKV0sYz11WzBdLHM9dVsxXTtpZihbYy50b0xvd2VyQ2FzZSgpLHMudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoYS50b0xvd2VyQ2FzZSgpKSl0aHJvdyBuZXcgRXJyb3IoXCJtb3ZpbmcgXCIrbytcIiBmcm9tIFwiK24rXCIgdG8gXCIraStcIiBpcyBub3QgcG9zc2libGUuXCIpO3ZhciB2PWgoZSkudG9VcHBlckNhc2UoKSxtPWYuVmVjdG9yLmdldEFuZ2xlKG4ubm9ybWFsKCksaS5ub3JtYWwoKSk7cmV0dXJuIG8udmVjdG9yLmdldE1hZ25pdHVkZSgpPDAmJihtKj0tMSksMD09PW0/XCJcIjpNYXRoLmFicyhtKT09PU1hdGguUEk/ditcIiBcIit2Om08MD9cIlwiK3Y6bT4wP3YrXCJQcmltZVwiOnZvaWQgMH0sdz1yLm9yaWVudE1vdmVzPWZ1bmN0aW9uKGUscil7cj1vKHIpO3ZhciB0PWkocik7cmV0dXJuIHQucmV2ZXJzZSgpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZi5WZWN0b3IucmV2ZXJzZVJvdGF0aW9uKGUpfSksZS5tYXAoZnVuY3Rpb24oZSl7dmFyIHI9ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicHJpbWVcIiksbz1lLmluY2x1ZGVzKFwiMlwiKSxuPWVbMF09PT1lWzBdLnRvTG93ZXJDYXNlKCksaT1bXCJtXCIsXCJlXCIsXCJzXCJdLmluY2x1ZGVzKGVbMF0udG9Mb3dlckNhc2UoKSk7byYmKGU9ZS5yZXBsYWNlKFwiMlwiLFwiXCIpKTt2YXIgdT12b2lkIDA7aWYoaSl7dmFyIGM9bShnKGUpKTt1PW5ldyBsLkZhY2UoYyl9ZWxzZXt2YXIgcz1tKGVbMF0pO3U9bmV3IGwuRmFjZShzKX1hKFt1XSx0KTt2YXIgZj12b2lkIDA7cmV0dXJuIGY9aT9wKHUudG9TdHJpbmcoKSk6dS50b1N0cmluZygpWzBdLG58fChmPWYudG9VcHBlckNhc2UoKSksbyYmKGYrPVwiMlwiKSxyJiYhaSYmKGYrPVwicHJpbWVcIiksZn0pfTtyLmRlZmF1bHQ9e2dldEZhY2VPZk1vdmU6bSxnZXRNb3ZlT2ZGYWNlOmgsZ2V0TWlkZGxlTWF0Y2hpbmdGYWNlOnAsZ2V0RmFjZU1hdGNoaW5nTWlkZGxlOmcsdHJhbnNmb3JtTm90YXRpb25zOmQsbm9ybWFsaXplTm90YXRpb25zOnksZ2V0RGlyZWN0aW9uRnJvbUZhY2VzOlAsZ2V0Um90YXRpb25Gcm9tVG86RixnZXRGYWNlRnJvbURpcmVjdGlvbjpiLG9yaWVudE1vdmVzOnd9fSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlKXtpZihBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHI9MCx0PUFycmF5KGUubGVuZ3RoKTtyPGUubGVuZ3RoO3IrKyl0W3JdPWVbcl07cmV0dXJuIHR9cmV0dXJuIEFycmF5LmZyb20oZSl9ZnVuY3Rpb24gbihlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5SdWJpa3NDdWJlPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGE9dCg5KSx1PXQoMyksYz10KDApLHM9XCJmZmZmZmZmZmZycnJycnJycnJ1dXV1dXV1dXVkZGRkZGRkZGRsbGxsbGxsbGxiYmJiYmJiYmJcIixsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyKXtpZihuKHRoaXMsZSksNTQhPT1yLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBudW1iZXIgb2YgY29sb3JzIHByb3ZpZGVkXCIpO3RoaXMuX25vdGF0aW9uVG9Sb3RhdGlvbj17Zjp7YXhpczpcInpcIixtYWc6LTF9LHI6e2F4aXM6XCJ4XCIsbWFnOi0xfSx1OntheGlzOlwieVwiLG1hZzotMX0sZDp7YXhpczpcInlcIixtYWc6MX0sbDp7YXhpczpcInhcIixtYWc6MX0sYjp7YXhpczpcInpcIixtYWc6MX0sbTp7YXhpczpcInhcIixtYWc6MX0sZTp7YXhpczpcInlcIixtYWc6MX0sczp7YXhpczpcInpcIixtYWc6LTF9fSx0aGlzLl9idWlsZChyKX1yZXR1cm4gaShlLG51bGwsW3trZXk6XCJTb2x2ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZShzKX19LHtrZXk6XCJGcm9tTW92ZXNcIix2YWx1ZTpmdW5jdGlvbihyKXt2YXIgdD1lLlNvbHZlZCgpO3JldHVybiB0Lm1vdmUociksdH19LHtrZXk6XCJTY3JhbWJsZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciByPWUuU29sdmVkKCksdD1lLmdldFJhbmRvbU1vdmVzKDI1KTtyZXR1cm4gci5tb3ZlKHQpLHJ9fSx7a2V5OlwicmV2ZXJzZU1vdmVzXCIsdmFsdWU6ZnVuY3Rpb24ocil7cmV0dXJuIGUudHJhbnNmb3JtTW92ZXMocix7cmV2ZXJzZTohMH0pfX0se2tleTpcInRyYW5zZm9ybU1vdmVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybigwLGMudHJhbnNmb3JtTm90YXRpb25zKShlLHIpfX0se2tleTpcImdldFJhbmRvbU1vdmVzXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjI1LHI9W10sdD1bXCJGXCIsXCJGcHJpbWVcIixcIlJcIixcIlJwcmltZVwiLFwiVVwiLFwiVXByaW1lXCIsXCJEXCIsXCJEcHJpbWVcIixcIkxcIixcIkxwcmltZVwiLFwiQlwiLFwiQnByaW1lXCJdO3IubGVuZ3RoPGU7KXtmb3IodmFyIG89MDtvPGUtci5sZW5ndGg7bysrKXt2YXIgbj1+fihNYXRoLnJhbmRvbSgpKnQubGVuZ3RoKTtyLnB1c2godFtuXSl9cj0oMCx1LmFsZ29yaXRobVNob3J0ZW5lcikocikuc3BsaXQoXCIgXCIpfXJldHVybiByLmpvaW4oXCIgXCIpfX1dKSxpKGUsW3trZXk6XCJnZXRGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCdcImZhY2VcIiBtdXN0IGJlIGEgc3RyaW5nIChyZWNlaXZlZDogJytlK1wiKVwiKTtlPWUudG9Mb3dlckNhc2UoKVswXTt2YXIgcj12b2lkIDAsdD12b2lkIDAsbz12b2lkIDAsbj12b2lkIDAsaT12b2lkIDA7aWYoXCJmXCI9PT1lKXI9XCJZXCIsdD1cIlhcIixvPS0xLG49MSxpPXRoaXMuX2N1Ymllcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLmdldFooKX0pO2Vsc2UgaWYoXCJyXCI9PT1lKXI9XCJZXCIsdD1cIlpcIixvPS0xLG49LTEsaT10aGlzLl9jdWJpZXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5nZXRYKCl9KTtlbHNlIGlmKFwidVwiPT09ZSlyPVwiWlwiLHQ9XCJYXCIsbz0xLG49MSxpPXRoaXMuX2N1Ymllcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLmdldFkoKX0pO2Vsc2UgaWYoXCJkXCI9PT1lKXI9XCJaXCIsdD1cIlhcIixvPS0xLG49MSxpPXRoaXMuX2N1Ymllcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1lLmdldFkoKX0pO2Vsc2UgaWYoXCJsXCI9PT1lKXI9XCJZXCIsdD1cIlpcIixvPS0xLG49MSxpPXRoaXMuX2N1Ymllcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1lLmdldFgoKX0pO2Vsc2UgaWYoXCJiXCI9PT1lKXI9XCJZXCIsdD1cIlhcIixvPS0xLG49LTEsaT10aGlzLl9jdWJpZXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09ZS5nZXRaKCl9KTtlbHNlIGlmKFtcIm1cIixcImVcIixcInNcIl0uaW5jbHVkZXMoZSkpcmV0dXJuIHRoaXMuX2dldE1pZGRsZUN1Ymllc0Zvck1vdmUoZSk7cmV0dXJuIGkuc29ydChmdW5jdGlvbihlLGkpe3ZhciBhPWVbXCJnZXRcIityXSgpKm8sdT1lW1wiZ2V0XCIrdF0oKSpuLGM9aVtcImdldFwiK3JdKCkqbyxzPWlbXCJnZXRcIit0XSgpKm47cmV0dXJuIGE8Yz8tMTphPmM/MTp1PHM/LTE6MX0pfX0se2tleTpcImdldEN1YmllXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2N1Ymllcy5maW5kKGZ1bmN0aW9uKHIpe2lmKGUubGVuZ3RoIT1yLmZhY2VzKCkubGVuZ3RoKXJldHVybiExO3ZhciB0PSEwLG89ITEsbj12b2lkIDA7dHJ5e2Zvcih2YXIgaSxhPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEodD0oaT1hLm5leHQoKSkuZG9uZSk7dD0hMCl7dmFyIHU9aS52YWx1ZTtpZighci5mYWNlcygpLmluY2x1ZGVzKHUpKXJldHVybiExfX1jYXRjaChlKXtvPSEwLG49ZX1maW5hbGx5e3RyeXshdCYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IG59fXJldHVybiEwfSl9fSx7a2V5OlwiY29ybmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1Ymllcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNDb3JuZXIoKX0pfX0se2tleTpcImVkZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3ViaWVzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pc0VkZ2UoKX0pfX0se2tleTpcIm1pZGRsZXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdWJpZXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlzTWlkZGxlKCl9KX19LHtrZXk6XCJtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O1wic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1lLnNwbGl0KFwiIFwiKSksZT0oMCxjLnRyYW5zZm9ybU5vdGF0aW9ucykoZSxyKTt2YXIgdD0hMCxuPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIGEsdT1lW1N5bWJvbC5pdGVyYXRvcl0oKTshKHQ9KGE9dS5uZXh0KCkpLmRvbmUpO3Q9ITApe3ZhciBzPWEudmFsdWUsbD1zWzBdO2lmKGwpe3ZhciBmPXMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInByaW1lXCIpLHY9bD09PWwudG9Mb3dlckNhc2UoKSxtPXMuaW5jbHVkZXMoXCIyXCIpLGg9dGhpcy5fZ2V0Um90YXRpb25Gb3JGYWNlKGwpLHA9aC5heGlzLGc9aC5tYWcsZD10aGlzLmdldEZhY2UobCk7aWYoZiYmKGcqPS0xKSxtJiYoZyo9Miksdil7dmFyIHk9KDAsYy5nZXRNaWRkbGVNYXRjaGluZ0ZhY2UpKGwpLFA9dGhpcy5fZ2V0TWlkZGxlQ3ViaWVzRm9yTW92ZSh5KTtkPVtdLmNvbmNhdChvKGQpLG8oUCkpfXZhciBiPSEwLEY9ITEsdz12b2lkIDA7dHJ5e2Zvcih2YXIgUixDPWRbU3ltYm9sLml0ZXJhdG9yXSgpOyEoYj0oUj1DLm5leHQoKSkuZG9uZSk7Yj0hMCl7Ui52YWx1ZS5yb3RhdGUocCxnKX19Y2F0Y2goZSl7Rj0hMCx3PWV9ZmluYWxseXt0cnl7IWImJkMucmV0dXJuJiZDLnJldHVybigpfWZpbmFsbHl7aWYoRil0aHJvdyB3fX19fX1jYXRjaChlKXtuPSEwLGk9ZX1maW5hbGx5e3RyeXshdCYmdS5yZXR1cm4mJnUucmV0dXJuKCl9ZmluYWxseXtpZihuKXRocm93IGl9fX19LHtrZXk6XCJpc1NvbHZlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKT09PXN9fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVwiXCIscj1bXCJmcm9udFwiLFwicmlnaHRcIixcInVwXCIsXCJkb3duXCIsXCJsZWZ0XCIsXCJiYWNrXCJdLHQ9ITAsbz0hMSxuPXZvaWQgMDt0cnl7Zm9yKHZhciBpLGE9cltTeW1ib2wuaXRlcmF0b3JdKCk7ISh0PShpPWEubmV4dCgpKS5kb25lKTt0PSEwKXt2YXIgdT1pLnZhbHVlLGM9dGhpcy5nZXRGYWNlKHUpLHM9ITAsbD0hMSxmPXZvaWQgMDt0cnl7Zm9yKHZhciB2LG09Y1tTeW1ib2wuaXRlcmF0b3JdKCk7IShzPSh2PW0ubmV4dCgpKS5kb25lKTtzPSEwKXtlKz12LnZhbHVlLmdldENvbG9yT2ZGYWNlKHUpfX1jYXRjaChlKXtsPSEwLGY9ZX1maW5hbGx5e3RyeXshcyYmbS5yZXR1cm4mJm0ucmV0dXJuKCl9ZmluYWxseXtpZihsKXRocm93IGZ9fX19Y2F0Y2goZSl7bz0hMCxuPWV9ZmluYWxseXt0cnl7IXQmJmEucmV0dXJuJiZhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyBufX1yZXR1cm4gZX19LHtrZXk6XCJjbG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMudG9TdHJpbmcoKSl9fSx7a2V5OlwiX2J1aWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY3ViaWVzPVtdLHRoaXMuX3BvcHVsYXRlQ3ViZSgpO3ZhciByPXRoaXMuX3BhcnNlQ29sb3JzKGUpLHQ9ITAsbz0hMSxuPXZvaWQgMDt0cnl7Zm9yKHZhciBpLGE9T2JqZWN0LmtleXMocilbU3ltYm9sLml0ZXJhdG9yXSgpOyEodD0oaT1hLm5leHQoKSkuZG9uZSk7dD0hMCl7dmFyIHU9aS52YWx1ZSxjPXJbdV07dGhpcy5fY29sb3JGYWNlKHUsYyl9fWNhdGNoKGUpe289ITAsbj1lfWZpbmFsbHl7dHJ5eyF0JiZhLnJldHVybiYmYS5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgbn19fX0se2tleTpcIl9wb3B1bGF0ZUN1YmVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT0tMTtlPD0xO2UrKylmb3IodmFyIHI9LTE7cjw9MTtyKyspZm9yKHZhciB0PS0xO3Q8PTE7dCsrKWlmKDAhPT1lfHwwIT09cnx8MCE9PXQpe3ZhciBvPW5ldyBhLkN1YmllKHtwb3NpdGlvbjpbZSxyLHRdfSk7dGhpcy5fY3ViaWVzLnB1c2gobyl9fX0se2tleTpcIl9wYXJzZUNvbG9yc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgcj17ZnJvbnQ6W10scmlnaHQ6W10sdXA6W10sZG93bjpbXSxsZWZ0OltdLGJhY2s6W119LHQ9dm9pZCAwLG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIG49ZVtvXTt0PW88OT9cImZyb250XCI6bzwxOD9cInJpZ2h0XCI6bzwyNz9cInVwXCI6bzwzNj9cImRvd25cIjpvPDQ1P1wibGVmdFwiOlwiYmFja1wiLHJbdF0ucHVzaChuKX1yZXR1cm4gcn19LHtrZXk6XCJfY29sb3JGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXtmb3IodmFyIHQ9dGhpcy5nZXRGYWNlKGUpLG89MDtvPHIubGVuZ3RoO28rKyl0W29dLmNvbG9yRmFjZShlLHJbb10pfX0se2tleTpcIl9nZXRSb3RhdGlvbkZvckZhY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoJ1wiZmFjZVwiIG11c3QgYmUgYSBzdHJpbmcgKHJlY2VpdmVkOiAnK2UrXCIpXCIpO3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSx7YXhpczp0aGlzLl9ub3RhdGlvblRvUm90YXRpb25bZV0uYXhpcyxtYWc6dGhpcy5fbm90YXRpb25Ub1JvdGF0aW9uW2VdLm1hZypNYXRoLlBJLzJ9fX0se2tleTpcIl9nZXRNaWRkbGVDdWJpZXNGb3JNb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZT1lWzBdLnRvTG93ZXJDYXNlKCk7dmFyIHI9dm9pZCAwO3JldHVyblwibVwiPT09ZT9yPVtcImxlZnRcIixcInJpZ2h0XCJdOlwiZVwiPT09ZT9yPVtcInVwXCIsXCJkb3duXCJdOlwic1wiPT09ZSYmKHI9W1wiZnJvbnRcIixcImJhY2tcIl0pLHRoaXMuX2N1Ymllcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIWUuaGFzRmFjZShyWzBdKSYmIWUuaGFzRmFjZShyWzFdKX0pfX1dKSxlfSgpO3IuUnViaWtzQ3ViZT1sfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5CYXNlU29sdmVyPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGk9dCgxKSxhPXQoMCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocil7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O28odGhpcyxlKSx0aGlzLmN1YmU9XCJzdHJpbmdcIj09dHlwZW9mIHI/bmV3IGkuUnViaWtzQ3ViZShyKTpyLHRoaXMub3B0aW9ucz10LHRoaXMucGFydGl0aW9uPXt9LHRoaXMucGFydGl0aW9ucz1bXSx0aGlzLnRvdGFsTW92ZXM9W10sdGhpcy5fYWZ0ZXJFYWNoQ2FsbGJhY2tzPVtdfXJldHVybiBuKGUsW3trZXk6XCJtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9ZS5zcGxpdChcIiBcIikpLHRoaXMuY3ViZS5tb3ZlKGUsciksZT0oMCxhLnRyYW5zZm9ybU5vdGF0aW9ucykoZSxyKTt2YXIgdD0hMCxvPSExLG49dm9pZCAwO3RyeXtmb3IodmFyIGksdT1lW1N5bWJvbC5pdGVyYXRvcl0oKTshKHQ9KGk9dS5uZXh0KCkpLmRvbmUpO3Q9ITApe3ZhciBjPWkudmFsdWU7dGhpcy50b3RhbE1vdmVzLnB1c2goYyl9fWNhdGNoKGUpe289ITAsbj1lfWZpbmFsbHl7dHJ5eyF0JiZ1LnJldHVybiYmdS5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgbn19fX0se2tleTpcImFmdGVyRWFjaFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2FmdGVyRWFjaENhbGxiYWNrcy5wdXNoKGUpfX0se2tleTpcIl90cmlnZ2VyQWZ0ZXJFYWNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KGUpLHQ9MDt0PGU7dCsrKXJbdF09YXJndW1lbnRzW3RdO3RoaXMuX2FmdGVyRWFjaENhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGx5KHZvaWQgMCxyKX0pfX0se2tleTpcIl9zb2x2ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMucGFydGl0aW9uPXt9LHRoaXMucGFydGl0aW9uLmN1Ymllcz1lO3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlO3JldHVybiB0aGlzLnBhcnRpdGlvbi5jYXNlTnVtYmVyPXRoaXMuX2dldENhc2VOdW1iZXIoe2Nvcm5lcjpyLGVkZ2U6dH0pLHRoaXMuX3NvbHZlQ2FzZSh0aGlzLnBhcnRpdGlvbi5jYXNlTnVtYmVyLHtjb3JuZXI6cixlZGdlOnR9KSx0aGlzLnBhcnRpdGlvbi5tb3Zlcz10aGlzLnRvdGFsTW92ZXMsdGhpcy50b3RhbE1vdmVzPVtdLHRoaXMuX292ZXJyaWRlQWZ0ZXJFYWNofHx0aGlzLl90cmlnZ2VyQWZ0ZXJFYWNoKHRoaXMucGFydGl0aW9uLHRoaXMucGhhc2UpLHRoaXMucGFydGl0aW9ufX0se2tleTpcIl9zb2x2ZUNhc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sdD1yLmNvcm5lcixvPXIuZWRnZTt0aGlzW1wiX3NvbHZlQ2FzZVwiK2VdKHtjb3JuZXI6dCxlZGdlOm99KX19XSksZX0oKTtyLkJhc2VTb2x2ZXI9dX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuYWxnb3JpdGhtU2hvcnRlbmVyPXZvaWQgMDt2YXIgbz10KDE5KSxuPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obyksaT17RjpcIkJcIixSOlwiTFwiLFU6XCJEXCJ9LGE9ZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWUuc3BsaXQoXCIgXCIpKTt2YXIgcj17Y29tcGFyZTpmdW5jdGlvbihlLHIpe3JldHVybiBlWzBdPT09clswXX0sY29tYmluZTpmdW5jdGlvbihlLHIpe3ZhciB0PWUuaW5jbHVkZXMoXCIyXCIpPzI6ZS5pbmNsdWRlcyhcInByaW1lXCIpPy0xOjEsbz1yLmluY2x1ZGVzKFwiMlwiKT8yOnIuaW5jbHVkZXMoXCJwcmltZVwiKT8tMToxLG49dCtvO2lmKDQ9PT1uJiYobj0wKSwtMj09PW4mJihuPTIpLDM9PT1uJiYobj0tMSksMD09PW4pcmV0dXJuXCJcIjt2YXIgaT0yPT09bj9cIjJcIjotMT09PW4/XCJwcmltZVwiOlwiXCI7cmV0dXJuXCJcIitlWzBdK2l9LGNhbmNlbDpmdW5jdGlvbihlKXtyZXR1cm5cIlwiPT09ZX0saWdub3JlOmZ1bmN0aW9uKGUscil7cmV0dXJuIGlbZVswXV09PT1yWzBdfHxpW3JbMF1dPT09ZVswXX19O3JldHVybigwLG4uZGVmYXVsdCkoZSxyKS5qb2luKFwiIFwiKX07ci5hbGdvcml0aG1TaG9ydGVuZXI9YX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIG4oZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuVmVjdG9yPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGE9dCgyMiksdT1vKGEpLGM9dCg3KSxzPW8oYyksbD10KDI2KSxmPW8obCksdj10KDI3KSxtPW8odiksaD10KDI4KSxwPW8oaCksZz17eDpmLmRlZmF1bHQseTptLmRlZmF1bHQsejpwLmRlZmF1bHR9LGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHIpe24odGhpcyxlKSx0aGlzLnNldChyKX1yZXR1cm4gaShlLG51bGwsW3trZXk6XCJGcm9tU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24ocil7cmV0dXJuIG5ldyBlKHIuc3BsaXQoXCIgXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSl9KSl9fSx7a2V5OlwiYXJlRXF1YWxcIix2YWx1ZTpmdW5jdGlvbihlLHIpe3JldHVybiBlWzBdPT09clswXSYmZVsxXT09PXJbMV0mJmVbMl09PT1yWzJdfX0se2tleTpcImdldEFuZ2xlXCIsdmFsdWU6ZnVuY3Rpb24ocix0KXt2YXIgbz0oMCx1LmRlZmF1bHQpKHIsdCksbj0oMCxzLmRlZmF1bHQpKFtdLHIsdCksaT1uZXcgZShuKS5nZXRNYWduaXR1ZGUoKTtyZXR1cm4gaT9vKmk6b319LHtrZXk6XCJnZXRSb3RhdGlvbkZyb21Ob3JtYWxzXCIsdmFsdWU6ZnVuY3Rpb24ocix0KXt2YXIgbz1uZXcgZSgoMCxzLmRlZmF1bHQpKFtdLHIsdCkpLmdldEF4aXMoKSxuPWUuZ2V0QW5nbGUocix0KTtpZighbyl7dmFyIGk9W1wieFwiLFwieVwiLFwielwiXTtpLnNwbGljZShpLmluZGV4T2YobmV3IGUocikuZ2V0QXhpcygpKSwxKSxvPWlbMF19cmV0dXJue2F4aXM6byxhbmdsZTpufX19LHtrZXk6XCJyZXZlcnNlUm90YXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5hbmdsZSo9LTEsZX19XSksaShlLFt7a2V5OlwidG9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVjdG9yfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUmJih0aGlzLnZlY3Rvcj1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5yb3VuZChlKX0pKX19LHtrZXk6XCJzZXRYXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy52ZWN0b3JbMF09ZX19LHtrZXk6XCJzZXRZXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy52ZWN0b3JbMV09ZX19LHtrZXk6XCJzZXRaXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy52ZWN0b3JbMl09ZX19LHtrZXk6XCJnZXRYXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0FycmF5KClbMF19fSx7a2V5OlwiZ2V0WVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9BcnJheSgpWzFdfX0se2tleTpcImdldFpcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvQXJyYXkoKVsyXX19LHtrZXk6XCJpc0F4aXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPTAscj0hMCx0PSExLG89dm9pZCAwO3RyeXtmb3IodmFyIG4saT10aGlzLnZlY3RvcltTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShuPWkubmV4dCgpKS5kb25lKTtyPSEwKXswPT09bi52YWx1ZSYmKGUrPTEpfX1jYXRjaChlKXt0PSEwLG89ZX1maW5hbGx5e3RyeXshciYmaS5yZXR1cm4mJmkucmV0dXJuKCl9ZmluYWxseXtpZih0KXRocm93IG99fXJldHVybiAyPT09ZX19LHtrZXk6XCJnZXRBeGlzXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzQXhpcygpKXJldHVybiAwIT09dGhpcy52ZWN0b3JbMF0/XCJ4XCI6MCE9PXRoaXMudmVjdG9yWzFdP1wieVwiOjAhPT10aGlzLnZlY3RvclsyXT9cInpcIjp2b2lkIDB9fSx7a2V5OlwiZ2V0TWFnbml0dWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzQXhpcygpKXJldHVybiB0aGlzW1wiZ2V0XCIrdGhpcy5nZXRBeGlzKCkudG9VcHBlckNhc2UoKV0oKX19LHtrZXk6XCJyb3RhdGVcIix2YWx1ZTpmdW5jdGlvbihlLHIpe3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSx0aGlzLnNldChnW2VdKFtdLHRoaXMudmVjdG9yLFswLDAsMF0scikpLHRoaXN9fV0pLGV9KCk7ci5WZWN0b3I9ZH0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG4oZSxyKXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByP2U6cn1mdW5jdGlvbiBpKGUscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUscik6ZS5fX3Byb3RvX189cil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5GMkxDYXNlQmFzZVNvbHZlcj12b2lkIDA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7Zm9yKHZhciB0PTA7dDxyLmxlbmd0aDt0Kyspe3ZhciBvPXJbdF07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1yZXR1cm4gZnVuY3Rpb24ocix0LG8pe3JldHVybiB0JiZlKHIucHJvdG90eXBlLHQpLG8mJmUocixvKSxyfX0oKSx1PXQoMTIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcigpe3JldHVybiBvKHRoaXMsciksbih0aGlzLChyLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHIpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKHIsZSksYShyLFt7a2V5Olwic29sdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTtyZXR1cm4gdGhpcy5fc29sdmUoe2Nvcm5lcjpyLGVkZ2U6dH0pfX1dKSxyfSh1LkYyTEJhc2VTb2x2ZXIpO3IuRjJMQ2FzZUJhc2VTb2x2ZXI9Y30sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybi9bXFx1MDAxYlxcdTAwOWJdW1soKSM7P10qKD86WzAtOV17MSw0fSg/OjtbMC05XXswLDR9KSopP1swLTlBLVBSWmNmLW5xcnk9PjxdL2d9fSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIsdCl7dmFyIG89clswXSxuPXJbMV0saT1yWzJdLGE9dFswXSx1PXRbMV0sYz10WzJdO3JldHVybiBlWzBdPW4qYy1pKnUsZVsxXT1pKmEtbypjLGVbMl09byp1LW4qYSxlfWUuZXhwb3J0cz1vfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbygpe3Rocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gbigpe3Rocm93IG5ldyBFcnJvcihcImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBpKGUpe2lmKGY9PT1zZXRUaW1lb3V0KXJldHVybiBzZXRUaW1lb3V0KGUsMCk7aWYoKGY9PT1vfHwhZikmJnNldFRpbWVvdXQpcmV0dXJuIGY9c2V0VGltZW91dCxzZXRUaW1lb3V0KGUsMCk7dHJ5e3JldHVybiBmKGUsMCl9Y2F0Y2gocil7dHJ5e3JldHVybiBmLmNhbGwobnVsbCxlLDApfWNhdGNoKHIpe3JldHVybiBmLmNhbGwodGhpcyxlLDApfX19ZnVuY3Rpb24gYShlKXtpZih2PT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoZSk7aWYoKHY9PT1ufHwhdikmJmNsZWFyVGltZW91dClyZXR1cm4gdj1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtyZXR1cm4gdihlKX1jYXRjaChyKXt0cnl7cmV0dXJuIHYuY2FsbChudWxsLGUpfWNhdGNoKHIpe3JldHVybiB2LmNhbGwodGhpcyxlKX19fWZ1bmN0aW9uIHUoKXtnJiZoJiYoZz0hMSxoLmxlbmd0aD9wPWguY29uY2F0KHApOmQ9LTEscC5sZW5ndGgmJmMoKSl9ZnVuY3Rpb24gYygpe2lmKCFnKXt2YXIgZT1pKHUpO2c9ITA7Zm9yKHZhciByPXAubGVuZ3RoO3I7KXtmb3IoaD1wLHA9W107KytkPHI7KWgmJmhbZF0ucnVuKCk7ZD0tMSxyPXAubGVuZ3RofWg9bnVsbCxnPSExLGEoZSl9fWZ1bmN0aW9uIHMoZSxyKXt0aGlzLmZ1bj1lLHRoaXMuYXJyYXk9cn1mdW5jdGlvbiBsKCl7fXZhciBmLHYsbT1lLmV4cG9ydHM9e307IWZ1bmN0aW9uKCl7dHJ5e2Y9XCJmdW5jdGlvblwiPT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0Om99Y2F0Y2goZSl7Zj1vfXRyeXt2PVwiZnVuY3Rpb25cIj09dHlwZW9mIGNsZWFyVGltZW91dD9jbGVhclRpbWVvdXQ6bn1jYXRjaChlKXt2PW59fSgpO3ZhciBoLHA9W10sZz0hMSxkPS0xO20ubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHI9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspclt0LTFdPWFyZ3VtZW50c1t0XTtwLnB1c2gobmV3IHMoZSxyKSksMSE9PXAubGVuZ3RofHxnfHxpKGMpfSxzLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSxtLnRpdGxlPVwiYnJvd3NlclwiLG0uYnJvd3Nlcj0hMCxtLmVudj17fSxtLmFyZ3Y9W10sbS52ZXJzaW9uPVwiXCIsbS52ZXJzaW9ucz17fSxtLm9uPWwsbS5hZGRMaXN0ZW5lcj1sLG0ub25jZT1sLG0ub2ZmPWwsbS5yZW1vdmVMaXN0ZW5lcj1sLG0ucmVtb3ZlQWxsTGlzdGVuZXJzPWwsbS5lbWl0PWwsbS5wcmVwZW5kTGlzdGVuZXI9bCxtLnByZXBlbmRPbmNlTGlzdGVuZXI9bCxtLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm5bXX0sbS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxtLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxtLmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sbS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQ3ViaWU9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbz1yW3RdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19cmV0dXJuIGZ1bmN0aW9uKHIsdCxvKXtyZXR1cm4gdCYmZShyLnByb3RvdHlwZSx0KSxvJiZlKHIsbykscn19KCksaT10KDQpLGE9dCgxMCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocil7dmFyIHQ9dGhpcyxuPXIucG9zaXRpb24saT1yLmNvbG9yTWFwLGE9dm9pZCAwPT09aT97fTppO28odGhpcyxlKSx0aGlzLnBvc2l0aW9uKG4pLHRoaXMuY29sb3JNYXA9e30sT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj1hW2VdO3QuY29sb3JGYWNlKGUscil9KX1yZXR1cm4gbihlLG51bGwsW3trZXk6XCJGcm9tRmFjZXNcIix2YWx1ZTpmdW5jdGlvbihyKXt2YXIgdD1uZXcgaS5WZWN0b3IoWzAsMCwwXSksbz17fSxuPSEwLHU9ITEsYz12b2lkIDA7dHJ5e2Zvcih2YXIgcyxsPXJbU3ltYm9sLml0ZXJhdG9yXSgpOyEobj0ocz1sLm5leHQoKSkuZG9uZSk7bj0hMCl7dmFyIGY9cy52YWx1ZTtpZihmKXt2YXIgdj1uZXcgYS5GYWNlKGYpO3RbXCJzZXRcIit2LnZlY3Rvci5nZXRBeGlzKCkudG9VcHBlckNhc2UoKV0odi52ZWN0b3IuZ2V0TWFnbml0dWRlKCkpLG9bZi50b0xvd2VyQ2FzZSgpXT12LnRvU3RyaW5nKClbMF0udG9Mb3dlckNhc2UoKX19fWNhdGNoKGUpe3U9ITAsYz1lfWZpbmFsbHl7dHJ5eyFuJiZsLnJldHVybiYmbC5yZXR1cm4oKX1maW5hbGx5e2lmKHUpdGhyb3cgY319cmV0dXJuIG5ldyBlKHtwb3NpdGlvbjp0LnRvQXJyYXkoKSxjb2xvck1hcDpvfSl9fV0pLG4oZSxbe2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUoe3Bvc2l0aW9uOnRoaXMucG9zaXRpb24oKSxjb2xvck1hcDp0aGlzLmNvbG9yTWFwfSl9fSx7a2V5OlwicG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzLnZlY3Rvcj90aGlzLnZlY3Rvci50b0FycmF5KCk6dGhpcy52ZWN0b3I7dGhpcy52ZWN0b3I9bmV3IGkuVmVjdG9yKGUpfX0se2tleTpcImdldFhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlY3Rvci5nZXRYKCl9fSx7a2V5OlwiZ2V0WVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVjdG9yLmdldFkoKX19LHtrZXk6XCJnZXRaXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZWN0b3IuZ2V0WigpfX0se2tleTpcImlzQ29ybmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMz09PU9iamVjdC5rZXlzKHRoaXMuY29sb3JNYXApLmxlbmd0aH19LHtrZXk6XCJpc0VkZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAyPT09T2JqZWN0LmtleXModGhpcy5jb2xvck1hcCkubGVuZ3RofX0se2tleTpcImlzTWlkZGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PU9iamVjdC5rZXlzKHRoaXMuY29sb3JNYXApLmxlbmd0aH19LHtrZXk6XCJjb2xvcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY29sb3JNYXApLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gZS5jb2xvck1hcFtyXX0pfX0se2tleTpcImhhc0NvbG9yXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZT1lLnRvTG93ZXJDYXNlKCk7dmFyIHI9ITAsdD0hMSxvPXZvaWQgMDt0cnl7Zm9yKHZhciBuLGk9T2JqZWN0LmtleXModGhpcy5jb2xvck1hcClbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obj1pLm5leHQoKSkuZG9uZSk7cj0hMCl7dmFyIGE9bi52YWx1ZTtpZih0aGlzLmNvbG9yTWFwW2FdPT09ZSlyZXR1cm4hMH19Y2F0Y2goZSl7dD0hMCxvPWV9ZmluYWxseXt0cnl7IXImJmkucmV0dXJuJiZpLnJldHVybigpfWZpbmFsbHl7aWYodCl0aHJvdyBvfX1yZXR1cm4hMX19LHtrZXk6XCJoYXNGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLE9iamVjdC5rZXlzKHRoaXMuY29sb3JNYXApLmluY2x1ZGVzKGUpfX0se2tleTpcImNvbG9yRmFjZVwiLHZhbHVlOmZ1bmN0aW9uKGUscil7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLHI9ci50b0xvd2VyQ2FzZSgpLHRoaXMuY29sb3JNYXBbZV09cix0aGlzfX0se2tleTpcImdldENvbG9yT2ZGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLHRoaXMuY29sb3JNYXBbZV19fSx7a2V5OlwiZ2V0RmFjZU9mQ29sb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj10aGlzO3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSxPYmplY3Qua2V5cyh0aGlzLmNvbG9yTWFwKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiByLmNvbG9yTWFwW3RdPT09ZX0pfX0se2tleTpcImZhY2VzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5jb2xvck1hcCl9fSx7a2V5Olwicm90YXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXt2YXIgdD10aGlzO3RoaXMudmVjdG9yLnJvdGF0ZShlLHIpO3ZhciBvPXt9LG49ITAsaT0hMSx1PXZvaWQgMDt0cnl7Zm9yKHZhciBjLHM9T2JqZWN0LmtleXModGhpcy5jb2xvck1hcClbU3ltYm9sLml0ZXJhdG9yXSgpOyEobj0oYz1zLm5leHQoKSkuZG9uZSk7bj0hMCl7dmFyIGw9Yy52YWx1ZSxmPXRoaXMuY29sb3JNYXBbbF0sdj1uZXcgYS5GYWNlKGwpLG09di5yb3RhdGUoZSxyKS5ub3JtYWwoKS5qb2luKFwiIFwiKSxoPWEuRmFjZS5Gcm9tTm9ybWFsKG0pLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtvW2hdPWZ9fWNhdGNoKGUpe2k9ITAsdT1lfWZpbmFsbHl7dHJ5eyFuJiZzLnJldHVybiYmcy5yZXR1cm4oKX1maW5hbGx5e2lmKGkpdGhyb3cgdX19dGhpcy5jb2xvck1hcD17fSxPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbG9yRmFjZShlLG9bZV0pfSl9fV0pLGV9KCk7ci5DdWJpZT11fSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5GYWNlPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGk9dCg0KSxhPXtmcm9udDpcIjAgMCAxXCIscmlnaHQ6XCIxIDAgMFwiLHVwOlwiMCAxIDBcIixkb3duOlwiMCAtMSAwXCIsbGVmdDpcIi0xIDAgMFwiLGJhY2s6XCIwIDAgLTFcIn0sdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocil7aWYobyh0aGlzLGUpLFwic3RyaW5nXCIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcignXCJmYWNlXCIgbXVzdCBiZSBhIHN0cmluZyAocmVjZWl2ZWQ6ICcrcitcIilcIik7cj1yLnRvTG93ZXJDYXNlKCksdGhpcy52ZWN0b3I9aS5WZWN0b3IuRnJvbVN0cmluZyhhW3JdKX1yZXR1cm4gbihlLG51bGwsW3trZXk6XCJGcm9tTm9ybWFsXCIsdmFsdWU6ZnVuY3Rpb24ocil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHImJihyPWkuVmVjdG9yLkZyb21TdHJpbmcocikudG9BcnJheSgpKSxuZXcgZShlLmdldEZhY2UocikpfX0se2tleTpcImdldE5vcm1hbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBpLlZlY3Rvci5Gcm9tU3RyaW5nKGFbZV0pLnRvQXJyYXkoKX19LHtrZXk6XCJnZXRGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWkuVmVjdG9yLkZyb21TdHJpbmcoZSkudG9BcnJheSgpKTt2YXIgcj0hMCx0PSExLG89dm9pZCAwO3RyeXtmb3IodmFyIG4sdT1PYmplY3Qua2V5cyhhKVtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShuPXUubmV4dCgpKS5kb25lKTtyPSEwKXt2YXIgYz1uLnZhbHVlO2lmKGUuam9pbihcIiBcIik9PT1hW2NdKXJldHVybiBjfX1jYXRjaChlKXt0PSEwLG89ZX1maW5hbGx5e3RyeXshciYmdS5yZXR1cm4mJnUucmV0dXJuKCl9ZmluYWxseXtpZih0KXRocm93IG99fX19XSksbihlLFt7a2V5Olwibm9ybWFsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZWN0b3IudG9BcnJheSgpfX0se2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRGYWNlKHRoaXMubm9ybWFsKCkpfX0se2tleTpcIm9yaWVudFRvXCIsdmFsdWU6ZnVuY3Rpb24ocil7XCJzdHJpbmdcIj09dHlwZW9mIHImJihyPW5ldyBlKHIpKTt2YXIgdD1pLlZlY3Rvci5nZXRSb3RhdGlvbkZyb21Ob3JtYWxzKHRoaXMubm9ybWFsKCksci5ub3JtYWwoKSksbz10LmF4aXMsbj10LmFuZ2xlO3JldHVybiB0aGlzLnZlY3Rvci5yb3RhdGUobyxuKSx0aGlzfX0se2tleTpcInJvdGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUscil7cmV0dXJuIHRoaXMudmVjdG9yLnJvdGF0ZShlLHIpLHRoaXN9fV0pLGV9KCk7dS5GUk9OVD1uZXcgdShcIkZST05UXCIpLHUuUklHSFQ9bmV3IHUoXCJSSUdIVFwiKSx1LlVQPW5ldyB1KFwiVVBcIiksdS5ET1dOPW5ldyB1KFwiRE9XTlwiKSx1LkxFRlQ9bmV3IHUoXCJMRUZUXCIpLHUuQkFDSz1uZXcgdShcIkJBQ0tcIiksci5GYWNlPXV9LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUscil7aWYoIShlIGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBuKGUscil7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFyfHxcIm9iamVjdFwiIT10eXBlb2YgciYmXCJmdW5jdGlvblwiIT10eXBlb2Ygcj9lOnJ9ZnVuY3Rpb24gaShlLHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiByKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxyJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHIpOmUuX19wcm90b19fPXIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQ3Jvc3NTb2x2ZXI9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbz1yW3RdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19cmV0dXJuIGZ1bmN0aW9uKHIsdCxvKXtyZXR1cm4gdCYmZShyLnByb3RvdHlwZSx0KSxvJiZlKHIsbykscn19KCksdT10KDIpLGM9dCgxKSxzPXQoMCksbD1mdW5jdGlvbihlKXtyZXR1cm4gYy5SdWJpa3NDdWJlLnJldmVyc2VNb3ZlcyhlKX0sZj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKCl7dmFyIGU7byh0aGlzLHIpO2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkodCksYT0wO2E8dDthKyspaVthXT1hcmd1bWVudHNbYV07dmFyIHU9bih0aGlzLChlPXIuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YocikpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGkpKSk7cmV0dXJuIHUucGhhc2U9XCJjcm9zc1wiLHV9cmV0dXJuIGkocixlKSxhKHIsW3trZXk6XCJzb2x2ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0Q3Jvc3NFZGdlcygpLHI9ITAsdD0hMSxvPXZvaWQgMDt0cnl7Zm9yKHZhciBuLGk9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShuPWkubmV4dCgpKS5kb25lKTtyPSEwKXt2YXIgYT1uLnZhbHVlLHU9dGhpcy5fc29sdmUoe2VkZ2U6YX0pO3RoaXMucGFydGl0aW9ucy5wdXNoKHUpfX1jYXRjaChlKXt0PSEwLG89ZX1maW5hbGx5e3RyeXshciYmaS5yZXR1cm4mJmkucmV0dXJuKCl9ZmluYWxseXtpZih0KXRocm93IG99fXJldHVybiB0aGlzLnBhcnRpdGlvbnN9fSx7a2V5OlwiaXNTb2x2ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldENyb3NzRWRnZXMoKSxyPSEwLHQ9ITEsbz12b2lkIDA7dHJ5e2Zvcih2YXIgbixpPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obj1pLm5leHQoKSkuZG9uZSk7cj0hMCl7dmFyIGE9bi52YWx1ZTtpZighdGhpcy5pc0VkZ2VTb2x2ZWQoYSkpcmV0dXJuITF9fWNhdGNoKGUpe3Q9ITAsbz1lfWZpbmFsbHl7dHJ5eyFyJiZpLnJldHVybiYmaS5yZXR1cm4oKX1maW5hbGx5e2lmKHQpdGhyb3cgb319cmV0dXJuITB9fSx7a2V5OlwiaXNFZGdlU29sdmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwidVwiIT09ZX0pLHQ9ZS5mYWNlcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJ1cFwiIT09ZX0pLG89dFswXT09PXI7cmV0dXJuXCJ1XCI9PT1lLmdldENvbG9yT2ZGYWNlKFwidXBcIikmJm99fSx7a2V5OlwiX2dldENyb3NzRWRnZXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1YmUuZWRnZXMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGFzQ29sb3IoXCJ1XCIpfSl9fSx7a2V5OlwiX2dldENhc2VOdW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmVkZ2U7aWYoXCJ1XCI9PT1yLmdldENvbG9yT2ZGYWNlKFwidXBcIikpcmV0dXJuIDE7aWYoXCJ1XCI9PT1yLmdldENvbG9yT2ZGYWNlKFwiZG93blwiKSlyZXR1cm4gMjtpZihyLmZhY2VzKCkuaW5jbHVkZXMoXCJ1cFwiKSlyZXR1cm4gMztpZihyLmZhY2VzKCkuaW5jbHVkZXMoXCJkb3duXCIpKXJldHVybiA0O3ZhciB0PXIuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpLG89ci5nZXRGYWNlT2ZDb2xvcihyLmNvbG9ycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJ1XCIhPT1lfSkpLG49KDAscy5nZXREaXJlY3Rpb25Gcm9tRmFjZXMpKHQsbyx7dXA6XCJ1cFwifSk7cmV0dXJuXCJyaWdodFwiPT09bj81OlwibGVmdFwiPT09bj82OnZvaWQgMH19LHtrZXk6XCJfc29sdmVDYXNlMVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuZWRnZTtpZighdGhpcy5pc0VkZ2VTb2x2ZWQocikpe3ZhciB0PXIuZmFjZXMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwidXBcIiE9PWV9KTt0aGlzLm1vdmUodCtcIiBcIit0LHt1cHBlckNhc2U6ITB9KSx0aGlzLl9zb2x2ZUNhc2UyKHtlZGdlOnJ9KX19fSx7a2V5OlwiX3NvbHZlQ2FzZTJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmVkZ2UsdD10aGlzLl9jYXNlMUFuZDJIZWxwZXIoe2VkZ2U6cn0sMik7dGhpcy5tb3ZlKHQse3VwcGVyQ2FzZTohMH0pfX0se2tleTpcIl9zb2x2ZUNhc2UzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5lZGdlLHQ9dGhpcy5fY2FzZTNBbmQ0SGVscGVyKHtlZGdlOnJ9LDMpO3RoaXMubW92ZSh0LHt1cHBlckNhc2U6ITB9KSx0aGlzLl9zb2x2ZUNhc2U1KHtlZGdlOnJ9KX19LHtrZXk6XCJfc29sdmVDYXNlNFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuZWRnZSx0PSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLHIuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpLCgwLHMuZ2V0RmFjZU9mTW92ZSkoci5nZXRDb2xvck9mRmFjZShcImRvd25cIikpKTt0aGlzLm1vdmUodCx7dXBwZXJDYXNlOiEwfSk7dmFyIG89bChyLmdldEZhY2VPZkNvbG9yKFwidVwiKSk7dGhpcy5tb3ZlKG8se3VwcGVyQ2FzZTohMH0pLHRoaXMuX3NvbHZlQ2FzZTUoe2VkZ2U6cn0pfX0se2tleTpcIl9zb2x2ZUNhc2U1XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5lZGdlLHQ9dGhpcy5fY2FzZTVBbmQ2SGVscGVyKHtlZGdlOnJ9LDUpO3RoaXMubW92ZSh0LHt1cHBlckNhc2U6ITB9KX19LHtrZXk6XCJfc29sdmVDYXNlNlwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuZWRnZSx0PXRoaXMuX2Nhc2U1QW5kNkhlbHBlcih7ZWRnZTpyfSw2KTt0aGlzLm1vdmUodCx7dXBwZXJDYXNlOiEwfSl9fSx7a2V5OlwiX2Nhc2UxQW5kMkhlbHBlclwiLHZhbHVlOmZ1bmN0aW9uKGUscil7dmFyIHQ9ZS5lZGdlLG89MT09PXI/XCJ1cFwiOlwiZG93blwiLG49dC5mYWNlcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT1vfSksaT0oMCxzLmdldEZhY2VPZk1vdmUpKHQuZ2V0Q29sb3JPZkZhY2UobikpLGE9KDAscy5nZXRSb3RhdGlvbkZyb21UbykobyxuLGkpO2lmKDI9PT1yKXt2YXIgdT0oMCxzLmdldE1vdmVPZkZhY2UpKGkpO2ErPVwiIFwiK3UrXCIgXCIrdX1yZXR1cm4gYX19LHtrZXk6XCJfY2FzZTNBbmQ0SGVscGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXt2YXIgdD1lLmVkZ2Usbz10LmZhY2VzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4hW1widXBcIixcImRvd25cIl0uaW5jbHVkZXMoZSl9KTtyZXR1cm4gND09PXImJihvPWwobykpLG99fSx7a2V5OlwiX2Nhc2U1QW5kNkhlbHBlclwiLHZhbHVlOmZ1bmN0aW9uKGUscil7dmFyIHQ9ZS5lZGdlLG89dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwidVwiIT09ZX0pLG49dC5nZXRGYWNlT2ZDb2xvcihvKSxpPSgwLHMuZ2V0RmFjZU9mTW92ZSkobyksYT0oMCxzLmdldFJvdGF0aW9uRnJvbVRvKShcInVwXCIsbixpKSx1PSgwLHMuZ2V0TW92ZU9mRmFjZSkobik7cmV0dXJuIDY9PT1yJiYodT1sKHUpKSxsKGEpK1wiIFwiK3UrXCIgXCIrYX19LHtrZXk6XCJfZ2V0UGFydGl0aW9uQmVmb3JlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJue2VkZ2U6ZS5lZGdlLmNsb25lKCl9fX0se2tleTpcIl9nZXRQYXJ0aXRpb25BZnRlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybntlZGdlOmUuZWRnZX19fV0pLHJ9KHUuQmFzZVNvbHZlcik7ci5Dcm9zc1NvbHZlcj1mfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbihlLHIpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hcnx8XCJvYmplY3RcIiE9dHlwZW9mIHImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHI/ZTpyfWZ1bmN0aW9uIGkoZSxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2Ygcik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSxyKTplLl9fcHJvdG9fXz1yKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkYyTEJhc2VTb2x2ZXI9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbz1yW3RdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19cmV0dXJuIGZ1bmN0aW9uKHIsdCxvKXtyZXR1cm4gdCYmZShyLnByb3RvdHlwZSx0KSxvJiZlKHIsbykscn19KCksdT10KDIpLGM9dCgxKSxzPXQoMCksbD1mdW5jdGlvbihlKXtyZXR1cm4gYy5SdWJpa3NDdWJlLnJldmVyc2VNb3ZlcyhlKX0sZj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKCl7dmFyIGU7byh0aGlzLHIpO2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkodCksYT0wO2E8dDthKyspaVthXT1hcmd1bWVudHNbYV07dmFyIHU9bih0aGlzLChlPXIuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YocikpLmNhbGwuYXBwbHkoZSxbdGhpc10uY29uY2F0KGkpKSk7cmV0dXJuIHUucGhhc2U9XCJmMmxcIix1fXJldHVybiBpKHIsZSksYShyLFt7a2V5OlwiY29sb3JzTWF0Y2hcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPXQuY29sb3JzKCk7cmV0dXJuISghci5jb2xvcnMoKS5pbmNsdWRlcyhvWzBdKXx8IXIuY29sb3JzKCkuaW5jbHVkZXMob1sxXSkpfX0se2tleTpcImlzUGFpclNvbHZlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlO2lmKCF0aGlzLmlzUGFpck1hdGNoZWQoe2Nvcm5lcjpyLGVkZ2U6dH0pKXJldHVybiExO2lmKFwidXBcIiE9PXIuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpKXJldHVybiExO3ZhciBvPSEwLG49ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgYSx1PXQuY29sb3JzKClbU3ltYm9sLml0ZXJhdG9yXSgpOyEobz0oYT11Lm5leHQoKSkuZG9uZSk7bz0hMCl7dmFyIGM9YS52YWx1ZTtpZih0LmdldEZhY2VPZkNvbG9yKGMpIT09KDAscy5nZXRGYWNlT2ZNb3ZlKShjKSlyZXR1cm4hMX19Y2F0Y2goZSl7bj0hMCxpPWV9ZmluYWxseXt0cnl7IW8mJnUucmV0dXJuJiZ1LnJldHVybigpfWZpbmFsbHl7aWYobil0aHJvdyBpfX1yZXR1cm4hMH19LHtrZXk6XCJpc1BhaXJNYXRjaGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2U7aWYoIXRoaXMuY29sb3JzTWF0Y2goe2Nvcm5lcjpyLGVkZ2U6dH0pKXJldHVybiExO3ZhciBvPSEwLG49ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgYSx1PXQuY29sb3JzKClbU3ltYm9sLml0ZXJhdG9yXSgpOyEobz0oYT11Lm5leHQoKSkuZG9uZSk7bz0hMCl7dmFyIGM9YS52YWx1ZTtpZihyLmdldEZhY2VPZkNvbG9yKGMpIT09dC5nZXRGYWNlT2ZDb2xvcihjKSlyZXR1cm4hMX19Y2F0Y2goZSl7bj0hMCxpPWV9ZmluYWxseXt0cnl7IW8mJnUucmV0dXJuJiZ1LnJldHVybigpfWZpbmFsbHl7aWYobil0aHJvdyBpfX1yZXR1cm4hMH19LHtrZXk6XCJpc1BhaXJTZXBhcmF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTtpZighdGhpcy5jb2xvcnNNYXRjaCh7Y29ybmVyOnIsZWRnZTp0fSkpcmV0dXJuITE7aWYoW1widXBcIixcImRvd25cIl0uaW5jbHVkZXMoci5nZXRGYWNlT2ZDb2xvcihcInVcIikpKXJldHVybiExO2lmKCF0LmZhY2VzKCkuaW5jbHVkZXMoXCJkb3duXCIpKXJldHVybiExO3ZhciBvPXIuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInVcIiE9PWUmJlwiZG93blwiIT09ci5nZXRGYWNlT2ZDb2xvcihlKX0pO3JldHVyblwiZG93blwiPT09dC5nZXRGYWNlT2ZDb2xvcihvKSYmXCJiYWNrXCI9PT0oMCxzLmdldERpcmVjdGlvbkZyb21GYWNlcykoci5nZXRGYWNlT2ZDb2xvcihvKSx0LmdldEZhY2VPZkNvbG9yKHIuZ2V0Q29sb3JPZkZhY2UoXCJkb3duXCIpKSx7dXA6XCJ1cFwifSl9fSx7a2V5Olwic29sdmVNYXRjaGVkUGFpclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlO2lmKCF0aGlzLmlzUGFpck1hdGNoZWQoe2Nvcm5lcjpyLGVkZ2U6dH0pKXRocm93IG5ldyBFcnJvcihcIlBhaXIgaXMgbm90IG1hdGNoZWRcIik7dmFyIG89dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pLG49XCJsZWZ0XCI9PT0oMCxzLmdldERpcmVjdGlvbkZyb21GYWNlcykodC5nZXRGYWNlT2ZDb2xvcihvKSxyLmdldEZhY2VPZkNvbG9yKFwidVwiKSx7dXA6XCJkb3duXCJ9KSxpPSgwLHMuZ2V0RmFjZU9mTW92ZSkobyksYT1yLmdldEZhY2VPZkNvbG9yKG8pLHU9KDAscy5nZXRGYWNlRnJvbURpcmVjdGlvbikoaSxuP1wibGVmdFwiOlwicmlnaHRcIix7dXA6XCJkb3duXCJ9KSxjPSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLGEsdSksZj1uP2k6bChpKSx2PW4/XCJEUHJpbWVcIjpcIkRcIixtPVtjLGYsdixsKGYpXS5qb2luKFwiIFwiKTtyZXR1cm4gdGhpcy5tb3ZlKG0se3VwcGVyQ2FzZTohMH0pLG19fSx7a2V5Olwic29sdmVTZXBhcmF0ZWRQYWlyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2U7aWYoIXRoaXMuaXNQYWlyU2VwYXJhdGVkKHtjb3JuZXI6cixlZGdlOnR9KSl0aHJvdyBuZXcgRXJyb3IoXCJQYWlyIGlzIG5vdCBzZXBhcmF0ZWRcIik7dmFyIG89dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pLG49XCJMRUZUXCI9PT0oMCxzLmdldERpcmVjdGlvbkZyb21GYWNlcykoci5nZXRGYWNlT2ZDb2xvcihcInVcIiksdC5nZXRGYWNlT2ZDb2xvcihvKSx7dXA6XCJkb3duXCJ9KS50b1VwcGVyQ2FzZSgpLGk9ci5nZXRGYWNlT2ZDb2xvcihcInVcIiksYT0oMCxzLmdldEZhY2VPZk1vdmUpKG8pLHU9KDAscy5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsaSxhKSxjPSgwLHMuZ2V0TW92ZU9mRmFjZSkoYSk7Yz1uP2woYyk6Yzt2YXIgZj1uP1wiRFByaW1lXCI6XCJEXCIsdj1bdSxjLGYsbChjKV0uam9pbihcIiBcIik7cmV0dXJuIHRoaXMubW92ZSh2LHt1cHBlckNhc2U6ITB9KSx2fX0se2tleTpcIl9nZXRQYXJ0aXRpb25CZWZvcmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTtyZXR1cm57Y29ybmVyOnIuY2xvbmUoKSxlZGdlOnQuY2xvbmUoKX19fSx7a2V5OlwiX2dldFBhcnRpdGlvbkFmdGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJue2Nvcm5lcjplLmNvcm5lcixlZGdlOmUuZWRnZX19fV0pLHJ9KHUuQmFzZVNvbHZlcik7ci5GMkxCYXNlU29sdmVyPWZ9LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgcj0wLHQ9QXJyYXkoZS5sZW5ndGgpO3I8ZS5sZW5ndGg7cisrKXRbcl09ZVtyXTtyZXR1cm4gdH1yZXR1cm4gQXJyYXkuZnJvbShlKX1mdW5jdGlvbiBuKGUscil7aWYoIShlIGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUscil7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFyfHxcIm9iamVjdFwiIT10eXBlb2YgciYmXCJmdW5jdGlvblwiIT10eXBlb2Ygcj9lOnJ9ZnVuY3Rpb24gYShlLHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiByKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxyJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHIpOmUuX19wcm90b19fPXIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuRjJMU29sdmVyPXZvaWQgMDt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGM9dCgxKSxzPXQoMTIpLGw9dCgzNSksZj10KDM2KSx2PXQoMzcpLG09dCgwKSxoPWZ1bmN0aW9uKGUpe3JldHVybiBjLlJ1Ymlrc0N1YmUucmV2ZXJzZU1vdmVzKGUpfSxwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIoKXt2YXIgZTtuKHRoaXMscik7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbz1BcnJheSh0KSxhPTA7YTx0O2ErKylvW2FdPWFyZ3VtZW50c1thXTt2YXIgdT1pKHRoaXMsKGU9ci5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQobykpKTtyZXR1cm4gdS5zdWJDYXNlT3B0aW9ucz1PYmplY3QuYXNzaWduKHUub3B0aW9ucyx7X292ZXJyaWRlQWZ0ZXJFYWNoOiEwfSksdX1yZXR1cm4gYShyLGUpLHUocixbe2tleTpcInNvbHZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLnBhcnRpdGlvbnM9W10sdGhpcy5nZXRBbGxQYWlycygpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIHQ9ci5jb3JuZXIsbz1yLmVkZ2Usbj1lLl9zb2x2ZSh7Y29ybmVyOnQsZWRnZTpvfSk7ZS5wYXJ0aXRpb25zLnB1c2gobil9KSx0aGlzLnBhcnRpdGlvbnN9fSx7a2V5OlwiaXNTb2x2ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0QWxsUGFpcnMoKSxyPSEwLHQ9ITEsbz12b2lkIDA7dHJ5e2Zvcih2YXIgbixpPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obj1pLm5leHQoKSkuZG9uZSk7cj0hMCl7dmFyIGE9bi52YWx1ZTtpZighdGhpcy5pc1BhaXJTb2x2ZWQoYSkpcmV0dXJuITF9fWNhdGNoKGUpe3Q9ITAsbz1lfWZpbmFsbHl7dHJ5eyFyJiZpLnJldHVybiYmaS5yZXR1cm4oKX1maW5hbGx5e2lmKHQpdGhyb3cgb319cmV0dXJuITB9fSx7a2V5OlwiZ2V0QWxsUGFpcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY3ViZS5jb3JuZXJzKCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc0NvbG9yKFwidVwiKX0pLHI9dGhpcy5jdWJlLmVkZ2VzKCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLmhhc0NvbG9yKFwidVwiKSYmIWUuaGFzQ29sb3IoXCJkXCIpfSksdD1bXSxvPSEwLG49ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgYSx1PXJbU3ltYm9sLml0ZXJhdG9yXSgpOyEobz0oYT11Lm5leHQoKSkuZG9uZSk7bz0hMCkhZnVuY3Rpb24oKXt2YXIgcj1hLnZhbHVlLG89ZS5maW5kKGZ1bmN0aW9uKGUpe3ZhciB0PXIuY29sb3JzKCk7cmV0dXJuIGUuaGFzQ29sb3IodFswXSkmJmUuaGFzQ29sb3IodFsxXSl9KTt0LnB1c2goe2VkZ2U6cixjb3JuZXI6b30pfSgpfWNhdGNoKGUpe249ITAsaT1lfWZpbmFsbHl7dHJ5eyFvJiZ1LnJldHVybiYmdS5yZXR1cm4oKX1maW5hbGx5e2lmKG4pdGhyb3cgaX19cmV0dXJuIHR9fSx7a2V5OlwiX2dldENhc2VOdW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTtpZihyLmZhY2VzKCkuaW5jbHVkZXMoXCJkb3duXCIpKXtpZih0LmZhY2VzKCkuaW5jbHVkZXMoXCJkb3duXCIpKXJldHVybiAxO2lmKCF0LmZhY2VzKCkuaW5jbHVkZXMoXCJkb3duXCIpJiYhdC5mYWNlcygpLmluY2x1ZGVzKFwidXBcIikpcmV0dXJuIDJ9aWYoci5mYWNlcygpLmluY2x1ZGVzKFwidXBcIikpe2lmKHQuZmFjZXMoKS5pbmNsdWRlcyhcImRvd25cIikpcmV0dXJuIDM7aWYoIXQuZmFjZXMoKS5pbmNsdWRlcyhcImRvd25cIikmJiF0LmZhY2VzKCkuaW5jbHVkZXMoXCJ1cFwiKSlyZXR1cm4gNH10aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBhIHRvcCBsZXZlbCBGMkwgY2FzZVwiKX19LHtrZXk6XCJfc29sdmVDYXNlMVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlLG89bmV3IGwuQ2FzZTFTb2x2ZXIodGhpcy5jdWJlLHRoaXMuc3ViQ2FzZU9wdGlvbnMpLG49by5zb2x2ZSh7Y29ybmVyOnIsZWRnZTp0fSk7dGhpcy50b3RhbE1vdmVzPW4ubW92ZXMsdGhpcy5wYXJ0aXRpb24uY2FzZU51bWJlcj1bdGhpcy5wYXJ0aXRpb24uY2FzZU51bWJlcixuLmNhc2VOdW1iZXJdfX0se2tleTpcIl9zb2x2ZUNhc2UyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2Usbz1uZXcgZi5DYXNlMlNvbHZlcih0aGlzLmN1YmUsdGhpcy5zdWJDYXNlT3B0aW9ucyksbj1vLnNvbHZlKHtjb3JuZXI6cixlZGdlOnR9KTt0aGlzLnRvdGFsTW92ZXM9bi5tb3Zlcyx0aGlzLnBhcnRpdGlvbi5jYXNlTnVtYmVyPVt0aGlzLnBhcnRpdGlvbi5jYXNlTnVtYmVyLG4uY2FzZU51bWJlcl19fSx7a2V5OlwiX3NvbHZlQ2FzZTNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPW5ldyB2LkNhc2UzU29sdmVyKHRoaXMuY3ViZSx0aGlzLnN1YkNhc2VPcHRpb25zKSxuPW8uc29sdmUoe2Nvcm5lcjpyLGVkZ2U6dH0pO3RoaXMudG90YWxNb3Zlcz1uLm1vdmVzLHRoaXMucGFydGl0aW9uLmNhc2VOdW1iZXI9W3RoaXMucGFydGl0aW9uLmNhc2VOdW1iZXIsbi5jYXNlTnVtYmVyXX19LHtrZXk6XCJfc29sdmVDYXNlNFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlO2lmKCF0aGlzLmlzUGFpclNvbHZlZCh7Y29ybmVyOnIsZWRnZTp0fSkpe3ZhciBuPXZvaWQgMDtuPXIuZmFjZXMoKS5pbmNsdWRlcyh0LmZhY2VzKClbMF0pJiZyLmZhY2VzKCkuaW5jbHVkZXModC5mYWNlcygpWzFdKT9uZXcgbC5DYXNlMVNvbHZlcih0aGlzLmN1YmUsdGhpcy5zdWJDYXNlT3B0aW9ucyk6bmV3IGYuQ2FzZTJTb2x2ZXIodGhpcy5jdWJlLHRoaXMuc3ViQ2FzZU9wdGlvbnMpO3ZhciBpPXIuZmFjZXMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJ1cFwiIT09ZX0pLGE9KDAsbS5nZXREaXJlY3Rpb25Gcm9tRmFjZXMpKGlbMF0saVsxXSx7dXA6XCJkb3duXCJ9KSx1PVwicmlnaHRcIj09PWE/aVsxXTppWzBdO3RoaXMubW92ZSh1K1wiIEQgXCIraCh1KSx7dXBwZXJDYXNlOiEwfSk7dmFyIGM9bi5zb2x2ZSh7Y29ybmVyOnIsZWRnZTp0fSk7dGhpcy5wYXJ0aXRpb24uY2FzZU51bWJlcj1bdGhpcy5wYXJ0aXRpb24uY2FzZU51bWJlcixjLmNhc2VOdW1iZXJdLHRoaXMudG90YWxNb3Zlcz1bXS5jb25jYXQobyh0aGlzLnRvdGFsTW92ZXMpLG8oYy5tb3ZlcykpfX19XSkscn0ocy5GMkxCYXNlU29sdmVyKTtyLkYyTFNvbHZlcj1wfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIsdCl7cmV0dXJuIHIgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHt2YWx1ZTp0LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVtyXT10LGV9ZnVuY3Rpb24gbihlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHIpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hcnx8XCJvYmplY3RcIiE9dHlwZW9mIHImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHI/ZTpyfWZ1bmN0aW9uIGEoZSxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2Ygcik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSxyKTplLl9fcHJvdG9fXz1yKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLk9MTFNvbHZlcj12b2lkIDA7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7dmFyIHQ9W10sbz0hMCxuPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIGEsdT1lW1N5bWJvbC5pdGVyYXRvcl0oKTshKG89KGE9dS5uZXh0KCkpLmRvbmUpJiYodC5wdXNoKGEudmFsdWUpLCFyfHx0Lmxlbmd0aCE9PXIpO289ITApO31jYXRjaChlKXtuPSEwLGk9ZX1maW5hbGx5e3RyeXshbyYmdS5yZXR1cm4mJnUucmV0dXJuKCl9ZmluYWxseXtpZihuKXRocm93IGl9fXJldHVybiB0fXJldHVybiBmdW5jdGlvbihyLHQpe2lmKEFycmF5LmlzQXJyYXkocikpcmV0dXJuIHI7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChyKSlyZXR1cm4gZShyLHQpO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpfX0oKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbz1yW3RdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19cmV0dXJuIGZ1bmN0aW9uKHIsdCxvKXtyZXR1cm4gdCYmZShyLnByb3RvdHlwZSx0KSxvJiZlKHIsbykscn19KCkscz0odCgxKSx0KDIpKSxsPXQoMCksZj1cIjAwMDAwMDAwXCIsdj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKCl7dmFyIGUsdDtuKHRoaXMscik7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsdT1BcnJheShhKSxjPTA7YzxhO2MrKyl1W2NdPWFyZ3VtZW50c1tjXTt2YXIgcz1pKHRoaXMsKGU9ci5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQodSkpKTtyZXR1cm4gcy5waGFzZT1cIm9sbFwiLHMuYWxnb3JpdGhtcz0odD17fSxvKHQsZixcIlwiKSxvKHQsXCIyMTAwMDExMFwiLFwiRiBSIFUgUlByaW1lIFVQcmltZSBGUHJpbWVcIiksbyh0LFwiMjEyMTEwMTBcIixcIkYgUiBVIFJQcmltZSBVUHJpbWUgRlByaW1lIEYgUiBVIFJQcmltZSBVUHJpbWUgRlByaW1lXCIpLG8odCxcIjEwMjAxMDIwXCIsXCJSIFUyIFJQcmltZSBVUHJpbWUgUiBVIFJQcmltZSBVUHJpbWUgUiBVUHJpbWUgUlByaW1lXCIpLG8odCxcIjAxMTEyMDAwXCIsXCJGIFUgUiBVUHJpbWUgUlByaW1lIEZQcmltZVwiKSxvKHQsXCIxMTEwMjEyMFwiLFwiRiBVIFIgVVByaW1lIFJQcmltZSBVIFIgVVByaW1lIFJQcmltZSBGUHJpbWVcIiksbyh0LFwiMTEyMTAwMDBcIixcIlJQcmltZSBVUHJpbWUgRlByaW1lIFUgRiBSXCIpLG8odCxcIjExMTAyMDIxXCIsXCJGUHJpbWUgTFByaW1lIFVQcmltZSBMIFUgTFByaW1lIFVQcmltZSBMIFUgRlwiKSxvKHQsXCIxMDAxMTExMFwiLFwiUiBMMiBCUHJpbWUgTCBCUHJpbWUgTFByaW1lIEIyIEwgQlByaW1lIEwgUlByaW1lXCIpLG8odCxcIjAwMjAyMTIxXCIsXCJMUHJpbWUgUjIgQiBSUHJpbWUgQiBSIEIyIFJQcmltZSBCIFJQcmltZSBMXCIpLG8odCxcIjAxMTExMTExXCIsXCJGIFUgUiBVUHJpbWUgUlByaW1lIEZQcmltZSBMIEYgVSBGUHJpbWUgVVByaW1lIExQcmltZVwiKSxvKHQsXCIyMTIxMjEwMVwiLFwiRiBVIFIgVVByaW1lIFJQcmltZSBGUHJpbWUgUiBCIFUgQlByaW1lIFVQcmltZSBSUHJpbWVcIiksbyh0LFwiMjEyMTExMTFcIixcIkYgUiBVIFJQcmltZSBVUHJpbWUgRlByaW1lIEIgVSBMIFVQcmltZSBMUHJpbWUgQlByaW1lXCIpLG8odCxcIjIwMjAxMDEwXCIsXCJSIFUyIFIyIFVQcmltZSBSMiBVUHJpbWUgUjIgVTIgUlwiKSxvKHQsXCIwMTEwMTExMFwiLFwiUiBCIFJQcmltZSBMIFUgTFByaW1lIFVQcmltZSBSIEJQcmltZSBSUHJpbWVcIiksbyh0LFwiMjEwMDIxMjBcIixcIkxQcmltZSBCUHJpbWUgTCBSUHJpbWUgVVByaW1lIFIgVSBMUHJpbWUgQiBMXCIpLG8odCxcIjIxMDAxMTAwXCIsXCJSUHJpbWUgRiBSIFUgUlByaW1lIFVQcmltZSBGUHJpbWUgVSBSXCIpLG8odCxcIjAxMDAwMTAwXCIsXCJSIFUgUlByaW1lIFVQcmltZSBNUHJpbWUgVSBSIFVQcmltZSByUHJpbWVcIiksbyh0LFwiMDEwMTAxMDFcIixcIk0gVSBSIFUgUlByaW1lIFVQcmltZSBNMiBVIFIgVVByaW1lIHJQcmltZVwiKSxvKHQsXCIxMDIxMTAyMVwiLFwiRiBSIFUgUlByaW1lIFVQcmltZSBSIFUgUlByaW1lIFVQcmltZSBGUHJpbWUgQiBVIEwgVVByaW1lIExQcmltZSBCUHJpbWVcIiksbyh0LFwiMTEwMDAxMjBcIixcIlIgVSBSUHJpbWUgVVByaW1lIFJQcmltZSBGIFIgRlByaW1lXCIpLG8odCxcIjEwMDAwMDIwXCIsXCJMUHJpbWUgQlByaW1lIFIgQiBMIEJQcmltZSBSUHJpbWUgQlwiKSxvKHQsXCIyMDAwMTAwMFwiLFwiQiBMUHJpbWUgQlByaW1lIFIgQiBMIEJQcmltZSBSUHJpbWVcIiksbyh0LFwiMDAxMTIwMDFcIixcIlJQcmltZSBVUHJpbWUgUlByaW1lIEYgUiBGUHJpbWUgVSBSXCIpLG8odCxcIjIxMTEyMTExXCIsXCJSIFUyIFJQcmltZSBSUHJpbWUgRiBSIEZQcmltZSBVMiBSUHJpbWUgRiBSIEZQcmltZVwiKSxvKHQsXCIxMDAwMjEwMVwiLFwiUiBVMiBSUHJpbWUgUlByaW1lIEYgUiBGUHJpbWUgUiBVMiBSUHJpbWVcIiksbyh0LFwiMjExMTAxMDFcIixcIk0gVSBSIFUgUlByaW1lIFVQcmltZSBNUHJpbWUgUlByaW1lIEYgUiBGUHJpbWVcIiksbyh0LFwiMTEyMTIwMTBcIixcIkYgTFByaW1lIFUyIEwgVTIgTCBGMiBMUHJpbWUgRlwiKSxvKHQsXCIwMTExMDAyMFwiLFwiUiBVIFJQcmltZSBVIFIgVVByaW1lIFJQcmltZSBVUHJpbWUgUlByaW1lIEYgUiBGUHJpbWVcIiksbyh0LFwiMTAwMTIxMDBcIixcIlJQcmltZSBVUHJpbWUgUiBVUHJpbWUgUlByaW1lIFUgUiBVIFIgQlByaW1lIFJQcmltZSBCXCIpLG8odCxcIjEwMTEyMDIxXCIsXCJSUHJpbWUgVVByaW1lIFIgVVByaW1lIFJQcmltZSBVIEZQcmltZSBVIEYgUlwiKSxvKHQsXCIwMTExMDEyMVwiLFwiRiBVIFIgVVByaW1lIFJQcmltZSBGUHJpbWUgRiBVIEZQcmltZSBVUHJpbWUgRlByaW1lIEwgRiBMUHJpbWVcIiksbyh0LFwiMDExMTIxMDFcIixcIkYgVSBSIFVQcmltZSBSUHJpbWUgRlByaW1lIEIgVSBCUHJpbWUgVVByaW1lIFNQcmltZSBVIEIgVVByaW1lIGJQcmltZVwiKSxvKHQsXCIyMTIxMjAwMFwiLFwibFByaW1lIFUyIEwgVSBMUHJpbWUgVSBsXCIpLG8odCxcIjAxMjEyMDIwXCIsXCJyIFUgUlByaW1lIFUgUiBVMiByUHJpbWVcIiksbyh0LFwiMDAyMDIwMjBcIixcIlIgVSBSUHJpbWUgVSBSIFUyIFJQcmltZVwiKSxvKHQsXCIxMDEwMTAwMFwiLFwiUlByaW1lIFVQcmltZSBSIFVScHJpbWUgUlByaW1lIFUyIFJcIiksbyh0LFwiMDEwMDEwMjFcIixcIlJQcmltZSBVIFIgVTIgUlByaW1lIFVQcmltZSBGUHJpbWUgVSBGIFUgUlwiKSxvKHQsXCIxMDIwMDEwMVwiLFwiUiBVUHJpbWUgUlByaW1lIFUyIFIgVSBCIFVQcmltZSBCUHJpbWUgVVByaW1lIFJQcmltZVwiKSxvKHQsXCIyMTEwMjAxMVwiLFwiciBVIFJQcmltZSBVIFIgVVByaW1lIFJQcmltZSBVIFIgVTIgclByaW1lXCIpLG8odCxcIjIxMTEyMDEwXCIsXCJsUHJpbWUgVVByaW1lIEwgVVByaW1lIExQcmltZSBVIEwgVVByaW1lIExQcmltZSBVMiBsXCIpLG8odCxcIjExMTAwMDExXCIsXCJyIFUyIFJQcmltZSBVUHJpbWUgUiBVUHJpbWUgclByaW1lXCIpLG8odCxcIjExMDEyMDAwXCIsXCJGIFIgVVByaW1lIFJQcmltZSBVUHJpbWUgUiBVIFJQcmltZSBGUHJpbWVcIiksbyh0LFwiMTEwMDEwMTFcIixcImxQcmltZSBVUHJpbWUgTCBVUHJpbWUgTFByaW1lIFUyIGxcIiksbyh0LFwiMDEwMTAwMDBcIixcInIgVSBSUHJpbWUgVVByaW1lIE0gVSBSIFVQcmltZSBSUHJpbWVcIiksbyh0LFwiMDEwMDIxMTBcIixcIlIgVSBSUHJpbWUgVVByaW1lIEJQcmltZSBSUHJpbWUgRiBSIEZQcmltZSBCXCIpLG8odCxcIjAxMjAyMTIwXCIsXCJMIEZQcmltZSBMUHJpbWUgVVByaW1lIEwgRiBMUHJpbWUgRlByaW1lIFUgRlwiKSxvKHQsXCIxMTAwMTExMFwiLFwiUlByaW1lIEYgUiBVIFJQcmltZSBGUHJpbWUgUiBGIFVQcmltZSBGUHJpbWVcIiksbyh0LFwiMTAyMDAwMDBcIixcIlIyIEQgUlByaW1lIFUyIFIgRFByaW1lIFJQcmltZSBVMiBSUHJpbWVcIiksbyh0LFwiMjAxMTIwMTFcIixcIlJQcmltZSBVMiBSMiBVIFJQcmltZSBVIFIgVTIgQlByaW1lIFJQcmltZSBCXCIpLG8odCxcIjEwMDAwMTIxXCIsXCJSIFUgQlByaW1lIFVQcmltZSBSUHJpbWUgVSBSIEIgUlByaW1lXCIpLG8odCxcIjExMDAwMDIxXCIsXCJSUHJpbWUgVVByaW1lIEYgVSBSIFVQcmltZSBSUHJpbWUgRlByaW1lIFJcIiksbyh0LFwiMDExMDAxMjBcIixcIkwgRlByaW1lIExQcmltZSBVUHJpbWUgTCBVIEYgVVByaW1lIExQcmltZVwiKSxvKHQsXCIxMTExMjAyMFwiLFwiUlByaW1lIEYgUjIgRlByaW1lIFUyIEZQcmltZSBVMiBGIFJQcmltZVwiKSxvKHQsXCIyMDExMDEwMFwiLFwiQlByaW1lIFJQcmltZSBCIExQcmltZSBCUHJpbWUgUiBSIEJQcmltZSBSUHJpbWUgQjIgTFwiKSxvKHQsXCIyMDEwMDEwMVwiLFwiQiBMIEJQcmltZSBSIEIgTDIgQiBMIEIyIFJQcmltZVwiKSxvKHQsXCIwMTEwMTAxMVwiLFwiRlByaW1lIFVQcmltZSBGIEwgRlByaW1lIExQcmltZSBVIEwgRiBMUHJpbWVcIiksbyh0LFwiMjEwMTIwMjBcIixcIkYgVSBGUHJpbWUgUlByaW1lIEYgUiBVUHJpbWUgUlByaW1lIEZQcmltZSBSXCIpLHQpLHN9cmV0dXJuIGEocixlKSxjKHIsW3trZXk6XCJpc1NvbHZlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T2xsU3RyaW5nKCk9PT1mfX0se2tleTpcInNvbHZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc29sdmUoKX19LHtrZXk6XCJfZ2V0Q2FzZU51bWJlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T2xsU3RyaW5nKCl9fSx7a2V5OlwiX3NvbHZlQ2FzZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPXRoaXMuZmluZFBhdHRlcm4oZSksdD10aGlzLmdldEFsZ29yaXRobShyKSxvPXRoaXMuX2dldEZyb250RmFjZShlLHIpO3RoaXMubW92ZSh0LHtvcmllbnRhdGlvbjp7dXA6XCJkb3duXCIsZnJvbnQ6b319KX19LHtrZXk6XCJnZXRPbGxTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMscj1bXTtyZXR1cm4gdGhpcy5fZ2V0T2xsQ3ViaWVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz1lLl9nZXRDdWJpZU9yaWVudGF0aW9uKHQpO3IucHVzaChvKX0pLHIuam9pbihcIlwiKX19LHtrZXk6XCJmaW5kUGF0dGVyblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXRoaXMuZ2V0T2xsU3RyaW5nKCkpO2Zvcih2YXIgcj0wO3I8NDtyKyspe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmFsZ29yaXRobXNbZV0pcmV0dXJuIGU7ZT10aGlzLl9yb3RhdGVPbGxTdHJpbmdMZWZ0KGUpfXRocm93IG5ldyBFcnJvcignTm8gcGF0dGVybiBmb3VuZCBmb3Igb2xsIHN0cmluZyBcIicrZSsnXCInKX19LHtrZXk6XCJnZXRBbGdvcml0aG1cIix2YWx1ZTpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmdldFBhdHRlcm4oZSkpLHZvaWQgMD09PXRoaXMuYWxnb3JpdGhtc1tlXSl0aHJvdyBuZXcgRXJyb3IoJ05vIGFsZ29yaXRobSBmb3VuZCBmb3IgcGF0dGVybiBcIicrZSsnXCInKTtyZXR1cm4gdGhpcy5hbGdvcml0aG1zW2VdfX0se2tleTpcIl9nZXRPbGxDdWJpZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuW1tcImZyb250XCIsXCJkb3duXCIsXCJyaWdodFwiXSxbXCJmcm9udFwiLFwiZG93blwiXSxbXCJmcm9udFwiLFwiZG93blwiLFwibGVmdFwiXSxbXCJsZWZ0XCIsXCJkb3duXCJdLFtcImxlZnRcIixcImRvd25cIixcImJhY2tcIl0sW1wiYmFja1wiLFwiZG93blwiXSxbXCJiYWNrXCIsXCJkb3duXCIsXCJyaWdodFwiXSxbXCJyaWdodFwiLFwiZG93blwiXV0ubWFwKGZ1bmN0aW9uKHIpe3JldHVybiBlLmN1YmUuZ2V0Q3ViaWUocil9KX19LHtrZXk6XCJfZ2V0Q3ViaWVPcmllbnRhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKFwiZFwiPT09ZS5nZXRDb2xvck9mRmFjZShcImRvd25cIikpcmV0dXJuIDA7aWYoZS5pc0VkZ2UoKSlyZXR1cm4gMTt2YXIgcj1lLmZhY2VzKCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09ZX0pLHQ9dShyLDIpLG89dFswXSxuPXRbMV0saT0oMCxsLmdldERpcmVjdGlvbkZyb21GYWNlcykobyxuLHt1cDpcImRvd25cIn0pLGE9XCJyaWdodFwiPT09aT9uOm87cmV0dXJuXCJkXCI9PT1lLmdldENvbG9yT2ZGYWNlKGEpPzE6Mn19LHtrZXk6XCJfZ2V0RnJvbnRGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXtmb3IodmFyIHQ9W1wiZnJvbnRcIixcImxlZnRcIixcImJhY2tcIixcInJpZ2h0XCJdLG89MDtvPDQ7bysrKXtpZihlPT09cilyZXR1cm4gdFtvXTtlPXRoaXMuX3JvdGF0ZU9sbFN0cmluZ0xlZnQoZSl9dGhyb3cgbmV3IEVycm9yKCdPTEwgc3RyaW5nIFwiJytlKydcIiBkb2VzIG5vdCByZXNvbHZlIHRvIHRoZSBwYXR0ZXJuIFwiJytyKydcIicpfX0se2tleTpcIl9yb3RhdGVPbGxTdHJpbmdMZWZ0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2xpY2UoMikrZS5zbGljZSgwLDIpfX0se2tleTpcIl9nZXRQYXJ0aXRpb25CZWZvcmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE9sbFN0cmluZygpfX0se2tleTpcIl9nZXRQYXJ0aXRpb25BZnRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fV0pLHJ9KHMuQmFzZVNvbHZlcik7ci5PTExTb2x2ZXI9dn0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsdD1BcnJheShlLmxlbmd0aCk7cjxlLmxlbmd0aDtyKyspdFtyXT1lW3JdO3JldHVybiB0fXJldHVybiBBcnJheS5mcm9tKGUpfWZ1bmN0aW9uIG4oZSxyLHQpe3JldHVybiByIGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7dmFsdWU6dCxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbcl09dCxlfWZ1bmN0aW9uIGkoZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEoZSxyKXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByP2U6cn1mdW5jdGlvbiB1KGUscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUscik6ZS5fX3Byb3RvX189cil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5QTExTb2x2ZXI9dm9pZCAwO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbz1yW3RdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19cmV0dXJuIGZ1bmN0aW9uKHIsdCxvKXtyZXR1cm4gdCYmZShyLnByb3RvdHlwZSx0KSxvJiZlKHIsbykscn19KCkscz10KDIpLGw9dCgwKSxmPVwiMCAwIDAgMCAwIDAgMCAwXCIsdj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKCl7dmFyIGUsdDtpKHRoaXMscik7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGgsdT1BcnJheShvKSxjPTA7YzxvO2MrKyl1W2NdPWFyZ3VtZW50c1tjXTt2YXIgcz1hKHRoaXMsKGU9ci5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSkuY2FsbC5hcHBseShlLFt0aGlzXS5jb25jYXQodSkpKTtyZXR1cm4gcy5waGFzZT1cInBsbFwiLHMuYWxnb3JpdGhtcz0odD17fSxuKHQsZixcIlwiKSxuKHQsXCIyIC0xIDEgLTEgMSAwIDAgMlwiLFwiUjIgRjIgUlByaW1lIEJQcmltZSBSIEYyIFJQcmltZSBCIFJQcmltZVwiKSxuKHQsXCItMSAxIC0xIDIgMiAwIDAgMVwiLFwiUiBCUHJpbWUgUiBGMiBSUHJpbWUgQiBSIEYyIFIyXCIpLG4odCxcIjEgLTEgMiAyIDAgMCAxIC0xXCIsXCJSIFVQcmltZSBSIFUgUiBVIFIgVVByaW1lIFJQcmltZSBVUHJpbWUgUjJcIiksbih0LFwiLTEgMSAtMSAxIDAgMCAyIDJcIixcIlIyIFUgUiBVIFJQcmltZSBVUHJpbWUgUlByaW1lIFVQcmltZSBSUHJpbWUgVSBSUHJpbWVcIiksbih0LFwiMiAyIDIgMiAyIDIgMiAyXCIsXCJNIE0gVSBNIE0gVTIgTSBNIFUgTSBNXCIpLG4odCxcIjAgMSAxIDEgMSAwIDIgMlwiLFwiUiBVIFJQcmltZSBVUHJpbWUgUlByaW1lIEYgUjIgVVByaW1lIFJQcmltZSBVUHJpbWUgUiBVIFJQcmltZSBGUHJpbWVcIiksbih0LFwiMSAwIDIgMCAxIDAgMCAwXCIsXCJSIFUyIFJQcmltZSBVUHJpbWUgUiBVMiBMUHJpbWUgVSBSUHJpbWUgVVByaW1lIExcIiksbih0LFwiMCAyIDIgMCAxIDEgMSAxXCIsXCJGIFIgVVByaW1lIFJQcmltZSBVUHJpbWUgUiBVIFJQcmltZSBGUHJpbWUgUiBVIFJQcmltZSBVUHJpbWUgUlByaW1lIEYgUiBGUHJpbWVcIiksbih0LFwiMSAtMSAtMSAyIC0xIC0xIDEgMFwiLFwiUlByaW1lIFUyIFIgVTIgUlByaW1lIEYgUiBVIFJQcmltZSBVUHJpbWUgUlByaW1lIEZQcmltZSBSMlwiKSxuKHQsXCIwIDEgLTEgLTEgMiAtMSAtMSAxXCIsXCJSIFVQcmltZSBSUHJpbWUgVVByaW1lIFIgVSBSIEQgUlByaW1lIFVQcmltZSBSIERQcmltZSBSUHJpbWUgVTIgUlByaW1lXCIpLG4odCxcIjAgMiAtMSAtMSAtMSAtMSAyIDBcIixcIlJQcmltZSBVIFJQcmltZSBVUHJpbWUgQlByaW1lIEQgQlByaW1lIERQcmltZSBCMiBSUHJpbWUgQlByaW1lIFIgQiBSXCIpLG4odCxcIjIgLTEgLTEgLTEgLTEgMiAwIDBcIixcIlJQcmltZSBVUHJpbWUgRlByaW1lIFIgVSBSUHJpbWUgVVByaW1lIFJQcmltZSBGIFIyIFVQcmltZSBSUHJpbWUgVVByaW1lIFIgVSBSUHJpbWUgVSBSXCIpLG4odCxcIi0xIDIgMiAyIC0xIDIgMCAyXCIsXCJMIFUgTFByaW1lIEIyIHVQcmltZSBCIFVQcmltZSBCUHJpbWUgVSBCUHJpbWUgdSBCMlwiKSxuKHQsXCIyIC0xIDIgMCAyIC0xIDIgMlwiLFwiUlByaW1lIFVQcmltZSBSIEIyIHUgQlByaW1lIFUgQiBVUHJpbWUgQiB1UHJpbWUgQjJcIiksbih0LFwiMiAtMSAxIDEgMCAxIDEgLTFcIixcIlIyIHVQcmltZSBSIFVQcmltZSBSIFUgUlByaW1lIHUgUjIgQiBVUHJpbWUgQlByaW1lXCIpLG4odCxcIjEgMCAxIDEgLTEgMiAtMSAxXCIsXCJSMiB1IFJQcmltZSBVIFJQcmltZSBVUHJpbWUgUiB1UHJpbWUgUjIgRlByaW1lIFUgRlwiKSxuKHQsXCIxIC0xIC0xIDEgMSAtMSAtMSAxXCIsXCJVIFJQcmltZSBVUHJpbWUgUiBVUHJpbWUgUiBVIFIgVVByaW1lIFJQcmltZSBVIFIgVSBSMiBVUHJpbWUgUlByaW1lXCIpLG4odCxcIjAgMSAwIDAgMCAxIDAgMlwiLFwiTFByaW1lIFUyIEwgVSBMUHJpbWUgVTIgUiBVUHJpbWUgTCBVIFJQcmltZVwiKSxuKHQsXCIxIDEgLTEgLTEgMSAxIC0xIC0xXCIsXCJSIEJQcmltZSBSUHJpbWUgRiBSIEIgUlByaW1lIEZQcmltZSBSIEIgUlByaW1lIEYgUiBCUHJpbWUgUlByaW1lIEZQcmltZVwiKSxuKHQsXCIyIDAgMiAwIDIgMCAyIDBcIixcIlIgVSBSUHJpbWUgVSBSIFUgUlByaW1lIEZQcmltZSBSIFUgUlByaW1lIFVQcmltZSBSUHJpbWUgRiBSMiBVUHJpbWUgUlByaW1lIFUyIFIgVVByaW1lIFJQcmltZVwiKSxuKHQsXCIwIDIgMCAyIDAgMiAwIDJcIixcIlJQcmltZSBVIFIgVVByaW1lIFJQcmltZSBGUHJpbWUgVVByaW1lIEYgUiBVIFJQcmltZSBGIFJQcmltZSBGUHJpbWUgUiBVUHJpbWUgUlwiKSx0KSxzfXJldHVybiB1KHIsZSksYyhyLFt7a2V5Olwic29sdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb2x2ZSgpfX0se2tleTpcIl9nZXRDYXNlTnVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQbGxTdHJpbmcoKX19LHtrZXk6XCJfc29sdmVDYXNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy5maW5kUGF0dGVybihlKSx0PXRoaXMuZ2V0QWxnb3JpdGhtKHIpLG89dGhpcy5fZ2V0RnJvbnRGYWNlKGUscik7dGhpcy5tb3ZlKHQse29yaWVudGF0aW9uOnt1cDpcImRvd25cIixmcm9udDpvfX0pO3ZhciBuPXRoaXMuY3ViZS5nZXRDdWJpZShbXCJkb3duXCIsXCJmcm9udFwiXSksaT0oMCxsLmdldEZhY2VPZk1vdmUpKG4uZ2V0Q29sb3JPZkZhY2UoXCJmcm9udFwiKSksYT0oMCxsLmdldFJvdGF0aW9uRnJvbVRvKShcImRvd25cIixcImZyb250XCIsaSk7dGhpcy5tb3ZlKGEpfX0se2tleTpcImlzU29sdmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdWJlLmlzU29sdmVkKCl9fSx7a2V5OlwiZ2V0UGxsU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10scj10aGlzLl9nZXRQbGxDdWJpZXMoKSx0PVtcImZyb250XCIsXCJsZWZ0XCIsXCJiYWNrXCIsXCJyaWdodFwiXSxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBuPXJbb10saT1yW28rMV0sYT10W35+KG8vMildLHU9bi5nZXRDb2xvck9mRmFjZShhKTtpfHwoaT1yWzBdKTt2YXIgYz1pLmdldENvbG9yT2ZGYWNlKGEpLHM9KDAsbC5nZXRGYWNlT2ZNb3ZlKSh1KSxmPSgwLGwuZ2V0RmFjZU9mTW92ZSkoYyksdj0oMCxsLmdldERpcmVjdGlvbkZyb21GYWNlcykocyxmLHt1cDpcImRvd25cIn0pO1wiZnJvbnRcIj09PXYmJih2PTApLFwicmlnaHRcIj09PXYmJih2PTEpLFwibGVmdFwiPT09diYmKHY9LTEpLFwiYmFja1wiPT09diYmKHY9MiksZS5wdXNoKHYpfXJldHVybiBlLmpvaW4oXCIgXCIpfX0se2tleTpcImZpbmRQYXR0ZXJuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZTt2b2lkIDA9PT1lJiYoZT10aGlzLmdldFBsbFN0cmluZygpKTtmb3IodmFyIHQ9MDt0PDQ7dCsrKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5hbGdvcml0aG1zW2VdKXJldHVybiBlO2U9dGhpcy5fcm90YXRlUGxsU3RyaW5nTGVmdChlKX10aHJvdyBuZXcgRXJyb3IoJ05vIHBhdHRlcm4gZm91bmQgZm9yIHBsbCBzdHJpbmcgXCInK3IrJ1wiJyl9fSx7a2V5OlwiZ2V0QWxnb3JpdGhtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5maW5kUGF0dGVybihlKSksdm9pZCAwPT09dGhpcy5hbGdvcml0aG1zW2VdKXRocm93IG5ldyBFcnJvcignTm8gYWxnb3JpdGhtIGZvdW5kIGZvciBwYXR0ZXJuIFwiJytlKydcIicpO3JldHVybiB0aGlzLmFsZ29yaXRobXNbZV19fSx7a2V5OlwiX2dldFBsbEN1Ymllc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm5bW1wiZnJvbnRcIixcImRvd25cIixcInJpZ2h0XCJdLFtcImZyb250XCIsXCJkb3duXCJdLFtcImZyb250XCIsXCJkb3duXCIsXCJsZWZ0XCJdLFtcImxlZnRcIixcImRvd25cIl0sW1wibGVmdFwiLFwiZG93blwiLFwiYmFja1wiXSxbXCJiYWNrXCIsXCJkb3duXCJdLFtcImJhY2tcIixcImRvd25cIixcInJpZ2h0XCJdLFtcInJpZ2h0XCIsXCJkb3duXCJdXS5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIGUuY3ViZS5nZXRDdWJpZShyKX0pfX0se2tleTpcIl9nZXRDdWJpZVBlcm11dGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5mYWNlcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJkb3duXCIhPT1lfSksdD0oMCxsLmdldEZhY2VPZk1vdmUpKGUuZ2V0Q29sb3JPZkZhY2UocikpLG89KDAsbC5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIscix0KTtvPW8udG9Mb3dlckNhc2UoKTtyZXR1cm5cIlwiPT09bz8wOm8uaW5jbHVkZXMoXCJwcmltZVwiKT8xOm8uc3BsaXQoXCIgXCIpLmxlbmd0aD4xPzI6LTF9fSx7a2V5OlwiX3JvdGF0ZVBsbFN0cmluZ0xlZnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLnNwbGl0KFwiIFwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUpfSk7cmV0dXJuW10uY29uY2F0KG8oci5zbGljZSgyKSksbyhyLnNsaWNlKDAsMikpKS5qb2luKFwiIFwiKX19LHtrZXk6XCJfZ2V0RnJvbnRGYWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXtmb3IodmFyIHQ9W1wiZnJvbnRcIixcImxlZnRcIixcImJhY2tcIixcInJpZ2h0XCJdLG89MDtvPDQ7bysrKXtpZihlPT09cilyZXR1cm4gdFtvXTtlPXRoaXMuX3JvdGF0ZVBsbFN0cmluZ0xlZnQoZSl9dGhyb3cgbmV3IEVycm9yKCdPTEwgc3RyaW5nIFwiJytlKydcIiBkb2VzIG5vdCByZXNvbHZlIHRvIHRoZSBwYXR0ZXJuIFwiJytyKydcIicpfX1dKSxyfShzLkJhc2VTb2x2ZXIpO3IuUExMU29sdmVyPXZ9LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLmFsZ29yaXRobVNob3J0ZW5lcj1yLlBMTFNvbHZlcj1yLk9MTFNvbHZlcj1yLkYyTFNvbHZlcj1yLkNyb3NzU29sdmVyPXIuUnViaWtzQ3ViZT1yLkN1YmllPXIuU29sdmVyPXZvaWQgMDt2YXIgbz10KDkpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ3ViaWVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5DdWJpZX19KTt2YXIgbj10KDEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUnViaWtzQ3ViZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLlJ1Ymlrc0N1YmV9fSk7dmFyIGk9dCgxMSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDcm9zc1NvbHZlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLkNyb3NzU29sdmVyfX0pO3ZhciBhPXQoMTMpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRjJMU29sdmVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuRjJMU29sdmVyfX0pO3ZhciB1PXQoMTQpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiT0xMU29sdmVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuT0xMU29sdmVyfX0pO3ZhciBjPXQoMTUpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUExMU29sdmVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuUExMU29sdmVyfX0pO3ZhciBzPXQoMyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJhbGdvcml0aG1TaG9ydGVuZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5hbGdvcml0aG1TaG9ydGVuZXJ9fSk7dmFyIGw9dCgzMyk7ci5Tb2x2ZXI9bC5Tb2x2ZXIsci5kZWZhdWx0PWZ1bmN0aW9uKGUpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSx0PW5ldyBsLlNvbHZlcihlLHIpO3JldHVybiB0LnNvbHZlKCksci5wYXJ0aXRpb25lZD90LmdldFBhcnRpdGlvbnMoKTooMCxzLmFsZ29yaXRobVNob3J0ZW5lcikodC5nZXRNb3ZlcygpKX19LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcigpe3ZhciBlPXttb2RpZmllcnM6e3Jlc2V0OlswLDBdLGJvbGQ6WzEsMjJdLGRpbTpbMiwyMl0saXRhbGljOlszLDIzXSx1bmRlcmxpbmU6WzQsMjRdLGludmVyc2U6WzcsMjddLGhpZGRlbjpbOCwyOF0sc3RyaWtldGhyb3VnaDpbOSwyOV19LGNvbG9yczp7YmxhY2s6WzMwLDM5XSxyZWQ6WzMxLDM5XSxncmVlbjpbMzIsMzldLHllbGxvdzpbMzMsMzldLGJsdWU6WzM0LDM5XSxtYWdlbnRhOlszNSwzOV0sY3lhbjpbMzYsMzldLHdoaXRlOlszNywzOV0sZ3JheTpbOTAsMzldfSxiZ0NvbG9yczp7YmdCbGFjazpbNDAsNDldLGJnUmVkOls0MSw0OV0sYmdHcmVlbjpbNDIsNDldLGJnWWVsbG93Ols0Myw0OV0sYmdCbHVlOls0NCw0OV0sYmdNYWdlbnRhOls0NSw0OV0sYmdDeWFuOls0Niw0OV0sYmdXaGl0ZTpbNDcsNDldfX07cmV0dXJuIGUuY29sb3JzLmdyZXk9ZS5jb2xvcnMuZ3JheSxPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciB0PWVbcl07T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbz10W3JdO2Vbcl09dFtyXT17b3BlbjpcIlx1MDAxYltcIitvWzBdK1wibVwiLGNsb3NlOlwiXHUwMDFiW1wiK29bMV0rXCJtXCJ9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7dmFsdWU6dCxlbnVtZXJhYmxlOiExfSl9KSxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiZXhwb3J0c1wiLHtlbnVtZXJhYmxlOiEwLGdldDpyfSl9KS5jYWxsKHIsdCgzMikoZSkpfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbihlKXt1JiZlJiZlKCl9dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7Zm9yKHZhciB0PTA7dDxyLmxlbmd0aDt0Kyspe3ZhciBvPXJbdF07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1yZXR1cm4gZnVuY3Rpb24ocix0LG8pe3JldHVybiB0JiZlKHIucHJvdG90eXBlLHQpLG8mJmUocixvKSxyfX0oKSxhPXZvaWQgMCx1PXZvaWQgMCxjPXtjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4hMX0saWdub3JlOmZ1bmN0aW9uKCl7cmV0dXJuITF9fSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLG4pe28odGhpcyxlKSx0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSxjLG4pLHRoaXMub3B0aW9ucy5ERUJVRyYmKGE9dCgyMCksdT1uLkRFQlVHKSx0aGlzLmlucHV0PXIuc2xpY2UoKSx0aGlzLm91dHB1dD1bXX1yZXR1cm4gaShlLFt7a2V5OlwicnVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuaW5wdXQubGVuZ3RoPD0xKXJldHVybiB0aGlzLmlucHV0O3RoaXMudGVtcD1bdGhpcy5pbnB1dC5zaGlmdCgpXTtmb3IodmFyIHI9dm9pZCAwLHQ9dm9pZCAwLG89dm9pZCAwO3RoaXMudGVtcC5sZW5ndGg+MDspe24oZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhhLmJvbGQoXCI9PT09PT09PT0gU1RBUlQgPT09PT09PT09XCIpKSxlLl9sb2dJbmZvKCksY29uc29sZS5sb2coKX0pO3ZhciBpPXZvaWQgMCx1PXZvaWQgMDtpZigxPT09dGhpcy50ZW1wLmxlbmd0aCl7Zm9yKGk9MCx1PXRoaXMuaW5wdXRbaV07aTx0aGlzLmlucHV0Lmxlbmd0aCYmdGhpcy5vcHRpb25zLmlnbm9yZSh0aGlzLnRlbXBbMF0sdSk7KXU9dGhpcy5pbnB1dFsrK2ldO2k8dGhpcy5pbnB1dC5sZW5ndGgmJnRoaXMudGVtcC5wdXNoKHUpfWlmKG4oZnVuY3Rpb24oKXtyZXR1cm4gbz1lLnRlbXAuc2xpY2UoKX0pLDA9PT10aGlzLnRlbXAubGVuZ3RoKXtuKGZ1bmN0aW9uKCl7Y29uc29sZS5sb2coYS5ncmVlbihcImJyZWFraW5nXCIpKSxjb25zb2xlLmxvZyhhLmJvbGQoXCI9PT09PT09PT0gRU5EID09PT09PT09PVwiKSksY29uc29sZS5sb2coKX0pO2JyZWFrfTEhPT10aGlzLnRlbXAubGVuZ3RoPyh0aGlzLm9wdGlvbnMuY29tcGFyZSh0aGlzLnRlbXBbMF0sdGhpcy50ZW1wWzFdKT9mdW5jdGlvbigpe3ZvaWQgMCE9PWkmJmUuaW5wdXQuc3BsaWNlKGksMSk7dmFyIG89ZS5vcHRpb25zLmNvbWJpbmUoZS50ZW1wWzBdLGUudGVtcFsxXSk7bihmdW5jdGlvbigpe3I9XCJDb21iaW5pbmc6XCIsdD1vfSksZS50ZW1wPWUub3B0aW9ucy5jYW5jZWwobyk/W106W29dLGUucG9wdWxhdGVUZW1wQmFja3dhcmQoKSwwPT09ZS50ZW1wLmxlbmd0aCYmZS5wb3B1bGF0ZVRlbXBGb3J3YXJkKCl9KCk6KHRoaXMub3V0cHV0LnB1c2godGhpcy50ZW1wLnNoaWZ0KCkpLHZvaWQgMCE9PWkmJihpPjA/dGhpcy50ZW1wPXRoaXMuaW5wdXQuc3BsaWNlKDAsMSk6dGhpcy5pbnB1dC5zcGxpY2UoaSwxKSksbihmdW5jdGlvbigpe3JldHVybiByPVwiU2tpcHBpbmc6XCJ9KSksbihmdW5jdGlvbigpe2NvbnNvbGUubG9nKGEuZ3JlZW4ociksbyksY29uc29sZS5sb2coYS5ncmVlbihcInZhbHVlOlwiKSx0KSxjb25zb2xlLmxvZygpLGUuX2xvZ0luZm8oKSxjb25zb2xlLmxvZyhhLmJvbGQoXCI9PT09PT09PT0gRU5EID09PT09PT09PVwiKSksY29uc29sZS5sb2coKSxyPW51bGwsdD1udWxsLG89bnVsbH0pKToodGhpcy5vdXRwdXQucHVzaCh0aGlzLnRlbXAucG9wKCkpLHRoaXMucG9wdWxhdGVUZW1wRm9yd2FyZCgpLG4oZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhhLmdyZWVuKFwiY29udGludWluZ1wiKSksZS5fbG9nSW5mbygpLGNvbnNvbGUubG9nKGEuYm9sZChcIj09PT09PT09PSBFTkQgPT09PT09PT09XCIpKSxjb25zb2xlLmxvZygpfSkpfXJldHVybiBuKGZ1bmN0aW9uKCl7Y29uc29sZS5sb2coYS5ib2xkLmdyZWVuKFwiPT09PT09PT09IEZJTkFMID09PT09PT09PVwiKSksZS5fbG9nSW5mbygpLGNvbnNvbGUubG9nKGEuYm9sZC5ncmVlbihcIj09PT09PT09PSBGSU5BTCA9PT09PT09PT1cIikpLGNvbnNvbGUubG9nKCl9KSx0aGlzLm91dHB1dH19LHtrZXk6XCJwb3B1bGF0ZVRlbXBCYWNrd2FyZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vdXRwdXQubGVuZ3RoPjAmJnRoaXMudGVtcC51bnNoaWZ0KHRoaXMub3V0cHV0LnBvcCgpKX19LHtrZXk6XCJwb3B1bGF0ZVRlbXBGb3J3YXJkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlucHV0Lmxlbmd0aD4wJiZ0aGlzLnRlbXAucHVzaCh0aGlzLmlucHV0LnNoaWZ0KCkpfX0se2tleTpcIl9sb2dJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhhLmJvbGQoXCJvdXRwdXRcIiksdGhpcy5vdXRwdXQpLGNvbnNvbGUubG9nKGEuYm9sZChcInRlbXBcIiksdGhpcy50ZW1wKSxjb25zb2xlLmxvZyhhLmJvbGQoXCJpbnB1dFwiKSx0aGlzLmlucHV0KX19XSksZX0oKTtlLmV4cG9ydHM9c30sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSxyKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJXaHkgYXJlIHlvdSBldmVuIGltcG9ydGluZyB0aGlzLlwiKTtpZighci5jb21wYXJlKXRocm93IG5ldyBFcnJvcihcIm9wdGlvbnMuY29tcGFyZSBjYWxsYmFjayBtdXN0IGJlIHByZXNlbnRcIik7aWYoIXIuY29tYmluZSl0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLmNvbWJpbmUgY2FsbGJhY2sgbXVzdCBiZSBwcmVzZW50XCIpfXZhciBuPXQoMTgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIG8oZSxyKSxuZXcgbihlLHIpLnJ1bigpfX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbihyKXtmdW5jdGlvbiBvKGUpe3RoaXMuZW5hYmxlZD1lJiZ2b2lkIDAhPT1lLmVuYWJsZWQ/ZS5lbmFibGVkOmx9ZnVuY3Rpb24gbihlKXt2YXIgcj1mdW5jdGlvbiBlKCl7cmV0dXJuIGkuYXBwbHkoZSxhcmd1bWVudHMpfTtyZXR1cm4gci5fc3R5bGVzPWUsci5lbmFibGVkPXRoaXMuZW5hYmxlZCxyLl9fcHJvdG9fXz1oLHJ9ZnVuY3Rpb24gaSgpe3ZhciBlPWFyZ3VtZW50cyxyPWUubGVuZ3RoLHQ9MCE9PXImJlN0cmluZyhhcmd1bWVudHNbMF0pO2lmKHI+MSlmb3IodmFyIG89MTtvPHI7bysrKXQrPVwiIFwiK2Vbb107aWYoIXRoaXMuZW5hYmxlZHx8IXQpcmV0dXJuIHQ7dmFyIG49dGhpcy5fc3R5bGVzLGk9bi5sZW5ndGgsYT11LmRpbS5vcGVuO2Zvcighdnx8LTE9PT1uLmluZGV4T2YoXCJncmF5XCIpJiYtMT09PW4uaW5kZXhPZihcImdyZXlcIil8fCh1LmRpbS5vcGVuPVwiXCIpO2ktLTspe3ZhciBjPXVbbltpXV07dD1jLm9wZW4rdC5yZXBsYWNlKGMuY2xvc2VSZSxjLm9wZW4pK2MuY2xvc2V9cmV0dXJuIHUuZGltLm9wZW49YSx0fXZhciBhPXQoMjEpLHU9dCgxNyksYz10KDMwKSxzPXQoMjkpLGw9dCgzMSksZj1PYmplY3QuZGVmaW5lUHJvcGVydGllcyx2PVwid2luMzJcIj09PXIucGxhdGZvcm0mJiEvXnh0ZXJtL2kudGVzdChyLmVudi5URVJNKTt2JiYodS5ibHVlLm9wZW49XCJcdTAwMWJbOTRtXCIpO3ZhciBtPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHUpLmZvckVhY2goZnVuY3Rpb24ocil7dVtyXS5jbG9zZVJlPW5ldyBSZWdFeHAoYSh1W3JdLmNsb3NlKSxcImdcIiksZVtyXT17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzLHRoaXMuX3N0eWxlcy5jb25jYXQocikpfX19KSxlfSgpLGg9ZihmdW5jdGlvbigpe30sbSk7ZihvLnByb3RvdHlwZSxmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBPYmplY3Qua2V5cyhtKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2Vbcl09e2dldDpmdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyxbcl0pfX19KSxlfSgpKSxlLmV4cG9ydHM9bmV3IG8sZS5leHBvcnRzLnN0eWxlcz11LGUuZXhwb3J0cy5oYXNDb2xvcj1zLGUuZXhwb3J0cy5zdHJpcENvbG9yPWMsZS5leHBvcnRzLnN1cHBvcnRzQ29sb3I9bH0pLmNhbGwocix0KDgpKX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO3ZhciBvPS9bfFxcXFx7fSgpW1xcXV4kKyo/Ll0vZztlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGEgc3RyaW5nXCIpO3JldHVybiBlLnJlcGxhY2UobyxcIlxcXFwkJlwiKX19LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUscil7dmFyIHQ9bihlWzBdLGVbMV0sZVsyXSksbz1uKHJbMF0sclsxXSxyWzJdKTtpKHQsdCksaShvLG8pO3ZhciB1PWEodCxvKTtyZXR1cm4gdT4xPzA6TWF0aC5hY29zKHUpfWUuZXhwb3J0cz1vO3ZhciBuPXQoMjQpLGk9dCgyNSksYT10KDIzKX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSxyKXtyZXR1cm4gZVswXSpyWzBdK2VbMV0qclsxXStlWzJdKnJbMl19ZS5leHBvcnRzPW99LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUscix0KXt2YXIgbz1uZXcgRmxvYXQzMkFycmF5KDMpO3JldHVybiBvWzBdPWUsb1sxXT1yLG9bMl09dCxvfWUuZXhwb3J0cz1vfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIpe3ZhciB0PXJbMF0sbz1yWzFdLG49clsyXSxpPXQqdCtvKm8rbipuO3JldHVybiBpPjAmJihpPTEvTWF0aC5zcXJ0KGkpLGVbMF09clswXSppLGVbMV09clsxXSppLGVbMl09clsyXSppKSxlfWUuZXhwb3J0cz1vfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIsdCxvKXt2YXIgbj10WzFdLGk9dFsyXSxhPXJbMV0tbix1PXJbMl0taSxjPU1hdGguc2luKG8pLHM9TWF0aC5jb3Mobyk7cmV0dXJuIGVbMF09clswXSxlWzFdPW4rYSpzLXUqYyxlWzJdPWkrYSpjK3UqcyxlfWUuZXhwb3J0cz1vfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIsdCxvKXt2YXIgbj10WzBdLGk9dFsyXSxhPXJbMF0tbix1PXJbMl0taSxjPU1hdGguc2luKG8pLHM9TWF0aC5jb3Mobyk7cmV0dXJuIGVbMF09bit1KmMrYSpzLGVbMV09clsxXSxlWzJdPWkrdSpzLWEqYyxlfWUuZXhwb3J0cz1vfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIsdCxvKXt2YXIgbj10WzBdLGk9dFsxXSxhPXJbMF0tbix1PXJbMV0taSxjPU1hdGguc2luKG8pLHM9TWF0aC5jb3Mobyk7cmV0dXJuIGVbMF09bithKnMtdSpjLGVbMV09aSthKmMrdSpzLGVbMl09clsyXSxlfWUuZXhwb3J0cz1vfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89dCg2KSxuPW5ldyBSZWdFeHAobygpLnNvdXJjZSk7ZS5leHBvcnRzPW4udGVzdC5iaW5kKG4pfSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89dCg2KSgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9lLnJlcGxhY2UobyxcIlwiKTplfX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbihyKXt2YXIgdD1yLmFyZ3Ysbz10LmluZGV4T2YoXCItLVwiKSxuPWZ1bmN0aW9uKGUpe2U9XCItLVwiK2U7dmFyIHI9dC5pbmRleE9mKGUpO3JldHVybi0xIT09ciYmKC0xPT09b3x8cjxvKX07ZS5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuXCJGT1JDRV9DT0xPUlwiaW4gci5lbnZ8fCEobihcIm5vLWNvbG9yXCIpfHxuKFwibm8tY29sb3JzXCIpfHxuKFwiY29sb3I9ZmFsc2VcIikpJiYoISEobihcImNvbG9yXCIpfHxuKFwiY29sb3JzXCIpfHxuKFwiY29sb3I9dHJ1ZVwiKXx8bihcImNvbG9yPWFsd2F5c1wiKSl8fCEoci5zdGRvdXQmJiFyLnN0ZG91dC5pc1RUWSkmJihcIndpbjMyXCI9PT1yLnBsYXRmb3JtfHwoXCJDT0xPUlRFUk1cImluIHIuZW52fHxcImR1bWJcIiE9PXIuZW52LlRFUk0mJiEhL15zY3JlZW58Xnh0ZXJtfF52dDEwMHxjb2xvcnxhbnNpfGN5Z3dpbnxsaW51eC9pLnRlc3Qoci5lbnYuVEVSTSkpKSl9KCl9KS5jYWxsKHIsdCg4KSl9LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUud2VicGFja1BvbHlmaWxsfHwoZS5kZXByZWNhdGU9ZnVuY3Rpb24oKXt9LGUucGF0aHM9W10sZS5jaGlsZHJlbnx8KGUuY2hpbGRyZW49W10pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwibG9hZGVkXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUubH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImlkXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuaX19KSxlLndlYnBhY2tQb2x5ZmlsbD0xKSxlfX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsdD1BcnJheShlLmxlbmd0aCk7cjxlLmxlbmd0aDtyKyspdFtyXT1lW3JdO3JldHVybiB0fXJldHVybiBBcnJheS5mcm9tKGUpfWZ1bmN0aW9uIG4oZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuU29sdmVyPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGE9dCgxKSx1PXQoMTEpLGM9dCgxMykscz10KDE0KSxsPXQoMTUpLGY9dCgwKSx2PXQoMyksbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocix0KXt2YXIgbz10aGlzO2lmKG4odGhpcyxlKSxyIGluc3RhbmNlb2YgYS5SdWJpa3NDdWJlKXRoaXMuY3ViZT1yO2Vsc2V7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHIpdGhyb3cgbmV3IEVycm9yKCdcImN1YmVTdGF0ZVwiIGlzIG5vdCBhIHZhbGlkIGN1YmVTdGF0ZS4gUGxlYXNlIHByb3ZpZGUgYSBsaXN0IG9mIHNjcmFtYmxlIG1vdmVzIG9yIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhIGN1YmUgc3RhdGUnKTtyLnNwbGl0KFwiIFwiKS5sZW5ndGg+MXx8ci5sZW5ndGg8PTY/KHRoaXMuY3ViZT1hLlJ1Ymlrc0N1YmUuU29sdmVkKCksdGhpcy5jdWJlLm1vdmUocikpOnRoaXMuY3ViZT1uZXcgYS5SdWJpa3NDdWJlKHIpfXRoaXMub3B0aW9ucz10LHRoaXMucGhhc2VzPVtcImNyb3NzXCIsXCJmMmxcIixcIm9sbFwiLFwicGxsXCJdLHRoaXMucHJvZ3Jlc3M9e30sdGhpcy5waGFzZXMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gby5wcm9ncmVzc1tlXT1bXX0pO3ZhciBpPWZ1bmN0aW9uKGUscil7by5fdXBkYXRlUHJvZ3Jlc3MoZSxyKX07dGhpcy5jdXJyZW50UGhhc2U9bnVsbCx0aGlzLmN1cnJlbnRTb2x2ZXI9bnVsbCx0aGlzLmNyb3NzU29sdmVyPW5ldyB1LkNyb3NzU29sdmVyKHRoaXMuY3ViZSx0aGlzLm9wdGlvbnMpLHRoaXMuZjJsU29sdmVyPW5ldyBjLkYyTFNvbHZlcih0aGlzLmN1YmUsdGhpcy5vcHRpb25zKSx0aGlzLm9sbFNvbHZlcj1uZXcgcy5PTExTb2x2ZXIodGhpcy5jdWJlLHRoaXMub3B0aW9ucyksdGhpcy5wbGxTb2x2ZXI9bmV3IGwuUExMU29sdmVyKHRoaXMuY3ViZSx0aGlzLm9wdGlvbnMpLHRoaXMuYWZ0ZXJFYWNoKFwiYWxsXCIsaSl9cmV0dXJuIGkoZSxbe2tleTpcImFmdGVyRWFjaFwiLHZhbHVlOmZ1bmN0aW9uKGUscil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT8ocj1lLGU9XCJhbGxcIik6XCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPVwiYWxsXCI9PT1lP3RoaXMucGhhc2VzLnNsaWNlKCk6W2VdKSxcImZ1bmN0aW9uXCIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcignXCJhZnRlckVhY2hcIiBjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvbi4nKTt2YXIgdD0hMCxvPSExLG49dm9pZCAwO3RyeXtmb3IodmFyIGksYT1lW1N5bWJvbC5pdGVyYXRvcl0oKTshKHQ9KGk9YS5uZXh0KCkpLmRvbmUpO3Q9ITApe3ZhciB1PWkudmFsdWU7aWYoIXRoaXMucGhhc2VzLmluY2x1ZGVzKHUpKXRocm93IG5ldyBFcnJvcignUGhhc2UgXCInK3UrJ1wiIGlzblxcJ3QgcmVjb2duaXplZC4gUGxlYXNlIHNwZWNpZnkgXCJjcm9zc1wiLCBcImYybFwiLCBcIm9sbFwiLCBcInBsbFwiLCBvciBcImFsbFwiLicpfX1jYXRjaChlKXtvPSEwLG49ZX1maW5hbGx5e3RyeXshdCYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IG59fXZhciBjPSEwLHM9ITEsbD12b2lkIDA7dHJ5e2Zvcih2YXIgZix2PWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEoYz0oZj12Lm5leHQoKSkuZG9uZSk7Yz0hMCl7dGhpc1tmLnZhbHVlK1wiU29sdmVyXCJdLmFmdGVyRWFjaChyKX19Y2F0Y2goZSl7cz0hMCxsPWV9ZmluYWxseXt0cnl7IWMmJnYucmV0dXJuJiZ2LnJldHVybigpfWZpbmFsbHl7aWYocyl0aHJvdyBsfX19fSx7a2V5Olwic29sdmVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY3VycmVudFBoYXNlPVwiY3Jvc3NcIix0aGlzLmN1cnJlbnRTb2x2ZXI9dGhpcy5jcm9zc1NvbHZlcix0aGlzLmNyb3NzU29sdmVyLnNvbHZlKCksdGhpcy5jdXJyZW50UGhhc2U9XCJmMmxcIix0aGlzLmN1cnJlbnRTb2x2ZXI9dGhpcy5mMmxTb2x2ZXIsdGhpcy5mMmxTb2x2ZXIuc29sdmUoKSx0aGlzLmN1cnJlbnRQaGFzZT1cIm9sbFwiLHRoaXMuY3VycmVudFNvbHZlcj10aGlzLm9sbFNvbHZlcix0aGlzLm9sbFNvbHZlci5zb2x2ZSgpLHRoaXMuY3VycmVudFBoYXNlPVwicGxsXCIsdGhpcy5jdXJyZW50U29sdmVyPXRoaXMucGxsU29sdmVyLHRoaXMucGxsU29sdmVyLnNvbHZlKCl9fSx7a2V5OlwiZ2V0TW92ZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMscj1bXTtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5wcm9ncmVzcykuZm9yRWFjaChmdW5jdGlvbih0KXtlLnByb2dyZXNzW3RdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9cikucHVzaC5hcHBseSh0LG8oZS5tb3ZlcykpfSl9KSxyPSgwLGYubm9ybWFsaXplTm90YXRpb25zKShyKSxyLmpvaW4oXCIgXCIpfX0se2tleTpcImdldFBhcnRpdGlvbnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMscj17fTtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5wcm9ncmVzcykuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz1lLnByb2dyZXNzW3RdO2lmKDE9PT1vLmxlbmd0aClyW3RdPSgwLHYuYWxnb3JpdGhtU2hvcnRlbmVyKShvWzBdLm1vdmVzKTtlbHNle3ZhciBuPVtdO2UucHJvZ3Jlc3NbdF0uZm9yRWFjaChmdW5jdGlvbihlKXtuLnB1c2goKDAsdi5hbGdvcml0aG1TaG9ydGVuZXIpKGUubW92ZXMpKX0pLHJbdF09bn19KSxyfX0se2tleTpcImlzQ3Jvc3NFZGdlU29sdmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3Jvc3NTb2x2ZXIuaXNFZGdlU29sdmVkKGUpfX0se2tleTpcImlzRjJMUGFpclNvbHZlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlO3JldHVybiB0aGlzLmYybFNvbHZlci5pc1BhaXJTb2x2ZWQoe2Nvcm5lcjpyLGVkZ2U6dH0pfX0se2tleTpcImlzT0xMU29sdmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbGxTb2x2ZXIuaXNTb2x2ZWQoKX19LHtrZXk6XCJpc1BMTFNvbHZlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxsU29sdmVyLmlzU29sdmVkKCl9fSx7a2V5OlwiX3VwZGF0ZVByb2dyZXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSxyKXt0aGlzLnByb2dyZXNzW3JdLnB1c2goZSl9fV0pLGV9KCk7ci5Tb2x2ZXI9bX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO3ZhciBvPXQoMTYpLG49ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciByPXt9O2lmKG51bGwhPWUpZm9yKHZhciB0IGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCkmJihyW3RdPWVbdF0pO3JldHVybiByLmRlZmF1bHQ9ZSxyfShvKSxpPW4uZGVmYXVsdDtkZWxldGUgbi5kZWZhdWx0LE9iamVjdC5hc3NpZ24oaSxuKSxlLmV4cG9ydHM9aX0sZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG4oZSxyKXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByP2U6cn1mdW5jdGlvbiBpKGUscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUscik6ZS5fX3Byb3RvX189cil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksci5DYXNlMVNvbHZlcj12b2lkIDA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7Zm9yKHZhciB0PTA7dDxyLmxlbmd0aDt0Kyspe3ZhciBvPXJbdF07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1yZXR1cm4gZnVuY3Rpb24ocix0LG8pe3JldHVybiB0JiZlKHIucHJvdG90eXBlLHQpLG8mJmUocixvKSxyfX0oKSx1PXQoMSksYz10KDUpLHM9dCgwKSxsPWZ1bmN0aW9uKGUpe3JldHVybiB1LlJ1Ymlrc0N1YmUucmV2ZXJzZU1vdmVzKGUpfSxmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gbyh0aGlzLHIpLG4odGhpcywoci5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaShyLGUpLGEocixbe2tleTpcIl9nZXRDYXNlTnVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2U7aWYodGhpcy5pc1BhaXJNYXRjaGVkKHtjb3JuZXI6cixlZGdlOnR9KSlyZXR1cm4gMTtpZih0aGlzLmlzUGFpclNlcGFyYXRlZCh7Y29ybmVyOnIsZWRnZTp0fSkpcmV0dXJuIDI7dmFyIG89dm9pZCAwO3QuZmFjZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuZmFjZXMoKS5pbmNsdWRlcyhlKSYmXCJkb3duXCIhPT1lJiYobz1lKX0pO3ZhciBuPXIuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInVcIiE9PWUmJmUhPT1yLmdldENvbG9yT2ZGYWNlKFwiZG93blwiKX0pLGk9dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pO3JldHVyblwiZG93blwiPT09ci5nZXRGYWNlT2ZDb2xvcihcInVcIik/bz9yLmdldENvbG9yT2ZGYWNlKG8pPT09dC5nZXRDb2xvck9mRmFjZShvKT8zOjQ6NTpuPT09aT9vPzY6NzpvP289PT1yLmdldEZhY2VPZkNvbG9yKFwidVwiKT84Ojk6MTB9fSx7a2V5OlwiX3NvbHZlQ2FzZTFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTtyZXR1cm4gdGhpcy5zb2x2ZU1hdGNoZWRQYWlyKHtjb3JuZXI6cixlZGdlOnR9KX19LHtrZXk6XCJfc29sdmVDYXNlMlwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlO3JldHVybiB0aGlzLnNvbHZlU2VwYXJhdGVkUGFpcih7Y29ybmVyOnIsZWRnZTp0fSl9fSx7a2V5OlwiX3NvbHZlQ2FzZTNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPXQuZmFjZXMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09ZX0pLG49KDAscy5nZXRGYWNlT2ZNb3ZlKSh0LmdldENvbG9yT2ZGYWNlKFwiZG93blwiKSksaT0oMCxzLmdldEZhY2VGcm9tRGlyZWN0aW9uKShuLFwiYmFja1wiLHt1cDpcImRvd25cIn0pLGE9ci5nZXRGYWNlT2ZDb2xvcih0LmdldENvbG9yT2ZGYWNlKFwiZG93blwiKSksdT1cImxlZnRcIj09PSgwLHMuZ2V0RmFjZUZyb21EaXJlY3Rpb24pKG8sYSx7dXA6XCJkb3duXCJ9KSxjPSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLG8saSksZj0oMCxzLmdldEZhY2VPZk1vdmUpKHQuZ2V0Q29sb3JPZkZhY2UobykpLHY9dT9cIkRcIjpcIkRQcmltZVwiO2Y9dT9mOmwoZik7dmFyIG09YytcIiBcIitmK1wiIFwiK2YrXCIgRCBEIFwiO20rPWYrXCIgXCIrditcIiBcIitsKGYpK1wiIFwiK3YrXCIgXCIrZitcIiBcIitmLHRoaXMubW92ZShtLHt1cHBlckNhc2U6ITB9KX19LHtrZXk6XCJfc29sdmVDYXNlNFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlLG89dC5mYWNlcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJkb3duXCIhPT1lfSksbj0oMCxzLmdldEZhY2VPZk1vdmUpKHQuZ2V0Q29sb3JPZkZhY2UobykpLGk9ci5mYWNlcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIXQuZmFjZXMoKS5pbmNsdWRlcyhlKX0pLGE9XCJsZWZ0XCI9PT0oMCxzLmdldEZhY2VGcm9tRGlyZWN0aW9uKShpLG8se3VwOlwiZG93blwifSksdT0oMCxzLmdldFJvdGF0aW9uRnJvbVRvKShcImRvd25cIixvLG4pLGM9KDAscy5nZXRNb3ZlT2ZGYWNlKShuKTtjPWE/bChjKTpjLHRoaXMubW92ZSh1K1wiIFwiK2MrXCIgRCBEIFwiK2woYykse3VwcGVyQ2FzZTohMH0pLHRoaXMuc29sdmVTZXBhcmF0ZWRQYWlyKHtjb3JuZXI6cixlZGdlOnR9KX19LHtrZXk6XCJfc29sdmVDYXNlNVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlLG89dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pLG49dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiPT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pLGk9XCJyaWdodFwiPT09KDAscy5nZXRGYWNlRnJvbURpcmVjdGlvbikoKDAscy5nZXRGYWNlT2ZNb3ZlKShvKSwoMCxzLmdldEZhY2VPZk1vdmUpKG4pLHt1cDpcImRvd25cIn0pLGE9dC5nZXRGYWNlT2ZDb2xvcihvKSx1PSgwLHMuZ2V0RmFjZU9mTW92ZSkobyksYz0oMCxzLmdldFJvdGF0aW9uRnJvbVRvKShcImRvd25cIixhLHUpO3RoaXMubW92ZShjLHt1cHBlckNhc2U6ITB9KTt2YXIgZj1yLmdldEZhY2VPZkNvbG9yKG8pLHY9dSxtPSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLGYsdiksaD1pP2wodSk6dTt0aGlzLm1vdmUoaCtcIiBcIittK1wiIFwiK2woaCkse3VwcGVyQ2FzZTohMH0pLHRoaXMuc29sdmVNYXRjaGVkUGFpcih7Y29ybmVyOnIsZWRnZTp0fSl9fSx7a2V5OlwiX3NvbHZlQ2FzZTZcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPXQuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImRvd25cIiE9PXQuZ2V0RmFjZU9mQ29sb3IoZSl9KSxuPXQuZ2V0RmFjZU9mQ29sb3IobyksaT0oMCxzLmdldEZhY2VPZk1vdmUpKHQuZ2V0Q29sb3JPZkZhY2UoXCJkb3duXCIpKSxhPVwibGVmdFwiPT09KDAscy5nZXREaXJlY3Rpb25Gcm9tRmFjZXMpKG4sci5nZXRGYWNlT2ZDb2xvcihvKSx7dXA6XCJkb3duXCJ9KSx1PSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLG4saSksYz1hP2k6bChpKSxmPWE/XCJEUHJpbWVcIjpcIkRcIjt0aGlzLm1vdmUodStcIiBcIitjK1wiIFwiK2YrXCIgXCIrbChjKSx7dXBwZXJDYXNlOiEwfSksdGhpcy5zb2x2ZVNlcGFyYXRlZFBhaXIoe2Nvcm5lcjpyLGVkZ2U6dH0pfX0se2tleTpcIl9zb2x2ZUNhc2U3XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2Usbz10LmNvbG9ycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJkb3duXCIhPT10LmdldEZhY2VPZkNvbG9yKGUpfSksbj1yLmdldEZhY2VPZkNvbG9yKFwidVwiKSxpPSgwLHMuZ2V0RmFjZU9mTW92ZSkobyksYT1cImxlZnRcIj09PSgwLHMuZ2V0RGlyZWN0aW9uRnJvbUZhY2VzKShyLmdldEZhY2VPZkNvbG9yKG8pLHIuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpLHt1cDpcImRvd25cIn0pLHU9KDAscy5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsbixpKTt0aGlzLm1vdmUodSx7dXBwZXJDYXNlOiEwfSk7dmFyIGM9dC5nZXRGYWNlT2ZDb2xvcihvKSxmPXIuZ2V0RmFjZU9mQ29sb3Iobyksdj1hP3IuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpOmwoci5nZXRGYWNlT2ZDb2xvcihcInVcIikpLG09KDAscy5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsYyxmKTt0aGlzLm1vdmUoditcIiBcIittK1wiIFwiK2wodikse3VwcGVyQ2FzZTohMH0pLHRoaXMuc29sdmVNYXRjaGVkUGFpcih7Y29ybmVyOnIsZWRnZTp0fSl9fSx7a2V5OlwiX3NvbHZlQ2FzZThcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPXQuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImRvd25cIiE9PXQuZ2V0RmFjZU9mQ29sb3IoZSl9KSxuPXQuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImRvd25cIj09PXQuZ2V0RmFjZU9mQ29sb3IoZSl9KSxpPXIuZ2V0RmFjZU9mQ29sb3IobiksYT0oMCxzLmdldEZhY2VPZk1vdmUpKG8pLHU9XCJsZWZ0XCI9PT0oMCxzLmdldERpcmVjdGlvbkZyb21GYWNlcykoaSxyLmdldEZhY2VPZkNvbG9yKFwidVwiKSx7dXA6XCJkb3duXCJ9KSxjPSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLGksYSksZj11P2woYSk6YSx2PXU/XCJEXCI6XCJEUHJpbWVcIjt0aGlzLm1vdmUoYytcIiBcIitmK1wiIFwiK3YrXCIgXCIrbChmKSx7dXBwZXJDYXNlOiEwfSksdGhpcy5zb2x2ZVNlcGFyYXRlZFBhaXIoe2Nvcm5lcjpyLGVkZ2U6dH0pfX0se2tleTpcIl9zb2x2ZUNhc2U5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2Usbz10LmNvbG9ycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJkb3duXCI9PT10LmdldEZhY2VPZkNvbG9yKGUpfSksbj1yLmdldEZhY2VPZkNvbG9yKFwidVwiKSxpPSgwLHMuZ2V0RmFjZU9mTW92ZSkobyksYT1cImxlZnRcIj09PSgwLHMuZ2V0RGlyZWN0aW9uRnJvbUZhY2VzKShyLmdldEZhY2VPZkNvbG9yKG8pLG4se3VwOlwiZG93blwifSksdT0oMCxzLmdldFJvdGF0aW9uRnJvbVRvKShcImRvd25cIixuLGkpLGM9YT9pOmwoaSk7dGhpcy5tb3ZlKHUrXCIgXCIrYytcIiBEIEQgXCIrbChjKSx7dXBwZXJDYXNlOiEwfSksdGhpcy5zb2x2ZVNlcGFyYXRlZFBhaXIoe2Nvcm5lcjpyLGVkZ2U6dH0pfX0se2tleTpcIl9zb2x2ZUNhc2UxMFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlLG89dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiIT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pLG49dC5jb2xvcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiZG93blwiPT09dC5nZXRGYWNlT2ZDb2xvcihlKX0pLGk9ci5nZXRGYWNlT2ZDb2xvcihcInVcIiksYT0oMCxzLmdldEZhY2VPZk1vdmUpKG4pLHU9XCJsZWZ0XCI9PT0oMCxzLmdldERpcmVjdGlvbkZyb21GYWNlcykoci5nZXRGYWNlT2ZDb2xvcihuKSxyLmdldEZhY2VPZkNvbG9yKFwidVwiKSx7dXA6XCJkb3duXCJ9KSxjPSgwLHMuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLGksYSk7dGhpcy5tb3ZlKGMse3VwcGVyQ2FzZTohMH0pO3ZhciBmPXQuZ2V0RmFjZU9mQ29sb3Iobyksdj0oMCxzLmdldEZhY2VPZk1vdmUpKG8pLG09dT9hOmwoYSksaD0oMCxzLmdldFJvdGF0aW9uRnJvbVRvKShcImRvd25cIixmLHYpO3RoaXMubW92ZShtK1wiIFwiK2grXCIgXCIrbChtKSx7dXBwZXJDYXNlOiEwfSksdGhpcy5zb2x2ZVNlcGFyYXRlZFBhaXIoe2Nvcm5lcjpyLGVkZ2U6dH0pfX1dKSxyfShjLkYyTENhc2VCYXNlU29sdmVyKTtyLkNhc2UxU29sdmVyPWZ9LGZ1bmN0aW9uKGUscix0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUscil7aWYoIShlIGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBuKGUscil7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFyfHxcIm9iamVjdFwiIT10eXBlb2YgciYmXCJmdW5jdGlvblwiIT10eXBlb2Ygcj9lOnJ9ZnVuY3Rpb24gaShlLHIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHImJm51bGwhPT1yKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiByKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHImJnIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxyJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHIpOmUuX19wcm90b19fPXIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHIuQ2FzZTJTb2x2ZXI9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe3ZhciB0PVtdLG89ITAsbj0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBhLHU9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7IShvPShhPXUubmV4dCgpKS5kb25lKSYmKHQucHVzaChhLnZhbHVlKSwhcnx8dC5sZW5ndGghPT1yKTtvPSEwKTt9Y2F0Y2goZSl7bj0hMCxpPWV9ZmluYWxseXt0cnl7IW8mJnUucmV0dXJuJiZ1LnJldHVybigpfWZpbmFsbHl7aWYobil0aHJvdyBpfX1yZXR1cm4gdH1yZXR1cm4gZnVuY3Rpb24ocix0KXtpZihBcnJheS5pc0FycmF5KHIpKXJldHVybiByO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QocikpcmV0dXJuIGUocix0KTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKX19KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG89clt0XTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGM9dCgxKSxzPXQoNSksbD10KDApLGY9ZnVuY3Rpb24oZSl7cmV0dXJuIGMuUnViaWtzQ3ViZS5yZXZlcnNlTW92ZXMoZSl9LHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcigpe3JldHVybiBvKHRoaXMsciksbih0aGlzLChyLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHIpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKHIsZSksdShyLFt7a2V5OlwiX2dldENhc2VOdW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPXIuZmFjZXMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJkb3duXCIhPT1lfSksbj10LmZhY2VzKCksaT0oMCxsLmdldERpcmVjdGlvbkZyb21GYWNlcykob1swXSxvWzFdLHt1cDpcImRvd25cIn0pLGE9KDAsbC5nZXREaXJlY3Rpb25Gcm9tRmFjZXMpKG5bMF0sblsxXSx7dXA6XCJkb3duXCJ9KSx1PVwicmlnaHRcIj09PWk/b1sxXTpvWzBdLGM9XCJyaWdodFwiPT09YT9uWzFdOm5bMF07aWYoXCJkb3duXCI9PT1yLmdldEZhY2VPZkNvbG9yKFwidVwiKSlyZXR1cm4gci5nZXRDb2xvck9mRmFjZSh1KT09PXQuZ2V0Q29sb3JPZkZhY2UoYyk/MToyO3ZhciBzPXIuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInVcIiE9PWUmJmUhPT1yLmdldENvbG9yT2ZGYWNlKFwiZG93blwiKX0pO3JldHVybiBzPT09KFwibGVmdFwiPT09KDAsbC5nZXREaXJlY3Rpb25Gcm9tRmFjZXMpKHIuZ2V0RmFjZU9mQ29sb3Iocyksci5nZXRGYWNlT2ZDb2xvcihcInVcIikse3VwOlwiZG93blwifSk/dC5nZXRDb2xvck9mRmFjZShjKTp0LmNvbG9ycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0RmFjZU9mQ29sb3IoZSkhPT1jfSkpPzM6NH19LHtrZXk6XCJfc29sdmVDYXNlMVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlLG89dC5jb2xvcnMoKVswXSxuPXIuZ2V0RmFjZU9mQ29sb3IobyksaT10LmdldEZhY2VPZkNvbG9yKG8pLHU9KDAsbC5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsbixpKTt0aGlzLm1vdmUodSx7dXBwZXJDYXNlOiEwfSk7dmFyIGM9dC5mYWNlcygpLHM9YShjLDIpLHY9c1swXSxtPXNbMV0saD0oMCxsLmdldERpcmVjdGlvbkZyb21GYWNlcykodixtLHt1cDpcImRvd25cIn0pLHA9XCJyaWdodFwiPT09aD9tOnY7dGhpcy5tb3ZlKHArXCIgRFByaW1lIFwiK2YocCkse3VwcGVyQ2FzZTohMH0pLHRoaXMuc29sdmVNYXRjaGVkUGFpcih7Y29ybmVyOnIsZWRnZTp0fSl9fSx7a2V5OlwiX3NvbHZlQ2FzZTJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZSxvPXIuZ2V0RmFjZU9mQ29sb3IodC5jb2xvcnMoKVswXSksbj10LmdldEZhY2VPZkNvbG9yKHQuY29sb3JzKClbMV0pLGk9KDAsbC5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsbyxuKTt0aGlzLm1vdmUoaSx7dXBwZXJDYXNlOiEwfSk7dmFyIGE9KDAsbC5nZXREaXJlY3Rpb25Gcm9tRmFjZXMpKHQuZmFjZXMoKVswXSx0LmZhY2VzKClbMV0se3VwOlwiZG93blwifSksdT10LmZhY2VzKClbXCJyaWdodFwiPT09YT8xOjBdO3RoaXMubW92ZSh1K1wiIEQgXCIrZih1KStcIiBEUHJpbWVcIix7dXBwZXJDYXNlOiEwfSksdGhpcy5tb3ZlKHUrXCIgRCBcIitmKHUpLHt1cHBlckNhc2U6ITB9KSx0aGlzLnNvbHZlU2VwYXJhdGVkUGFpcih7Y29ybmVyOnIsZWRnZTp0fSl9fSx7a2V5OlwiX3NvbHZlQ2FzZTNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTt0aGlzLl9jYXNlM0FuZDRIZWxwZXIoe2Nvcm5lcjpyLGVkZ2U6dH0sMyl9fSx7a2V5OlwiX3NvbHZlQ2FzZTRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgcj1lLmNvcm5lcix0PWUuZWRnZTt0aGlzLl9jYXNlM0FuZDRIZWxwZXIoe2Nvcm5lcjpyLGVkZ2U6dH0sNCl9fSx7a2V5OlwiX2Nhc2UzQW5kNEhlbHBlclwiLHZhbHVlOmZ1bmN0aW9uKGUscil7dmFyIHQ9ZS5jb3JuZXIsbz1lLmVkZ2Usbj10LmdldENvbG9yT2ZGYWNlKFwiZG93blwiKSxpPXQuY29sb3JzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4hW24sXCJ1XCJdLmluY2x1ZGVzKGUpfSksYT0zPT09cj9pOm4sdT1cImxlZnRcIj09PSgwLGwuZ2V0RGlyZWN0aW9uRnJvbUZhY2VzKSh0LmdldEZhY2VPZkNvbG9yKGkpLHQuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpLHt1cDpcImRvd25cIn0pLGM9dC5nZXRGYWNlT2ZDb2xvcihcInVcIikscz1vLmdldEZhY2VPZkNvbG9yKGEpLHY9KDAsbC5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsYyxzKSxtPXU/czpmKHMpLGg9dT9cIkRQcmltZVwiOlwiRFwiO2g9ND09PXI/ZihoKTpoLHRoaXMubW92ZSh2K1wiIFwiK20rXCIgXCIraCtcIiBcIitmKG0pLHt1cHBlckNhc2U6ITB9KSx0aGlzW1wic29sdmVcIisoMz09PXI/XCJNYXRjaGVkXCI6XCJTZXBhcmF0ZWRcIikrXCJQYWlyXCJdKHtjb3JuZXI6dCxlZGdlOm99KX19XSkscn0ocy5GMkxDYXNlQmFzZVNvbHZlcik7ci5DYXNlMlNvbHZlcj12fSxmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHIpe2lmKCEoZSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbihlLHIpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hcnx8XCJvYmplY3RcIiE9dHlwZW9mIHImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHI/ZTpyfWZ1bmN0aW9uIGkoZSxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2Ygcik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyJiZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksciYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSxyKTplLl9fcHJvdG9fXz1yKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyLkNhc2UzU29sdmVyPXZvaWQgMDt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgdD1bXSxvPSEwLG49ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgYSx1PWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEobz0oYT11Lm5leHQoKSkuZG9uZSkmJih0LnB1c2goYS52YWx1ZSksIXJ8fHQubGVuZ3RoIT09cik7bz0hMCk7fWNhdGNoKGUpe249ITAsaT1lfWZpbmFsbHl7dHJ5eyFvJiZ1LnJldHVybiYmdS5yZXR1cm4oKX1maW5hbGx5e2lmKG4pdGhyb3cgaX19cmV0dXJuIHR9cmV0dXJuIGZ1bmN0aW9uKHIsdCl7aWYoQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gcjtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KHIpKXJldHVybiBlKHIsdCk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIil9fSgpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7Zm9yKHZhciB0PTA7dDxyLmxlbmd0aDt0Kyspe3ZhciBvPXJbdF07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1yZXR1cm4gZnVuY3Rpb24ocix0LG8pe3JldHVybiB0JiZlKHIucHJvdG90eXBlLHQpLG8mJmUocixvKSxyfX0oKSxjPXQoMSkscz10KDUpLGw9dCgwKSxmPWZ1bmN0aW9uKGUpe3JldHVybiBjLlJ1Ymlrc0N1YmUucmV2ZXJzZU1vdmVzKGUpfSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gbyh0aGlzLHIpLG4odGhpcywoci5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaShyLGUpLHUocixbe2tleTpcIl9nZXRDYXNlTnVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXI7ZS5lZGdlO3JldHVyblwidVwiPT09ci5nZXRDb2xvck9mRmFjZShcInVwXCIpPzE6Mn19LHtrZXk6XCJfc29sdmVDYXNlMVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29ybmVyLHQ9ZS5lZGdlLG89ci5mYWNlcygpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInVwXCIhPT1lfSksbj0oMCxsLmdldERpcmVjdGlvbkZyb21GYWNlcykob1swXSxvWzFdLHt1cDpcImRvd25cIn0pLGk9XCJyaWdodFwiPT09bj9vOm8ucmV2ZXJzZSgpLHU9YShpLDIpLGM9dVswXSxzPXVbMV0sdj10LmZhY2VzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImRvd25cIiE9PWV9KSxtPXQuZ2V0Q29sb3JPZkZhY2UodiksaD0oMCxsLmdldEZhY2VGcm9tRGlyZWN0aW9uKShyLmdldEZhY2VPZkNvbG9yKG0pLG09PT1yLmdldENvbG9yT2ZGYWNlKHMpP1wicmlnaHRcIjpcImxlZnRcIix7dXA6XCJkb3duXCJ9KSxwPW09PT1yLmdldENvbG9yT2ZGYWNlKGMpLGc9KDAsbC5nZXRSb3RhdGlvbkZyb21UbykoXCJkb3duXCIsdixoKSxkPXA/czpmKGMpLHk9cD9cIkRQcmltZVwiOlwiRFwiO3RoaXMubW92ZShnK1wiIFwiK2QrXCIgXCIreStcIiBcIitmKGQpLHt1cHBlckNhc2U6ITB9KSx0aGlzLnNvbHZlTWF0Y2hlZFBhaXIoe2Nvcm5lcjpyLGVkZ2U6dH0pfX0se2tleTpcIl9zb2x2ZUNhc2UyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb3JuZXIsdD1lLmVkZ2Usbz1yLmNvbG9ycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJ1XCIhPT1lJiZcInVwXCIhPT1yLmdldEZhY2VPZkNvbG9yKGUpfSksbj10LmZhY2VzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImRvd25cIiE9PWV9KSxpPXQuZ2V0Q29sb3JPZkZhY2UobiksYT1vIT09aSx1PXIuZ2V0RmFjZU9mQ29sb3IoYT9vOlwidVwiKSxjPSgwLGwuZ2V0Um90YXRpb25Gcm9tVG8pKFwiZG93blwiLG4sdSkscz1cImxlZnRcIj09PSgwLGwuZ2V0RGlyZWN0aW9uRnJvbUZhY2VzKShyLmdldEZhY2VPZkNvbG9yKG8pLHIuZ2V0RmFjZU9mQ29sb3IoXCJ1XCIpLHt1cDpcImRvd25cIn0pLHY9cz9cIkRQcmltZVwiOlwiRFwiLG09ci5nZXRGYWNlT2ZDb2xvcihcInVcIik7bT1zP2YobSk6bSx0aGlzLm1vdmUoYytcIiBcIittK1wiIFwiK3YrXCIgXCIrZihtKSx7dXBwZXJDYXNlOiEwfSksdGhpc1tcInNvbHZlXCIrKGE/XCJNYXRjaGVkXCI6XCJTZXBhcmF0ZWRcIikrXCJQYWlyXCJdKHtjb3JuZXI6cixlZGdlOnR9KX19XSkscn0ocy5GMkxDYXNlQmFzZVNvbHZlcik7ci5DYXNlM1NvbHZlcj12fV0pfSk7Il19
